# openclaw-projects environment configuration
#
# Copy to .env and edit as needed:
#   cp .env.example .env
#
# Required variables are marked with (REQUIRED)
# Variables with defaults show their default value
# 
# For production deployment with Traefik, see docker-compose.traefik.yml
# For basic deployment behind existing proxy, see docker-compose.yml

# =============================================================================
# Core Application Settings
# =============================================================================

# Public base URL used for magic-link redirects and API callbacks
# Should match your externally accessible URL
PUBLIC_BASE_URL=http://localhost:3000

# Cookie signing secret (REQUIRED)
# Generate a long random string:
#   openssl rand -base64 48
COOKIE_SECRET=

# Authentication secret for OpenClaw plugin requests (REQUIRED for production)
# This authenticates API requests from the OpenClaw plugin
# Generate with: openssl rand -base64 32
OPENCLAW_PROJECTS_AUTH_SECRET=

# Alternative: load from file (for Docker secrets)
# OPENCLAW_PROJECTS_AUTH_SECRET_FILE=/run/secrets/auth_secret

# Alternative: load from command (for 1Password, etc.)
# OPENCLAW_PROJECTS_AUTH_SECRET_COMMAND=op read 'op://vault/auth/secret'

# Disable auth entirely (NOT RECOMMENDED - development only!)
# OPENCLAW_PROJECTS_AUTH_DISABLED=false

# Node environment (production, development, test)
# NODE_ENV=production

# =============================================================================
# Service Ports
# =============================================================================

# API server port (default: 3000)
API_PORT=3000

# Frontend app port (default: 8080)
FRONTEND_PORT=8080

# SeaweedFS S3 port (default: 8333)
# SEAWEEDFS_PORT=8333

# =============================================================================
# PostgreSQL Database
# =============================================================================

# Database user (default: openclaw)
POSTGRES_USER=openclaw

# Database password (REQUIRED)
# Use a strong password in production
POSTGRES_PASSWORD=

# Database name (default: openclaw)
POSTGRES_DB=openclaw

# PostgreSQL connection parameters (used by API, usually auto-configured)
# PGHOST=db
# PGPORT=5432
# PGUSER=${POSTGRES_USER}
# PGPASSWORD=${POSTGRES_PASSWORD}
# PGDATABASE=${POSTGRES_DB}

# =============================================================================
# S3-Compatible Storage (SeaweedFS)
# =============================================================================

# S3 endpoint URL (auto-configured for internal SeaweedFS in compose)
# S3_ENDPOINT=http://seaweedfs:8333

# S3 bucket name (default: openclaw)
S3_BUCKET=openclaw

# S3 region (default: us-east-1, required for AWS S3)
S3_REGION=us-east-1

# S3 access key (default: openclaw)
# This key is used by both the API and SeaweedFS for authentication
# SeaweedFS will reject requests that don't have valid credentials
S3_ACCESS_KEY=openclaw

# S3 secret key (REQUIRED)
# Used by both API and SeaweedFS for authentication. All S3 requests require valid credentials.
# Generate with: openssl rand -hex 32
S3_SECRET_KEY=

# Force path-style access (required for SeaweedFS, default: true)
# Set to false for AWS S3 with virtual-hosted-style
# S3_FORCE_PATH_STYLE=true

# =============================================================================
# SeaweedFS Configuration
# =============================================================================

# Maximum volume size in MB
# Basic compose default: 1000MB
# Production default: 30000MB
SEAWEEDFS_VOLUME_SIZE_LIMIT_MB=1000

# =============================================================================
# Email Integration (Postmark)
# =============================================================================

# Postmark is used for transactional emails (magic links, notifications)
# If unconfigured, magic links work only in development mode

# Postmark server token for transactional emails
# Get from Postmark dashboard: https://account.postmarkapp.com/servers
# POSTMARK_TRANSACTIONAL_TOKEN=your-token-here

# Alternative: load token from file (for Docker secrets)
# POSTMARK_TRANSACTIONAL_TOKEN_FILE=/run/secrets/postmark_transactional_token

# Postmark server token for broadcast emails (newsletters, marketing)
# POSTMARK_BROADCAST_TOKEN_FILE=/run/secrets/postmark_broadcast_token

# From address for emails (must be verified sender in Postmark)
# POSTMARK_FROM=Projects <projects@example.com>

# Reply-to address
# POSTMARK_REPLY_TO=support@example.com

# Postmark message stream (default: outbound)
# POSTMARK_MESSAGE_STREAM=outbound

# Enable test email sending in non-production mode
# POSTMARK_ENABLE_TEST_SEND=false

# =============================================================================
# SMS Integration (Twilio)
# =============================================================================

# Twilio is used for SMS notifications and reminders
# All three variables required for SMS functionality

# Twilio Account SID (starts with AC)
# Get from Twilio Console: https://console.twilio.com/
# TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx

# Twilio Auth Token
# TWILIO_AUTH_TOKEN=your-auth-token

# Twilio phone number for sending SMS (E.164 format)
# TWILIO_FROM_NUMBER=+15551234567

# =============================================================================
# Embedding Providers (for semantic search / pgvector)
# =============================================================================

# Which embedding provider to use (openai, voyagerai, gemini)
# EMBEDDING_PROVIDER=openai

# OpenAI API key for embeddings (ada-002)
# Get from: https://platform.openai.com/api-keys
# OPENAI_API_KEY=sk-...

# Alternative: load from file
# OPENAI_API_KEY_FILE=/path/to/key

# Alternative: load from command
# OPENAI_API_KEY_COMMAND=op read 'op://vault/openai/key'

# VoyageAI API key for embeddings
# Get from: https://dash.voyageai.com/
# VOYAGERAI_API_KEY=pa-...

# Alternative: load from file
# VOYAGERAI_API_KEY_FILE=/path/to/key

# Google Gemini API key for embeddings
# Get from: https://makersuite.google.com/app/apikey
# GEMINI_API_KEY=...

# Alternative: load from file
# GEMINI_API_KEY_FILE=/path/to/key

# =============================================================================
# OpenClaw Integration
# =============================================================================

# OpenClaw gateway URL for hooks and callbacks
# OPENCLAW_GATEWAY_URL=https://gateway.openclaw.ai

# Authentication token for OpenClaw webhooks
# OPENCLAW_HOOK_TOKEN=your-hook-token

# Default model for OpenClaw interactions
# OPENCLAW_DEFAULT_MODEL=gpt-4

# Timeout for OpenClaw API calls in seconds
# OPENCLAW_TIMEOUT_SECONDS=30

# =============================================================================
# Rate Limiting and Security
# =============================================================================

# Maximum requests per window (default: 100)
# RATE_LIMIT_MAX=100

# Rate limit window in milliseconds (default: 60000 = 1 minute)
# RATE_LIMIT_WINDOW_MS=60000

# Disable rate limiting (development only!)
# RATE_LIMIT_DISABLED=false

# Disable webhook IP whitelist validation (development only!)
# WEBHOOK_IP_WHITELIST_DISABLED=false

# (Auth configuration moved to Core Application Settings section above)

# =============================================================================
# File Upload Settings
# =============================================================================

# Maximum file upload size in bytes (default: 10MB = 10485760)
# MAX_FILE_SIZE_BYTES=10485760

# =============================================================================
# Traefik/TLS Configuration (docker-compose.traefik.yml only)
# =============================================================================

# Your domain name (REQUIRED for Traefik deployment)
# DOMAIN=example.com

# Email address for ACME/Let's Encrypt notifications (REQUIRED)
# ACME_EMAIL=admin@example.com

# DNS provider for ACME DNS-01 challenge (default: cloudflare)
# See DNS Provider section below for available options
# ACME_DNS_PROVIDER=cloudflare

# HTTPS port (default: 443)
# HTTPS_PORT=443

# HTTP port (default: 80, used for redirect to HTTPS)
# HTTP_PORT=80

# Disable HTTP listener entirely (use when behind another load balancer)
# DISABLE_HTTP=false

# Trusted IP ranges for proxy protocol/forwarded headers (comma-separated CIDRs)
# Example: TRUSTED_IPS=10.0.0.0/8,172.16.0.0/12,192.168.0.0/16
# TRUSTED_IPS=

# =============================================================================
# DNS Provider Configuration
# =============================================================================

# DNS-01 challenge is required for wildcard certificates and split-horizon DNS
#
# Supported providers: See full list at:
# https://go-acme.github.io/lego/dns/
#
# Each provider requires specific environment variables.
# Below are examples for common providers.

# -----------------------------------------------------------------------------
# Cloudflare (ACME_DNS_PROVIDER=cloudflare)
# -----------------------------------------------------------------------------
# API Token with Zone:DNS:Edit permission
# Create at: https://dash.cloudflare.com/profile/api-tokens
# CF_DNS_API_TOKEN=your-cloudflare-api-token

# Alternative: Global API Key (less secure, not recommended)
# CF_API_KEY=your-global-api-key
# CF_API_EMAIL=your-cloudflare-email

# -----------------------------------------------------------------------------
# AWS Route53 (ACME_DNS_PROVIDER=route53)
# -----------------------------------------------------------------------------
# IAM user credentials with Route53 permissions
# AWS_ACCESS_KEY_ID=AKIAIOSFODNN7EXAMPLE
# AWS_SECRET_ACCESS_KEY=wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY

# Hosted Zone ID for your domain
# AWS_HOSTED_ZONE_ID=Z1234567890ABC

# AWS region (default: us-east-1)
# AWS_REGION=us-east-1

# =============================================================================
# ModSecurity/WAF Configuration (docker-compose.traefik.yml only)
# =============================================================================

# ModSecurity provides OWASP Core Rule Set protection for the API
#
# Paranoia Level (1-4):
#   1 = Low false positives, basic protection (recommended for most sites)
#   2 = Moderate protection, some false positives
#   3 = High security, more false positives
#   4 = Maximum security, expect false positives (requires tuning)
# MODSEC_PARANOIA_LEVEL=1

# Anomaly scoring thresholds
# Lower values = stricter (more blocking)
# MODSEC_ANOMALY_INBOUND=5
# MODSEC_ANOMALY_OUTBOUND=4

# Enable/disable ModSecurity (default: enabled)
# MODSEC_ENABLED=true

# =============================================================================
# Development/Testing
# =============================================================================

# Host binding for API server (default: 0.0.0.0)
# HOST=0.0.0.0

# API port (internal, default: 3000)
# PORT=3000

# Application base URL (alternative to PUBLIC_BASE_URL)
# APP_BASE_URL=http://localhost:3000
