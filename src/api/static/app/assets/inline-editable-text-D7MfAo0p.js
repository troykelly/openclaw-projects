import{c as E,a as h}from"./button-CCiohzVt.js";import{r as e,j as p}from"./index-B0jGvhPy.js";import{I as w}from"./input-xGgLMeeZ.js";import{T as R}from"./textarea-BizFXLE9.js";const L=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],P=E("circle-check",L);const V=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],$=E("circle",V);function q({value:t,onSave:m,validate:u,saveOnBlur:y=!0,selectOnFocus:k=!0,placeholder:b,className:I,editClassName:D,disabled:d=!1,multiline:i=!1,doubleClick:x=!1}){const[s,o]=e.useState(!1),[a,l]=e.useState(t),[j,C]=e.useState(!1),r=e.useRef(null);e.useEffect(()=>{s||l(t)},[t,s]);const f=e.useCallback(()=>{d||(l(t),o(!0))},[t,d]),S=e.useCallback(()=>{x||f()},[x,f]),K=e.useCallback(()=>{f()},[f]),c=e.useCallback(async()=>{if(a===t){o(!1);return}if(!(u&&!u(a))){C(!0);try{await m(a),o(!1)}catch{}finally{C(!1)}}},[a,t,u,m]),g=e.useCallback(()=>{l(t),o(!1)},[t]),N=e.useCallback(n=>{n.key==="Enter"&&!i||n.key==="Enter"&&i&&(n.metaKey||n.ctrlKey)?(n.preventDefault(),c()):n.key==="Escape"&&(n.preventDefault(),g())},[c,g,i]),T=e.useCallback(()=>{y&&c()},[y,c]);if(e.useEffect(()=>{s&&r.current&&(r.current.focus(),k&&r.current instanceof HTMLInputElement&&r.current.select())},[s,k]),s){const n={value:a,onChange:_=>l(_.target.value),onKeyDown:N,onBlur:T,disabled:j,className:h("ring-2 ring-primary",D)};return i?p.jsx(R,{ref:r,...n,"data-testid":"inline-edit-textarea"}):p.jsx(w,{ref:r,...n,"data-testid":"inline-edit-input"})}return p.jsx("span",{onClick:S,onDoubleClick:K,className:h("cursor-text rounded px-1 -mx-1 hover:bg-muted/50 transition-colors",d&&"cursor-default hover:bg-transparent",!t&&"text-muted-foreground italic",I),"data-testid":"inline-edit-display",children:t||b||"Â "})}export{P as C,q as I,$ as a};
//# sourceMappingURL=inline-editable-text-D7MfAo0p.js.map
