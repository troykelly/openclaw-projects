{"version":3,"file":"WorkItemDetailPage-yF4nEz8V.js","sources":["../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/arrow-right.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/bold.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/code.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/italic.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/list-ordered.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/map-pin.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/paperclip.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/pen-line.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/pen.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/square-check-big.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/unlink.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/video.js","../../../../ui/hooks/queries/use-communications.ts","../../../../ui/hooks/mutations/use-create-memory.ts","../../../../ui/hooks/mutations/use-update-memory.ts","../../../../ui/components/detail/item-header.tsx","../../../../ui/components/detail/metadata-grid.tsx","../../../../ui/components/detail/description-editor.tsx","../../../../../node_modules/.pnpm/@radix-ui+react-checkbox@1.3.3_@types+react-dom@19.2.3_@types+react@19.2.10__@types+rea_5132bbb1edf049509ad81076406f08e7/node_modules/@radix-ui/react-checkbox/dist/index.mjs","../../../../ui/components/ui/checkbox.tsx","../../../../ui/components/detail/todo-list.tsx","../../../../ui/components/detail/dependencies-section.tsx","../../../../ui/components/memory/memory-card.tsx","../../../../ui/components/memory/item-memories.tsx","../../../../ui/components/memory/memory-editor.tsx","../../../../ui/components/communications/email-card.tsx","../../../../ui/components/communications/calendar-event-card.tsx","../../../../ui/components/communications/item-communications.tsx","../../../../ui/pages/WorkItemDetailPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"m12 5 7 7-7 7\", key: \"xquz4c\" }]\n];\nconst ArrowRight = createLucideIcon(\"arrow-right\", __iconNode);\n\nexport { __iconNode, ArrowRight as default };\n//# sourceMappingURL=arrow-right.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8\", key: \"mg9rjx\" }\n  ]\n];\nconst Bold = createLucideIcon(\"bold\", __iconNode);\n\nexport { __iconNode, Bold as default };\n//# sourceMappingURL=bold.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m16 18 6-6-6-6\", key: \"eg8j8\" }],\n  [\"path\", { d: \"m8 6-6 6 6 6\", key: \"ppft3o\" }]\n];\nconst Code = createLucideIcon(\"code\", __iconNode);\n\nexport { __iconNode, Code as default };\n//# sourceMappingURL=code.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"19\", x2: \"10\", y1: \"4\", y2: \"4\", key: \"15jd3p\" }],\n  [\"line\", { x1: \"14\", x2: \"5\", y1: \"20\", y2: \"20\", key: \"bu0au3\" }],\n  [\"line\", { x1: \"15\", x2: \"9\", y1: \"4\", y2: \"20\", key: \"uljnxc\" }]\n];\nconst Italic = createLucideIcon(\"italic\", __iconNode);\n\nexport { __iconNode, Italic as default };\n//# sourceMappingURL=italic.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M11 5h10\", key: \"1cz7ny\" }],\n  [\"path\", { d: \"M11 12h10\", key: \"1438ji\" }],\n  [\"path\", { d: \"M11 19h10\", key: \"11t30w\" }],\n  [\"path\", { d: \"M4 4h1v5\", key: \"10yrso\" }],\n  [\"path\", { d: \"M4 9h2\", key: \"r1h2o0\" }],\n  [\"path\", { d: \"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02\", key: \"xtkcd5\" }]\n];\nconst ListOrdered = createLucideIcon(\"list-ordered\", __iconNode);\n\nexport { __iconNode, ListOrdered as default };\n//# sourceMappingURL=list-ordered.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\",\n      key: \"1r0f0z\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n];\nconst MapPin = createLucideIcon(\"map-pin\", __iconNode);\n\nexport { __iconNode, MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551\",\n      key: \"1miecu\"\n    }\n  ]\n];\nconst Paperclip = createLucideIcon(\"paperclip\", __iconNode);\n\nexport { __iconNode, Paperclip as default };\n//# sourceMappingURL=paperclip.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M13 21h8\", key: \"1jsn5i\" }],\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst PenLine = createLucideIcon(\"pen-line\", __iconNode);\n\nexport { __iconNode, PenLine as default };\n//# sourceMappingURL=pen-line.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst Pen = createLucideIcon(\"pen\", __iconNode);\n\nexport { __iconNode, Pen as default };\n//# sourceMappingURL=pen.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344\", key: \"2acyp4\" }\n  ],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n];\nconst SquareCheckBig = createLucideIcon(\"square-check-big\", __iconNode);\n\nexport { __iconNode, SquareCheckBig as default };\n//# sourceMappingURL=square-check-big.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71\",\n      key: \"yqzxt4\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71\",\n      key: \"4qinb0\"\n    }\n  ],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"5\", key: \"1041cp\" }],\n  [\"line\", { x1: \"2\", x2: \"5\", y1: \"8\", y2: \"8\", key: \"14m1p5\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"19\", y2: \"22\", key: \"rzdirn\" }],\n  [\"line\", { x1: \"19\", x2: \"22\", y1: \"16\", y2: \"16\", key: \"ox905f\" }]\n];\nconst Unlink = createLucideIcon(\"unlink\", __iconNode);\n\nexport { __iconNode, Unlink as default };\n//# sourceMappingURL=unlink.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5\",\n      key: \"ftymec\"\n    }\n  ],\n  [\"rect\", { x: \"2\", y: \"6\", width: \"14\", height: \"12\", rx: \"2\", key: \"158x01\" }]\n];\nconst Video = createLucideIcon(\"video\", __iconNode);\n\nexport { __iconNode, Video as default };\n//# sourceMappingURL=video.js.map\n","/**\n * TanStack Query hook for work item communications.\n *\n * Fetches linked emails and calendar events for a specific work item.\n */\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { CommunicationsResponse } from '@/ui/lib/api-types.ts';\n\n/** Query key factory for communications. */\nexport const communicationsKeys = {\n  all: ['communications'] as const,\n  forWorkItem: (workItemId: string) =>\n    [...communicationsKeys.all, 'work-item', workItemId] as const,\n};\n\n/**\n * Fetch communications linked to a work item.\n *\n * @param workItemId - The work item UUID\n * @returns TanStack Query result with `CommunicationsResponse`\n */\nexport function useWorkItemCommunications(workItemId: string) {\n  return useQuery({\n    queryKey: communicationsKeys.forWorkItem(workItemId),\n    queryFn: ({ signal }) =>\n      apiClient.get<CommunicationsResponse>(\n        `/api/work-items/${workItemId}/communications`,\n        { signal },\n      ),\n    enabled: !!workItemId,\n  });\n}\n","/**\n * TanStack Query mutation hook for creating memories.\n *\n * Creates a memory attached to a specific work item and invalidates\n * the related memory queries.\n */\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { CreateMemoryBody, Memory } from '@/ui/lib/api-types.ts';\nimport { memoryKeys } from '@/ui/hooks/queries/use-memories.ts';\n\n/** Variables for the create memory mutation. */\nexport interface CreateMemoryVariables {\n  /** The work item ID to attach the memory to. */\n  workItemId: string;\n  /** Memory data. */\n  body: CreateMemoryBody;\n}\n\n/**\n * Create a new memory attached to a work item.\n *\n * @returns TanStack mutation\n *\n * @example\n * ```ts\n * const { mutate } = useCreateMemory();\n * mutate({ workItemId: 'abc', body: { title: 'Note', content: 'Details' } });\n * ```\n */\nexport function useCreateMemory() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ workItemId, body }: CreateMemoryVariables) =>\n      apiClient.post<Memory>(`/api/work-items/${workItemId}/memories`, body),\n\n    onSuccess: (_data, { workItemId }) => {\n      // Invalidate the work item's memories list and global memories\n      queryClient.invalidateQueries({ queryKey: memoryKeys.forWorkItem(workItemId) });\n      queryClient.invalidateQueries({ queryKey: memoryKeys.lists() });\n    },\n  });\n}\n","/**\n * TanStack Query mutation hook for updating memories.\n *\n * Updates a memory by ID and invalidates related queries.\n */\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { UpdateMemoryBody, Memory } from '@/ui/lib/api-types.ts';\nimport { memoryKeys } from '@/ui/hooks/queries/use-memories.ts';\n\n/** Variables for the update memory mutation. */\nexport interface UpdateMemoryVariables {\n  /** The memory ID to update. */\n  id: string;\n  /** Partial update body. */\n  body: UpdateMemoryBody;\n  /** Optional work item ID for targeted cache invalidation. */\n  workItemId?: string;\n}\n\n/**\n * Update an existing memory.\n *\n * @returns TanStack mutation\n *\n * @example\n * ```ts\n * const { mutate } = useUpdateMemory();\n * mutate({ id: 'mem-1', body: { title: 'Updated' }, workItemId: 'wi-1' });\n * ```\n */\nexport function useUpdateMemory() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ id, body }: UpdateMemoryVariables) =>\n      apiClient.patch<Memory>(`/api/memories/${id}`, body),\n\n    onSuccess: (_data, { workItemId }) => {\n      // Invalidate global memories list\n      queryClient.invalidateQueries({ queryKey: memoryKeys.lists() });\n      // If we know the work item, invalidate its specific memory list\n      if (workItemId) {\n        queryClient.invalidateQueries({ queryKey: memoryKeys.forWorkItem(workItemId) });\n      }\n    },\n  });\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport {\n  Folder,\n  Target,\n  Layers,\n  FileText,\n  ChevronRight,\n  Pencil,\n  Check,\n  X,\n  Trash2,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport type { WorkItemKind, WorkItemStatus } from './types';\n\nfunction getKindIcon(kind: WorkItemKind) {\n  switch (kind) {\n    case 'project':\n      return <Folder className=\"size-5\" />;\n    case 'initiative':\n      return <Target className=\"size-5\" />;\n    case 'epic':\n      return <Layers className=\"size-5\" />;\n    case 'issue':\n      return <FileText className=\"size-5\" />;\n  }\n}\n\nfunction getKindLabel(kind: WorkItemKind): string {\n  return kind.charAt(0).toUpperCase() + kind.slice(1);\n}\n\nfunction getStatusVariant(status: WorkItemStatus): 'default' | 'secondary' | 'destructive' | 'outline' {\n  switch (status) {\n    case 'in_progress':\n      return 'default';\n    case 'done':\n      return 'secondary';\n    case 'blocked':\n      return 'destructive';\n    default:\n      return 'outline';\n  }\n}\n\nfunction getStatusLabel(status: WorkItemStatus): string {\n  return status.replace('_', ' ').replace(/\\b\\w/g, c => c.toUpperCase());\n}\n\nexport interface ItemHeaderProps {\n  title: string;\n  kind: WorkItemKind;\n  status: WorkItemStatus;\n  parentTitle?: string;\n  onTitleChange?: (title: string) => void;\n  onParentClick?: () => void;\n  onDelete?: () => void;\n  className?: string;\n}\n\nexport function ItemHeader({\n  title,\n  kind,\n  status,\n  parentTitle,\n  onTitleChange,\n  onParentClick,\n  onDelete,\n  className,\n}: ItemHeaderProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(title);\n\n  const handleStartEdit = () => {\n    setEditValue(title);\n    setIsEditing(true);\n  };\n\n  const handleSave = () => {\n    if (editValue.trim() && editValue !== title) {\n      onTitleChange?.(editValue.trim());\n    }\n    setIsEditing(false);\n  };\n\n  const handleCancel = () => {\n    setEditValue(title);\n    setIsEditing(false);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleSave();\n    } else if (e.key === 'Escape') {\n      handleCancel();\n    }\n  };\n\n  return (\n    <div className={cn('space-y-2', className)}>\n      {/* Breadcrumb */}\n      {parentTitle && (\n        <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n          <button\n            className=\"hover:text-foreground hover:underline\"\n            onClick={onParentClick}\n          >\n            {parentTitle}\n          </button>\n          <ChevronRight className=\"size-4\" />\n        </div>\n      )}\n\n      {/* Title row */}\n      <div className=\"flex items-start gap-3\">\n        <span className=\"mt-1 text-muted-foreground\">{getKindIcon(kind)}</span>\n\n        <div className=\"min-w-0 flex-1 space-y-2\">\n          {isEditing ? (\n            <div className=\"flex items-center gap-2\">\n              <Input\n                value={editValue}\n                onChange={(e) => setEditValue(e.target.value)}\n                onKeyDown={handleKeyDown}\n                autoFocus\n                className=\"text-xl font-semibold\"\n              />\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleSave}>\n                <Check className=\"size-4\" />\n                <span className=\"sr-only\">Save</span>\n              </Button>\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleCancel}>\n                <X className=\"size-4\" />\n                <span className=\"sr-only\">Cancel</span>\n              </Button>\n            </div>\n          ) : (\n            <div className=\"group flex items-start gap-2\">\n              <h1 className=\"text-xl font-semibold\">{title}</h1>\n              {onTitleChange && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"mt-0.5 size-6 opacity-0 group-hover:opacity-100\"\n                  onClick={handleStartEdit}\n                >\n                  <Pencil className=\"size-3\" />\n                  <span className=\"sr-only\">Edit title</span>\n                </Button>\n              )}\n              {onDelete && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"mt-0.5 size-6 opacity-0 text-destructive hover:text-destructive group-hover:opacity-100\"\n                  onClick={onDelete}\n                >\n                  <Trash2 className=\"size-3\" />\n                  <span className=\"sr-only\">Delete</span>\n                </Button>\n              )}\n            </div>\n          )}\n\n          {/* Badges */}\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <Badge variant=\"outline\">{getKindLabel(kind)}</Badge>\n            <Badge variant={getStatusVariant(status)}>{getStatusLabel(status)}</Badge>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport {\n  Calendar,\n  Clock,\n  User,\n  AlertCircle,\n  Pencil,\n  Check,\n  X,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/ui/components/ui/select';\nimport type { WorkItemStatus, WorkItemPriority } from './types';\n\nfunction formatDate(date: Date | undefined): string {\n  if (!date) return 'Not set';\n  return date.toLocaleDateString(undefined, {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\nfunction formatMinutes(minutes: number | undefined): string {\n  if (!minutes) return 'Not set';\n  if (minutes < 60) return `${minutes}m`;\n  const hours = Math.floor(minutes / 60);\n  const mins = minutes % 60;\n  return mins > 0 ? `${hours}h ${mins}m` : `${hours}h`;\n}\n\ninterface MetadataFieldProps {\n  icon: React.ReactNode;\n  label: string;\n  value: string;\n  editable?: boolean;\n  onEdit?: (value: string) => void;\n  editType?: 'text' | 'select' | 'date' | 'number';\n  options?: Array<{ value: string; label: string }>;\n}\n\nfunction MetadataField({\n  icon,\n  label,\n  value,\n  editable,\n  onEdit,\n  editType = 'text',\n  options,\n}: MetadataFieldProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(value);\n\n  const handleSave = () => {\n    onEdit?.(editValue);\n    setIsEditing(false);\n  };\n\n  const handleCancel = () => {\n    setEditValue(value);\n    setIsEditing(false);\n  };\n\n  return (\n    <div className=\"flex items-start gap-3 rounded-md p-2 hover:bg-muted/50\">\n      <span className=\"mt-0.5 text-muted-foreground\">{icon}</span>\n      <div className=\"min-w-0 flex-1\">\n        <p className=\"text-xs font-medium text-muted-foreground\">{label}</p>\n        {isEditing ? (\n          <div className=\"mt-1 flex items-center gap-1\">\n            {editType === 'select' && options ? (\n              <Select value={editValue} onValueChange={setEditValue}>\n                <SelectTrigger className=\"h-8 text-sm\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {options.map((opt) => (\n                    <SelectItem key={opt.value} value={opt.value}>\n                      {opt.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            ) : editType === 'date' ? (\n              <Input\n                type=\"date\"\n                value={editValue}\n                onChange={(e) => setEditValue(e.target.value)}\n                className=\"h-8 text-sm\"\n              />\n            ) : (\n              <Input\n                type={editType === 'number' ? 'number' : 'text'}\n                value={editValue}\n                onChange={(e) => setEditValue(e.target.value)}\n                className=\"h-8 text-sm\"\n              />\n            )}\n            <Button variant=\"ghost\" size=\"icon\" className=\"size-6\" onClick={handleSave}>\n              <Check className=\"size-3\" />\n            </Button>\n            <Button variant=\"ghost\" size=\"icon\" className=\"size-6\" onClick={handleCancel}>\n              <X className=\"size-3\" />\n            </Button>\n          </div>\n        ) : (\n          <div className=\"group flex items-center gap-1\">\n            <p className=\"text-sm\">{value}</p>\n            {editable && onEdit && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"size-5 opacity-0 group-hover:opacity-100\"\n                onClick={() => setIsEditing(true)}\n              >\n                <Pencil className=\"size-3\" />\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nconst STATUS_OPTIONS: Array<{ value: WorkItemStatus; label: string }> = [\n  { value: 'not_started', label: 'Not Started' },\n  { value: 'in_progress', label: 'In Progress' },\n  { value: 'blocked', label: 'Blocked' },\n  { value: 'done', label: 'Done' },\n  { value: 'cancelled', label: 'Cancelled' },\n];\n\nconst PRIORITY_OPTIONS: Array<{ value: WorkItemPriority; label: string }> = [\n  { value: 'urgent', label: 'Urgent' },\n  { value: 'high', label: 'High' },\n  { value: 'medium', label: 'Medium' },\n  { value: 'low', label: 'Low' },\n];\n\nexport interface MetadataGridProps {\n  status: WorkItemStatus;\n  priority: WorkItemPriority;\n  assignee?: string;\n  dueDate?: Date;\n  startDate?: Date;\n  estimateMinutes?: number;\n  actualMinutes?: number;\n  onStatusChange?: (status: WorkItemStatus) => void;\n  onPriorityChange?: (priority: WorkItemPriority) => void;\n  onAssigneeChange?: (assignee: string) => void;\n  onDueDateChange?: (date: string) => void;\n  onStartDateChange?: (date: string) => void;\n  onEstimateChange?: (minutes: string) => void;\n  onActualChange?: (minutes: string) => void;\n  className?: string;\n}\n\nexport function MetadataGrid({\n  status,\n  priority,\n  assignee,\n  dueDate,\n  startDate,\n  estimateMinutes,\n  actualMinutes,\n  onStatusChange,\n  onPriorityChange,\n  onAssigneeChange,\n  onDueDateChange,\n  onStartDateChange,\n  onEstimateChange,\n  onActualChange,\n  className,\n}: MetadataGridProps) {\n  const getPriorityLabel = (p: WorkItemPriority) =>\n    PRIORITY_OPTIONS.find(o => o.value === p)?.label ?? p;\n  const getStatusLabel = (s: WorkItemStatus) =>\n    STATUS_OPTIONS.find(o => o.value === s)?.label ?? s;\n\n  return (\n    <div className={cn('grid gap-1 sm:grid-cols-2', className)}>\n      <MetadataField\n        icon={<AlertCircle className=\"size-4\" />}\n        label=\"Status\"\n        value={getStatusLabel(status)}\n        editable={!!onStatusChange}\n        onEdit={(v) => onStatusChange?.(v as WorkItemStatus)}\n        editType=\"select\"\n        options={STATUS_OPTIONS}\n      />\n      <MetadataField\n        icon={<AlertCircle className=\"size-4\" />}\n        label=\"Priority\"\n        value={getPriorityLabel(priority)}\n        editable={!!onPriorityChange}\n        onEdit={(v) => onPriorityChange?.(v as WorkItemPriority)}\n        editType=\"select\"\n        options={PRIORITY_OPTIONS}\n      />\n      <MetadataField\n        icon={<User className=\"size-4\" />}\n        label=\"Assignee\"\n        value={assignee || 'Unassigned'}\n        editable={!!onAssigneeChange}\n        onEdit={onAssigneeChange}\n      />\n      <MetadataField\n        icon={<Calendar className=\"size-4\" />}\n        label=\"Due Date\"\n        value={formatDate(dueDate)}\n        editable={!!onDueDateChange}\n        onEdit={onDueDateChange}\n        editType=\"date\"\n      />\n      <MetadataField\n        icon={<Calendar className=\"size-4\" />}\n        label=\"Start Date\"\n        value={formatDate(startDate)}\n        editable={!!onStartDateChange}\n        onEdit={onStartDateChange}\n        editType=\"date\"\n      />\n      <MetadataField\n        icon={<Clock className=\"size-4\" />}\n        label=\"Estimate\"\n        value={formatMinutes(estimateMinutes)}\n        editable={!!onEstimateChange}\n        onEdit={onEstimateChange}\n        editType=\"number\"\n      />\n      <MetadataField\n        icon={<Clock className=\"size-4\" />}\n        label=\"Actual\"\n        value={formatMinutes(actualMinutes)}\n        editable={!!onActualChange}\n        onEdit={onActualChange}\n        editType=\"number\"\n      />\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Pencil, Check, X, Eye, Edit2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Textarea } from '@/ui/components/ui/textarea';\n\nexport interface DescriptionEditorProps {\n  description?: string;\n  onDescriptionChange?: (description: string) => void;\n  className?: string;\n}\n\nexport function DescriptionEditor({\n  description,\n  onDescriptionChange,\n  className,\n}: DescriptionEditorProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(description || '');\n  const [showPreview, setShowPreview] = useState(false);\n\n  const handleStartEdit = () => {\n    setEditValue(description || '');\n    setIsEditing(true);\n    setShowPreview(false);\n  };\n\n  const handleSave = () => {\n    onDescriptionChange?.(editValue);\n    setIsEditing(false);\n  };\n\n  const handleCancel = () => {\n    setEditValue(description || '');\n    setIsEditing(false);\n    setShowPreview(false);\n  };\n\n  // Simple markdown to React elements (safe - no dangerouslySetInnerHTML)\n  const renderMarkdown = (text: string): React.ReactNode => {\n    if (!text) return null;\n\n    const lines = text.split('\\n');\n    return lines.map((line, i) => {\n      // Headers\n      if (line.startsWith('### ')) {\n        return <h4 key={i} className=\"mt-4 mb-2 text-sm font-semibold\">{line.slice(4)}</h4>;\n      }\n      if (line.startsWith('## ')) {\n        return <h3 key={i} className=\"mt-4 mb-2 font-semibold\">{line.slice(3)}</h3>;\n      }\n      if (line.startsWith('# ')) {\n        return <h2 key={i} className=\"mt-4 mb-2 text-lg font-semibold\">{line.slice(2)}</h2>;\n      }\n      // Lists\n      if (line.startsWith('- ') || line.startsWith('* ')) {\n        return <li key={i} className=\"ml-4\">{line.slice(2)}</li>;\n      }\n      // Empty line\n      if (!line.trim()) {\n        return <br key={i} />;\n      }\n\n      // Parse inline formatting into React elements\n      const parseInline = (text: string): React.ReactNode[] => {\n        const result: React.ReactNode[] = [];\n        let remaining = text;\n        let keyIndex = 0;\n\n        while (remaining.length > 0) {\n          // Check for code\n          const codeMatch = remaining.match(/^`([^`]+)`/);\n          if (codeMatch) {\n            result.push(\n              <code key={keyIndex++} className=\"rounded bg-muted px-1 text-sm\">\n                {codeMatch[1]}\n              </code>\n            );\n            remaining = remaining.slice(codeMatch[0].length);\n            continue;\n          }\n\n          // Check for bold\n          const boldMatch = remaining.match(/^\\*\\*([^*]+)\\*\\*/);\n          if (boldMatch) {\n            result.push(<strong key={keyIndex++}>{boldMatch[1]}</strong>);\n            remaining = remaining.slice(boldMatch[0].length);\n            continue;\n          }\n\n          // Check for italic\n          const italicMatch = remaining.match(/^\\*([^*]+)\\*/);\n          if (italicMatch) {\n            result.push(<em key={keyIndex++}>{italicMatch[1]}</em>);\n            remaining = remaining.slice(italicMatch[0].length);\n            continue;\n          }\n\n          // Take next character as plain text\n          const nextSpecial = remaining.search(/[`*]/);\n          if (nextSpecial === -1) {\n            result.push(remaining);\n            break;\n          } else if (nextSpecial === 0) {\n            // Special char but didn't match pattern, take as literal\n            result.push(remaining[0]);\n            remaining = remaining.slice(1);\n          } else {\n            result.push(remaining.slice(0, nextSpecial));\n            remaining = remaining.slice(nextSpecial);\n          }\n        }\n\n        return result;\n      };\n\n      return (\n        <p key={i} className=\"my-1\">\n          {parseInline(line)}\n        </p>\n      );\n    });\n  };\n\n  return (\n    <div className={cn('space-y-3', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-sm font-medium\">Description</h3>\n        {!isEditing && onDescriptionChange && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-7 gap-1\"\n            onClick={handleStartEdit}\n          >\n            <Pencil className=\"size-3\" />\n            Edit\n          </Button>\n        )}\n        {isEditing && (\n          <div className=\"flex items-center gap-1\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className={cn('h-7 gap-1', !showPreview && 'bg-muted')}\n              onClick={() => setShowPreview(false)}\n            >\n              <Edit2 className=\"size-3\" />\n              Edit\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className={cn('h-7 gap-1', showPreview && 'bg-muted')}\n              onClick={() => setShowPreview(true)}\n            >\n              <Eye className=\"size-3\" />\n              Preview\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {/* Content */}\n      {isEditing ? (\n        <div className=\"space-y-3\">\n          {showPreview ? (\n            <div className=\"min-h-32 rounded-md border bg-muted/30 p-3 text-sm\">\n              {editValue ? (\n                renderMarkdown(editValue)\n              ) : (\n                <p className=\"text-muted-foreground\">Nothing to preview</p>\n              )}\n            </div>\n          ) : (\n            <Textarea\n              value={editValue}\n              onChange={(e) => setEditValue(e.target.value)}\n              placeholder=\"Add a description... (Markdown supported)\"\n              className=\"min-h-32 font-mono text-sm\"\n            />\n          )}\n          <div className=\"flex justify-end gap-2\">\n            <Button variant=\"ghost\" size=\"sm\" onClick={handleCancel}>\n              <X className=\"mr-1 size-3\" />\n              Cancel\n            </Button>\n            <Button size=\"sm\" onClick={handleSave}>\n              <Check className=\"mr-1 size-3\" />\n              Save\n            </Button>\n          </div>\n        </div>\n      ) : description ? (\n        <div className=\"prose prose-sm max-w-none rounded-md bg-muted/30 p-3\">\n          {renderMarkdown(description)}\n        </div>\n      ) : (\n        <p className=\"py-4 text-center text-sm text-muted-foreground\">\n          No description\n        </p>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\n// src/checkbox.tsx\nimport * as React from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar CHECKBOX_NAME = \"Checkbox\";\nvar [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);\nvar [CheckboxProviderImpl, useCheckboxContext] = createCheckboxContext(CHECKBOX_NAME);\nfunction CheckboxProvider(props) {\n  const {\n    __scopeCheckbox,\n    checked: checkedProp,\n    children,\n    defaultChecked,\n    disabled,\n    form,\n    name,\n    onCheckedChange,\n    required,\n    value = \"on\",\n    // @ts-expect-error\n    internal_do_not_use_render\n  } = props;\n  const [checked, setChecked] = useControllableState({\n    prop: checkedProp,\n    defaultProp: defaultChecked ?? false,\n    onChange: onCheckedChange,\n    caller: CHECKBOX_NAME\n  });\n  const [control, setControl] = React.useState(null);\n  const [bubbleInput, setBubbleInput] = React.useState(null);\n  const hasConsumerStoppedPropagationRef = React.useRef(false);\n  const isFormControl = control ? !!form || !!control.closest(\"form\") : (\n    // We set this to true by default so that events bubble to forms without JS (SSR)\n    true\n  );\n  const context = {\n    checked,\n    disabled,\n    setChecked,\n    control,\n    setControl,\n    name,\n    form,\n    value,\n    hasConsumerStoppedPropagationRef,\n    required,\n    defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked,\n    isFormControl,\n    bubbleInput,\n    setBubbleInput\n  };\n  return /* @__PURE__ */ jsx(\n    CheckboxProviderImpl,\n    {\n      scope: __scopeCheckbox,\n      ...context,\n      children: isFunction(internal_do_not_use_render) ? internal_do_not_use_render(context) : children\n    }\n  );\n}\nvar TRIGGER_NAME = \"CheckboxTrigger\";\nvar CheckboxTrigger = React.forwardRef(\n  ({ __scopeCheckbox, onKeyDown, onClick, ...checkboxProps }, forwardedRef) => {\n    const {\n      control,\n      value,\n      disabled,\n      checked,\n      required,\n      setControl,\n      setChecked,\n      hasConsumerStoppedPropagationRef,\n      isFormControl,\n      bubbleInput\n    } = useCheckboxContext(TRIGGER_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setControl);\n    const initialCheckedStateRef = React.useRef(checked);\n    React.useEffect(() => {\n      const form = control?.form;\n      if (form) {\n        const reset = () => setChecked(initialCheckedStateRef.current);\n        form.addEventListener(\"reset\", reset);\n        return () => form.removeEventListener(\"reset\", reset);\n      }\n    }, [control, setChecked]);\n    return /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        role: \"checkbox\",\n        \"aria-checked\": isIndeterminate(checked) ? \"mixed\" : checked,\n        \"aria-required\": required,\n        \"data-state\": getState(checked),\n        \"data-disabled\": disabled ? \"\" : void 0,\n        disabled,\n        value,\n        ...checkboxProps,\n        ref: composedRefs,\n        onKeyDown: composeEventHandlers(onKeyDown, (event) => {\n          if (event.key === \"Enter\") event.preventDefault();\n        }),\n        onClick: composeEventHandlers(onClick, (event) => {\n          setChecked((prevChecked) => isIndeterminate(prevChecked) ? true : !prevChecked);\n          if (bubbleInput && isFormControl) {\n            hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n            if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n          }\n        })\n      }\n    );\n  }\n);\nCheckboxTrigger.displayName = TRIGGER_NAME;\nvar Checkbox = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeCheckbox,\n      name,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      value,\n      onCheckedChange,\n      form,\n      ...checkboxProps\n    } = props;\n    return /* @__PURE__ */ jsx(\n      CheckboxProvider,\n      {\n        __scopeCheckbox,\n        checked,\n        defaultChecked,\n        disabled,\n        required,\n        onCheckedChange,\n        name,\n        form,\n        value,\n        internal_do_not_use_render: ({ isFormControl }) => /* @__PURE__ */ jsxs(Fragment, { children: [\n          /* @__PURE__ */ jsx(\n            CheckboxTrigger,\n            {\n              ...checkboxProps,\n              ref: forwardedRef,\n              __scopeCheckbox\n            }\n          ),\n          isFormControl && /* @__PURE__ */ jsx(\n            CheckboxBubbleInput,\n            {\n              __scopeCheckbox\n            }\n          )\n        ] })\n      }\n    );\n  }\n);\nCheckbox.displayName = CHECKBOX_NAME;\nvar INDICATOR_NAME = \"CheckboxIndicator\";\nvar CheckboxIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;\n    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);\n    return /* @__PURE__ */ jsx(\n      Presence,\n      {\n        present: forceMount || isIndeterminate(context.checked) || context.checked === true,\n        children: /* @__PURE__ */ jsx(\n          Primitive.span,\n          {\n            \"data-state\": getState(context.checked),\n            \"data-disabled\": context.disabled ? \"\" : void 0,\n            ...indicatorProps,\n            ref: forwardedRef,\n            style: { pointerEvents: \"none\", ...props.style }\n          }\n        )\n      }\n    );\n  }\n);\nCheckboxIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"CheckboxBubbleInput\";\nvar CheckboxBubbleInput = React.forwardRef(\n  ({ __scopeCheckbox, ...props }, forwardedRef) => {\n    const {\n      control,\n      hasConsumerStoppedPropagationRef,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      name,\n      value,\n      form,\n      bubbleInput,\n      setBubbleInput\n    } = useCheckboxContext(BUBBLE_INPUT_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setBubbleInput);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = bubbleInput;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      const bubbles = !hasConsumerStoppedPropagationRef.current;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        input.indeterminate = isIndeterminate(checked);\n        setChecked.call(input, isIndeterminate(checked) ? false : checked);\n        input.dispatchEvent(event);\n      }\n    }, [bubbleInput, prevChecked, checked, hasConsumerStoppedPropagationRef]);\n    const defaultCheckedRef = React.useRef(isIndeterminate(checked) ? false : checked);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"checkbox\",\n        \"aria-hidden\": true,\n        defaultChecked: defaultChecked ?? defaultCheckedRef.current,\n        required,\n        disabled,\n        name,\n        value,\n        form,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0,\n          // We transform because the input is absolutely positioned but we have\n          // rendered it **after** the button. This pulls it back to sit on top\n          // of the button.\n          transform: \"translateX(-100%)\"\n        }\n      }\n    );\n  }\n);\nCheckboxBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\nfunction isIndeterminate(checked) {\n  return checked === \"indeterminate\";\n}\nfunction getState(checked) {\n  return isIndeterminate(checked) ? \"indeterminate\" : checked ? \"checked\" : \"unchecked\";\n}\nexport {\n  Checkbox,\n  CheckboxIndicator,\n  CheckboxIndicator as Indicator,\n  Checkbox as Root,\n  createCheckboxScope,\n  CheckboxBubbleInput as unstable_BubbleInput,\n  CheckboxBubbleInput as unstable_CheckboxBubbleInput,\n  CheckboxProvider as unstable_CheckboxProvider,\n  CheckboxTrigger as unstable_CheckboxTrigger,\n  CheckboxProvider as unstable_Provider,\n  CheckboxTrigger as unstable_Trigger\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { CheckIcon } from \"lucide-react\"\n\nimport { cn } from \"@/ui/lib/utils\"\n\nfunction Checkbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        \"peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"grid place-content-center text-current transition-none\"\n      >\n        <CheckIcon className=\"size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  )\n}\n\nexport { Checkbox }\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Plus, Trash2, GripVertical } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport { Checkbox } from '@/ui/components/ui/checkbox';\nimport type { WorkItemTodo } from './types';\n\nexport interface TodoListProps {\n  todos: WorkItemTodo[];\n  onAdd?: (text: string) => void;\n  onToggle?: (id: string, completed: boolean) => void;\n  onDelete?: (id: string) => void;\n  onReorder?: (todos: WorkItemTodo[]) => void;\n  className?: string;\n}\n\nexport function TodoList({\n  todos,\n  onAdd,\n  onToggle,\n  onDelete,\n  className,\n}: TodoListProps) {\n  const [newTodoText, setNewTodoText] = useState('');\n\n  const handleAdd = () => {\n    if (newTodoText.trim() && onAdd) {\n      onAdd(newTodoText.trim());\n      setNewTodoText('');\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleAdd();\n    }\n  };\n\n  const completedCount = todos.filter((t) => t.completed).length;\n\n  return (\n    <div className={cn('space-y-3', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-sm font-medium\">Checklist</h3>\n        {todos.length > 0 && (\n          <span className=\"text-xs text-muted-foreground\">\n            {completedCount}/{todos.length} completed\n          </span>\n        )}\n      </div>\n\n      {/* Progress bar */}\n      {todos.length > 0 && (\n        <div className=\"h-1.5 overflow-hidden rounded-full bg-muted\">\n          <div\n            className=\"h-full bg-primary transition-all\"\n            style={{ width: `${(completedCount / todos.length) * 100}%` }}\n          />\n        </div>\n      )}\n\n      {/* Todo items */}\n      <div className=\"space-y-1\">\n        {todos.map((todo) => (\n          <div\n            key={todo.id}\n            data-testid=\"todo-item\"\n            className={cn(\n              'group flex items-center gap-2 rounded-md px-2 py-1.5',\n              'hover:bg-muted/50'\n            )}\n          >\n            <GripVertical className=\"size-4 cursor-grab text-muted-foreground opacity-0 group-hover:opacity-100\" />\n            <Checkbox\n              checked={todo.completed}\n              onCheckedChange={(checked) => onToggle?.(todo.id, checked === true)}\n              aria-label={`Mark \"${todo.text}\" as ${todo.completed ? 'incomplete' : 'complete'}`}\n            />\n            <span\n              className={cn(\n                'flex-1 text-sm',\n                todo.completed && 'text-muted-foreground line-through'\n              )}\n            >\n              {todo.text}\n            </span>\n            {onDelete && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"size-6 opacity-0 group-hover:opacity-100\"\n                onClick={() => onDelete(todo.id)}\n              >\n                <Trash2 className=\"size-3\" />\n                <span className=\"sr-only\">Delete</span>\n              </Button>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Add new todo */}\n      {onAdd && (\n        <div className=\"flex items-center gap-2\">\n          <Plus className=\"size-4 text-muted-foreground\" />\n          <Input\n            value={newTodoText}\n            onChange={(e) => setNewTodoText(e.target.value)}\n            onKeyDown={handleKeyDown}\n            placeholder=\"Add a task...\"\n            className=\"h-8 flex-1\"\n          />\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleAdd}\n            disabled={!newTodoText.trim()}\n          >\n            Add\n          </Button>\n        </div>\n      )}\n\n      {/* Empty state */}\n      {todos.length === 0 && !onAdd && (\n        <p className=\"py-4 text-center text-sm text-muted-foreground\">\n          No tasks yet\n        </p>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport {\n  ArrowLeft,\n  ArrowRight,\n  Folder,\n  Target,\n  Layers,\n  FileText,\n  Plus,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Button } from '@/ui/components/ui/button';\nimport type { WorkItemDependency, WorkItemKind, WorkItemStatus } from './types';\n\nfunction getKindIcon(kind: WorkItemKind) {\n  switch (kind) {\n    case 'project':\n      return <Folder className=\"size-4\" />;\n    case 'initiative':\n      return <Target className=\"size-4\" />;\n    case 'epic':\n      return <Layers className=\"size-4\" />;\n    case 'issue':\n      return <FileText className=\"size-4\" />;\n  }\n}\n\nfunction getStatusVariant(status: WorkItemStatus): 'default' | 'secondary' | 'destructive' | 'outline' {\n  switch (status) {\n    case 'in_progress':\n      return 'default';\n    case 'done':\n      return 'secondary';\n    case 'blocked':\n      return 'destructive';\n    default:\n      return 'outline';\n  }\n}\n\nfunction getStatusLabel(status: WorkItemStatus): string {\n  return status.replace('_', ' ').replace(/\\b\\w/g, c => c.toUpperCase());\n}\n\nexport interface DependenciesSectionProps {\n  dependencies: WorkItemDependency[];\n  onDependencyClick?: (dependency: WorkItemDependency) => void;\n  onAddDependency?: (direction: 'blocks' | 'blocked_by') => void;\n  className?: string;\n}\n\nexport function DependenciesSection({\n  dependencies,\n  onDependencyClick,\n  onAddDependency,\n  className,\n}: DependenciesSectionProps) {\n  const blockedBy = dependencies.filter((d) => d.direction === 'blocked_by');\n  const blocks = dependencies.filter((d) => d.direction === 'blocks');\n\n  const renderDependency = (dep: WorkItemDependency) => (\n    <button\n      key={dep.id}\n      data-testid=\"dependency-item\"\n      className={cn(\n        'flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-left',\n        'hover:bg-muted/50',\n        onDependencyClick && 'cursor-pointer'\n      )}\n      onClick={() => onDependencyClick?.(dep)}\n    >\n      <span className=\"text-muted-foreground\">{getKindIcon(dep.kind)}</span>\n      <span className=\"min-w-0 flex-1 truncate text-sm\">{dep.title}</span>\n      <Badge variant={getStatusVariant(dep.status)} className=\"shrink-0 text-xs\">\n        {getStatusLabel(dep.status)}\n      </Badge>\n    </button>\n  );\n\n  return (\n    <div className={cn('space-y-4', className)}>\n      {/* Blocked by */}\n      <div>\n        <div className=\"mb-2 flex items-center justify-between\">\n          <h4 className=\"flex items-center gap-2 text-xs font-medium text-muted-foreground\">\n            <ArrowLeft className=\"size-4\" />\n            Blocked by ({blockedBy.length})\n          </h4>\n          {onAddDependency && (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"size-6\"\n              onClick={() => onAddDependency('blocked_by')}\n            >\n              <Plus className=\"size-3\" />\n              <span className=\"sr-only\">Add blocker</span>\n            </Button>\n          )}\n        </div>\n        {blockedBy.length > 0 ? (\n          <div className=\"space-y-1\">{blockedBy.map(renderDependency)}</div>\n        ) : (\n          <p className=\"py-2 text-center text-xs text-muted-foreground\">\n            No blockers\n          </p>\n        )}\n      </div>\n\n      {/* Blocks */}\n      <div>\n        <div className=\"mb-2 flex items-center justify-between\">\n          <h4 className=\"flex items-center gap-2 text-xs font-medium text-muted-foreground\">\n            <ArrowRight className=\"size-4\" />\n            Blocks ({blocks.length})\n          </h4>\n          {onAddDependency && (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"size-6\"\n              onClick={() => onAddDependency('blocks')}\n            >\n              <Plus className=\"size-3\" />\n              <span className=\"sr-only\">Add dependent</span>\n            </Button>\n          )}\n        </div>\n        {blocks.length > 0 ? (\n          <div className=\"space-y-1\">{blocks.map(renderDependency)}</div>\n        ) : (\n          <p className=\"py-2 text-center text-xs text-muted-foreground\">\n            No dependents\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { FileText, Folder, Target, Layers, MoreVertical, Pencil, Trash2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Button } from '@/ui/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/ui/components/ui/dropdown-menu';\nimport type { MemoryItem } from './types';\n\nfunction getLinkedItemIcon(kind: MemoryItem['linkedItemKind']) {\n  switch (kind) {\n    case 'project':\n      return <Folder className=\"size-3\" />;\n    case 'initiative':\n      return <Target className=\"size-3\" />;\n    case 'epic':\n      return <Layers className=\"size-3\" />;\n    case 'issue':\n      return <FileText className=\"size-3\" />;\n    default:\n      return null;\n  }\n}\n\nexport interface MemoryCardProps {\n  memory: MemoryItem;\n  onClick?: (memory: MemoryItem) => void;\n  onEdit?: (memory: MemoryItem) => void;\n  onDelete?: (memory: MemoryItem) => void;\n  className?: string;\n}\n\nexport function MemoryCard({\n  memory,\n  onClick,\n  onEdit,\n  onDelete,\n  className,\n}: MemoryCardProps) {\n  const preview = memory.content.slice(0, 150) + (memory.content.length > 150 ? '...' : '');\n\n  return (\n    <div\n      data-testid=\"memory-card\"\n      className={cn(\n        'group relative rounded-lg border bg-card p-4 transition-colors hover:bg-accent/50',\n        onClick && 'cursor-pointer',\n        className\n      )}\n      onClick={() => onClick?.(memory)}\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between gap-2\">\n        <h3 className=\"font-medium leading-tight\">{memory.title}</h3>\n\n        {(onEdit || onDelete) && (\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"size-6 opacity-0 group-hover:opacity-100\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <MoreVertical className=\"size-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              {onEdit && (\n                <DropdownMenuItem\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onEdit(memory);\n                  }}\n                >\n                  <Pencil className=\"mr-2 size-4\" />\n                  Edit\n                </DropdownMenuItem>\n              )}\n              {onDelete && (\n                <DropdownMenuItem\n                  className=\"text-destructive focus:text-destructive\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onDelete(memory);\n                  }}\n                >\n                  <Trash2 className=\"mr-2 size-4\" />\n                  Delete\n                </DropdownMenuItem>\n              )}\n            </DropdownMenuContent>\n          </DropdownMenu>\n        )}\n      </div>\n\n      {/* Preview */}\n      <p className=\"mt-2 text-sm text-muted-foreground line-clamp-2\">{preview}</p>\n\n      {/* Footer */}\n      <div className=\"mt-3 flex items-center justify-between text-xs text-muted-foreground\">\n        <div className=\"flex items-center gap-2\">\n          {memory.linkedItemKind && memory.linkedItemTitle && (\n            <span className=\"flex items-center gap-1\">\n              {getLinkedItemIcon(memory.linkedItemKind)}\n              <span className=\"truncate max-w-[120px]\">{memory.linkedItemTitle}</span>\n            </span>\n          )}\n        </div>\n\n        <span>{memory.updatedAt.toLocaleDateString()}</span>\n      </div>\n\n      {/* Tags */}\n      {memory.tags && memory.tags.length > 0 && (\n        <div className=\"mt-2 flex flex-wrap gap-1\">\n          {memory.tags.map((tag) => (\n            <Badge key={tag} variant=\"secondary\" className=\"text-xs\">\n              {tag}\n            </Badge>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { Plus, FileText, Link2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { MemoryCard } from './memory-card';\nimport type { MemoryItem } from './types';\n\nexport interface ItemMemoriesProps {\n  memories: MemoryItem[];\n  onMemoryClick?: (memory: MemoryItem) => void;\n  onAddMemory?: () => void;\n  onLinkMemory?: () => void;\n  onEditMemory?: (memory: MemoryItem) => void;\n  onDeleteMemory?: (memory: MemoryItem) => void;\n  className?: string;\n}\n\nexport function ItemMemories({\n  memories,\n  onMemoryClick,\n  onAddMemory,\n  onLinkMemory,\n  onEditMemory,\n  onDeleteMemory,\n  className,\n}: ItemMemoriesProps) {\n  return (\n    <div className={cn('space-y-4', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <h3 className=\"text-sm font-medium\">Memories</h3>\n          <Badge variant=\"secondary\" className=\"text-xs\">\n            {memories.length}\n          </Badge>\n        </div>\n\n        <div className=\"flex gap-1\">\n          {onLinkMemory && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onLinkMemory}>\n              <Link2 className=\"mr-1 size-3\" />\n              Link\n            </Button>\n          )}\n          {onAddMemory && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onAddMemory}>\n              <Plus className=\"mr-1 size-3\" />\n              Add\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Memory list */}\n      {memories.length > 0 ? (\n        <div className=\"grid gap-2 sm:grid-cols-2\">\n          {memories.map((memory) => (\n            <MemoryCard\n              key={memory.id}\n              memory={memory}\n              onClick={onMemoryClick}\n              onEdit={onEditMemory}\n              onDelete={onDeleteMemory}\n            />\n          ))}\n        </div>\n      ) : (\n        <div className=\"rounded-lg border border-dashed p-6 text-center\">\n          <FileText className=\"mx-auto size-8 text-muted-foreground/50\" />\n          <p className=\"mt-2 text-sm text-muted-foreground\">No memories attached</p>\n          {(onAddMemory || onLinkMemory) && (\n            <div className=\"mt-3 flex justify-center gap-2\">\n              {onAddMemory && (\n                <Button variant=\"outline\" size=\"sm\" onClick={onAddMemory}>\n                  <Plus className=\"mr-1 size-3\" />\n                  Create new\n                </Button>\n              )}\n              {onLinkMemory && (\n                <Button variant=\"outline\" size=\"sm\" onClick={onLinkMemory}>\n                  <Link2 className=\"mr-1 size-3\" />\n                  Link existing\n                </Button>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useState, useCallback } from 'react';\nimport { Bold, Italic, List, ListOrdered, Link2, Code, Eye, Edit3 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport { Textarea } from '@/ui/components/ui/textarea';\nimport { Badge } from '@/ui/components/ui/badge';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/ui/components/ui/dialog';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/ui/components/ui/tabs';\nimport type { MemoryItem, MemoryFormData } from './types';\n\nexport interface MemoryEditorProps {\n  memory?: MemoryItem;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSubmit: (data: MemoryFormData) => void;\n  className?: string;\n}\n\nexport function MemoryEditor({\n  memory,\n  open,\n  onOpenChange,\n  onSubmit,\n  className,\n}: MemoryEditorProps) {\n  const [title, setTitle] = useState(memory?.title ?? '');\n  const [content, setContent] = useState(memory?.content ?? '');\n  const [tagInput, setTagInput] = useState('');\n  const [tags, setTags] = useState<string[]>(memory?.tags ?? []);\n  const [activeTab, setActiveTab] = useState<'edit' | 'preview'>('edit');\n\n  const textareaRef = React.useRef<HTMLTextAreaElement>(null);\n\n  const insertMarkdown = useCallback((before: string, after: string = '') => {\n    const textarea = textareaRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selected = content.slice(start, end);\n\n    const newContent =\n      content.slice(0, start) +\n      before +\n      (selected || 'text') +\n      after +\n      content.slice(end);\n\n    setContent(newContent);\n\n    // Restore focus and selection\n    setTimeout(() => {\n      textarea.focus();\n      const newStart = start + before.length;\n      const newEnd = newStart + (selected || 'text').length;\n      textarea.setSelectionRange(newStart, newEnd);\n    }, 0);\n  }, [content]);\n\n  const handleAddTag = () => {\n    const tag = tagInput.trim();\n    if (tag && !tags.includes(tag)) {\n      setTags([...tags, tag]);\n      setTagInput('');\n    }\n  };\n\n  const handleRemoveTag = (tagToRemove: string) => {\n    setTags(tags.filter((t) => t !== tagToRemove));\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit({\n      title: title.trim(),\n      content: content.trim(),\n      tags: tags.length > 0 ? tags : undefined,\n    });\n  };\n\n  const isValid = title.trim() && content.trim();\n\n  // Simple markdown to HTML conversion for preview\n  const renderPreview = (text: string) => {\n    return text\n      .split('\\n')\n      .map((line, i) => {\n        // Headers\n        if (line.startsWith('### ')) {\n          return <h3 key={i} className=\"text-lg font-semibold mt-4 mb-2\">{line.slice(4)}</h3>;\n        }\n        if (line.startsWith('## ')) {\n          return <h2 key={i} className=\"text-xl font-semibold mt-4 mb-2\">{line.slice(3)}</h2>;\n        }\n        if (line.startsWith('# ')) {\n          return <h1 key={i} className=\"text-2xl font-bold mt-4 mb-2\">{line.slice(2)}</h1>;\n        }\n\n        // List items\n        if (line.startsWith('- ') || line.startsWith('* ')) {\n          return <li key={i} className=\"ml-4\">{line.slice(2)}</li>;\n        }\n\n        // Numbered list\n        if (/^\\d+\\. /.test(line)) {\n          return <li key={i} className=\"ml-4 list-decimal\">{line.replace(/^\\d+\\. /, '')}</li>;\n        }\n\n        // Empty line\n        if (!line.trim()) {\n          return <br key={i} />;\n        }\n\n        // Regular paragraph\n        return <p key={i} className=\"my-1\">{line}</p>;\n      });\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className={cn('sm:max-w-2xl', className)}>\n        <DialogHeader>\n          <DialogTitle>{memory ? 'Edit Memory' : 'Create Memory'}</DialogTitle>\n          <DialogDescription className=\"sr-only\">{memory ? 'Edit memory details' : 'Create a new memory entry'}</DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {/* Title */}\n          <div className=\"space-y-2\">\n            <label htmlFor=\"memory-title\" className=\"text-sm font-medium\">\n              Title <span className=\"text-destructive\">*</span>\n            </label>\n            <Input\n              id=\"memory-title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"Memory title\"\n              required\n            />\n          </div>\n\n          {/* Content with tabs */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <label className=\"text-sm font-medium\">\n                Content <span className=\"text-destructive\">*</span>\n              </label>\n            </div>\n\n            <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as 'edit' | 'preview')}>\n              <div className=\"flex items-center justify-between\">\n                {/* Toolbar */}\n                <div className=\"flex gap-1\">\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('**', '**')}\n                    title=\"Bold\"\n                  >\n                    <Bold className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('*', '*')}\n                    title=\"Italic\"\n                  >\n                    <Italic className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('- ')}\n                    title=\"Bullet list\"\n                  >\n                    <List className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('1. ')}\n                    title=\"Numbered list\"\n                  >\n                    <ListOrdered className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('[', '](url)')}\n                    title=\"Link\"\n                  >\n                    <Link2 className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('`', '`')}\n                    title=\"Code\"\n                  >\n                    <Code className=\"size-4\" />\n                  </Button>\n                </div>\n\n                <TabsList>\n                  <TabsTrigger value=\"edit\" className=\"gap-1\">\n                    <Edit3 className=\"size-3\" />\n                    Edit\n                  </TabsTrigger>\n                  <TabsTrigger value=\"preview\" className=\"gap-1\">\n                    <Eye className=\"size-3\" />\n                    Preview\n                  </TabsTrigger>\n                </TabsList>\n              </div>\n\n              <TabsContent value=\"edit\" className=\"mt-2\">\n                <Textarea\n                  ref={textareaRef}\n                  value={content}\n                  onChange={(e) => setContent(e.target.value)}\n                  placeholder=\"Write your memory content here... (Markdown supported)\"\n                  className=\"min-h-[200px] font-mono text-sm\"\n                  required\n                />\n              </TabsContent>\n\n              <TabsContent value=\"preview\" className=\"mt-2\">\n                <div className=\"min-h-[200px] rounded-md border bg-muted/30 p-4 text-sm\">\n                  {content ? (\n                    <div className=\"prose prose-sm dark:prose-invert max-w-none\">\n                      {renderPreview(content)}\n                    </div>\n                  ) : (\n                    <p className=\"text-muted-foreground\">Nothing to preview</p>\n                  )}\n                </div>\n              </TabsContent>\n            </Tabs>\n          </div>\n\n          {/* Tags */}\n          <div className=\"space-y-2\">\n            <label htmlFor=\"memory-tags\" className=\"text-sm font-medium\">\n              Tags\n            </label>\n            <div className=\"flex gap-2\">\n              <Input\n                id=\"memory-tags\"\n                value={tagInput}\n                onChange={(e) => setTagInput(e.target.value)}\n                placeholder=\"Add a tag\"\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') {\n                    e.preventDefault();\n                    handleAddTag();\n                  }\n                }}\n              />\n              <Button type=\"button\" variant=\"outline\" onClick={handleAddTag}>\n                Add\n              </Button>\n            </div>\n            {tags.length > 0 && (\n              <div className=\"flex flex-wrap gap-1 mt-2\">\n                {tags.map((tag) => (\n                  <Badge\n                    key={tag}\n                    variant=\"secondary\"\n                    className=\"cursor-pointer\"\n                    onClick={() => handleRemoveTag(tag)}\n                  >\n                    {tag} \n                  </Badge>\n                ))}\n              </div>\n            )}\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={!isValid}>\n              {memory ? 'Save Changes' : 'Create Memory'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import * as React from 'react';\nimport { Mail, Paperclip, MoreVertical, Unlink, ExternalLink } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/ui/components/ui/dropdown-menu';\nimport type { LinkedEmail } from './types';\n\nexport interface EmailCardProps {\n  email: LinkedEmail;\n  onClick?: (email: LinkedEmail) => void;\n  onUnlink?: (email: LinkedEmail) => void;\n  className?: string;\n}\n\nexport function EmailCard({\n  email,\n  onClick,\n  onUnlink,\n  className,\n}: EmailCardProps) {\n  return (\n    <div\n      data-testid=\"email-card\"\n      className={cn(\n        'group flex items-start gap-3 rounded-lg border bg-card p-3 transition-colors hover:bg-accent/50',\n        onClick && 'cursor-pointer',\n        !email.isRead && 'border-l-2 border-l-primary',\n        className\n      )}\n      onClick={() => onClick?.(email)}\n    >\n      {/* Icon */}\n      <div className=\"mt-0.5 flex size-8 shrink-0 items-center justify-center rounded-full bg-primary/10\">\n        <Mail className=\"size-4 text-primary\" />\n      </div>\n\n      {/* Content */}\n      <div className=\"min-w-0 flex-1\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <div className=\"min-w-0\">\n            <p className={cn('truncate text-sm', !email.isRead && 'font-semibold')}>\n              {email.subject}\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              {email.from.name || email.from.email}\n            </p>\n          </div>\n\n          <div className=\"flex shrink-0 items-center gap-1\">\n            {email.hasAttachments && (\n              <Paperclip className=\"size-3 text-muted-foreground\" />\n            )}\n            <span className=\"text-xs text-muted-foreground\">\n              {formatEmailDate(email.date)}\n            </span>\n\n            {onUnlink && (\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-6 opacity-0 group-hover:opacity-100\"\n                    onClick={(e) => e.stopPropagation()}\n                  >\n                    <MoreVertical className=\"size-4\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\">\n                  <DropdownMenuItem\n                    className=\"text-destructive focus:text-destructive\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onUnlink(email);\n                    }}\n                  >\n                    <Unlink className=\"mr-2 size-4\" />\n                    Unlink\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            )}\n          </div>\n        </div>\n\n        <p className=\"mt-1 line-clamp-2 text-xs text-muted-foreground\">\n          {email.snippet}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nfunction formatEmailDate(date: Date): string {\n  const now = new Date();\n  const diff = now.getTime() - date.getTime();\n  const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n\n  if (days === 0) {\n    return date.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n  }\n  if (days === 1) {\n    return 'Yesterday';\n  }\n  if (days < 7) {\n    return date.toLocaleDateString([], { weekday: 'short' });\n  }\n  return date.toLocaleDateString([], { month: 'short', day: 'numeric' });\n}\n","import * as React from 'react';\nimport {\n  Calendar,\n  Clock,\n  MapPin,\n  Users,\n  Video,\n  MoreVertical,\n  Unlink,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Badge } from '@/ui/components/ui/badge';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/ui/components/ui/dropdown-menu';\nimport type { LinkedCalendarEvent } from './types';\n\nexport interface CalendarEventCardProps {\n  event: LinkedCalendarEvent;\n  onClick?: (event: LinkedCalendarEvent) => void;\n  onUnlink?: (event: LinkedCalendarEvent) => void;\n  className?: string;\n}\n\nexport function CalendarEventCard({\n  event,\n  onClick,\n  onUnlink,\n  className,\n}: CalendarEventCardProps) {\n  const isPast = event.endTime < new Date();\n  const isToday = isSameDay(event.startTime, new Date());\n\n  return (\n    <div\n      data-testid=\"calendar-event-card\"\n      className={cn(\n        'group flex items-start gap-3 rounded-lg border bg-card p-3 transition-colors hover:bg-accent/50',\n        onClick && 'cursor-pointer',\n        isPast && 'opacity-60',\n        className\n      )}\n      onClick={() => onClick?.(event)}\n    >\n      {/* Date box */}\n      <div\n        className={cn(\n          'flex size-12 shrink-0 flex-col items-center justify-center rounded-lg',\n          isToday ? 'bg-primary text-primary-foreground' : 'bg-muted'\n        )}\n      >\n        <span className=\"text-[10px] font-medium uppercase\">\n          {event.startTime.toLocaleDateString([], { weekday: 'short' })}\n        </span>\n        <span className=\"text-lg font-bold\">{event.startTime.getDate()}</span>\n      </div>\n\n      {/* Content */}\n      <div className=\"min-w-0 flex-1\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <h4 className=\"font-medium leading-tight\">{event.title}</h4>\n\n          {onUnlink && (\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"size-6 opacity-0 group-hover:opacity-100\"\n                  onClick={(e) => e.stopPropagation()}\n                >\n                  <MoreVertical className=\"size-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <DropdownMenuItem\n                  className=\"text-destructive focus:text-destructive\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onUnlink(event);\n                  }}\n                >\n                  <Unlink className=\"mr-2 size-4\" />\n                  Unlink\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          )}\n        </div>\n\n        {/* Time */}\n        <div className=\"mt-1 flex items-center gap-1 text-xs text-muted-foreground\">\n          <Clock className=\"size-3\" />\n          <span>\n            {event.isAllDay\n              ? 'All day'\n              : `${formatTime(event.startTime)} - ${formatTime(event.endTime)}`}\n          </span>\n        </div>\n\n        {/* Location */}\n        {event.location && (\n          <div className=\"mt-1 flex items-center gap-1 text-xs text-muted-foreground\">\n            <MapPin className=\"size-3\" />\n            <span className=\"truncate\">{event.location}</span>\n          </div>\n        )}\n\n        {/* Meeting link */}\n        {event.meetingLink && (\n          <div className=\"mt-1 flex items-center gap-1 text-xs text-primary\">\n            <Video className=\"size-3\" />\n            <span>Video meeting</span>\n          </div>\n        )}\n\n        {/* Attendees */}\n        {event.attendees.length > 0 && (\n          <div className=\"mt-2 flex items-center gap-2\">\n            <Users className=\"size-3 text-muted-foreground\" />\n            <div className=\"flex items-center gap-1\">\n              {event.attendees.slice(0, 3).map((attendee, i) => (\n                <Badge\n                  key={attendee.email}\n                  variant={\n                    attendee.status === 'accepted'\n                      ? 'default'\n                      : attendee.status === 'declined'\n                        ? 'destructive'\n                        : 'secondary'\n                  }\n                  className=\"text-[10px] px-1.5 py-0\"\n                >\n                  {attendee.name.split(' ')[0]}\n                </Badge>\n              ))}\n              {event.attendees.length > 3 && (\n                <span className=\"text-xs text-muted-foreground\">\n                  +{event.attendees.length - 3}\n                </span>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction formatTime(date: Date): string {\n  return date.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n}\n\nfunction isSameDay(d1: Date, d2: Date): boolean {\n  return (\n    d1.getFullYear() === d2.getFullYear() &&\n    d1.getMonth() === d2.getMonth() &&\n    d1.getDate() === d2.getDate()\n  );\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Mail, Calendar, Plus, Link2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Badge } from '@/ui/components/ui/badge';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/ui/components/ui/tabs';\nimport { EmailCard } from './email-card';\nimport { CalendarEventCard } from './calendar-event-card';\nimport type { LinkedEmail, LinkedCalendarEvent } from './types';\n\nexport interface ItemCommunicationsProps {\n  emails: LinkedEmail[];\n  calendarEvents: LinkedCalendarEvent[];\n  onEmailClick?: (email: LinkedEmail) => void;\n  onEventClick?: (event: LinkedCalendarEvent) => void;\n  onUnlinkEmail?: (email: LinkedEmail) => void;\n  onUnlinkEvent?: (event: LinkedCalendarEvent) => void;\n  onLinkEmail?: () => void;\n  onLinkEvent?: () => void;\n  className?: string;\n}\n\nexport function ItemCommunications({\n  emails,\n  calendarEvents,\n  onEmailClick,\n  onEventClick,\n  onUnlinkEmail,\n  onUnlinkEvent,\n  onLinkEmail,\n  onLinkEvent,\n  className,\n}: ItemCommunicationsProps) {\n  const [activeTab, setActiveTab] = useState<'emails' | 'calendar'>('emails');\n\n  const totalCount = emails.length + calendarEvents.length;\n\n  return (\n    <div className={cn('space-y-4', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <h3 className=\"text-sm font-medium\">Communications</h3>\n          <Badge variant=\"secondary\" className=\"text-xs\">\n            {totalCount}\n          </Badge>\n        </div>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as 'emails' | 'calendar')}>\n        <div className=\"flex items-center justify-between\">\n          <TabsList>\n            <TabsTrigger value=\"emails\" className=\"gap-1\">\n              <Mail className=\"size-3\" />\n              Emails\n              {emails.length > 0 && (\n                <Badge variant=\"secondary\" className=\"ml-1 text-[10px] px-1\">\n                  {emails.length}\n                </Badge>\n              )}\n            </TabsTrigger>\n            <TabsTrigger value=\"calendar\" className=\"gap-1\">\n              <Calendar className=\"size-3\" />\n              Calendar\n              {calendarEvents.length > 0 && (\n                <Badge variant=\"secondary\" className=\"ml-1 text-[10px] px-1\">\n                  {calendarEvents.length}\n                </Badge>\n              )}\n            </TabsTrigger>\n          </TabsList>\n\n          {activeTab === 'emails' && onLinkEmail && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onLinkEmail}>\n              <Link2 className=\"mr-1 size-3\" />\n              Link Email\n            </Button>\n          )}\n          {activeTab === 'calendar' && onLinkEvent && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onLinkEvent}>\n              <Link2 className=\"mr-1 size-3\" />\n              Link Event\n            </Button>\n          )}\n        </div>\n\n        <TabsContent value=\"emails\" className=\"mt-4\">\n          {emails.length > 0 ? (\n            <div className=\"space-y-2\">\n              {emails.map((email) => (\n                <EmailCard\n                  key={email.id}\n                  email={email}\n                  onClick={onEmailClick}\n                  onUnlink={onUnlinkEmail}\n                />\n              ))}\n            </div>\n          ) : (\n            <EmptyState\n              icon={<Mail className=\"size-8\" />}\n              message=\"No linked emails\"\n              action={\n                onLinkEmail && (\n                  <Button variant=\"outline\" size=\"sm\" onClick={onLinkEmail}>\n                    <Link2 className=\"mr-1 size-3\" />\n                    Link an email\n                  </Button>\n                )\n              }\n            />\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"calendar\" className=\"mt-4\">\n          {calendarEvents.length > 0 ? (\n            <div className=\"space-y-2\">\n              {calendarEvents.map((event) => (\n                <CalendarEventCard\n                  key={event.id}\n                  event={event}\n                  onClick={onEventClick}\n                  onUnlink={onUnlinkEvent}\n                />\n              ))}\n            </div>\n          ) : (\n            <EmptyState\n              icon={<Calendar className=\"size-8\" />}\n              message=\"No linked calendar events\"\n              action={\n                onLinkEvent && (\n                  <Button variant=\"outline\" size=\"sm\" onClick={onLinkEvent}>\n                    <Link2 className=\"mr-1 size-3\" />\n                    Link an event\n                  </Button>\n                )\n              }\n            />\n          )}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n\nfunction EmptyState({\n  icon,\n  message,\n  action,\n}: {\n  icon: React.ReactNode;\n  message: string;\n  action?: React.ReactNode;\n}) {\n  return (\n    <div className=\"rounded-lg border border-dashed p-6 text-center\">\n      <div className=\"mx-auto text-muted-foreground/50\">{icon}</div>\n      <p className=\"mt-2 text-sm text-muted-foreground\">{message}</p>\n      {action && <div className=\"mt-3\">{action}</div>}\n    </div>\n  );\n}\n","/**\n * Work item detail page.\n *\n * Displays full details for a single work item with a tabbed content layout.\n * Sections include Description, Checklist, Dependencies, Activity, Memory,\n * and Communications. All metadata saves immediately via optimistic updates\n * through TanStack Query mutations.\n *\n * @see Issue #469\n */\nimport React, { useState, useCallback } from 'react';\nimport { useParams, Link } from 'react-router';\nimport { useWorkItem, workItemKeys } from '@/ui/hooks/queries/use-work-items';\nimport { useWorkItemMemories, memoryKeys } from '@/ui/hooks/queries/use-memories';\nimport { useWorkItemCommunications, communicationsKeys } from '@/ui/hooks/queries/use-communications';\nimport { useActivity } from '@/ui/hooks/queries/use-activity';\nimport { useUpdateWorkItem } from '@/ui/hooks/mutations/use-update-work-item';\nimport { useCreateMemory } from '@/ui/hooks/mutations/use-create-memory';\nimport { useUpdateMemory } from '@/ui/hooks/mutations/use-update-memory';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client';\nimport type { AppBootstrap } from '@/ui/lib/api-types';\nimport { mapApiPriority, mapPriorityToApi, readBootstrap } from '@/ui/lib/work-item-utils';\nimport { SkeletonCard, SkeletonList, ErrorState, Skeleton } from '@/ui/components/feedback';\nimport { Button } from '@/ui/components/ui/button';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/ui/components/ui/card';\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '@/ui/components/ui/tabs';\nimport { ScrollArea } from '@/ui/components/ui/scroll-area';\nimport { ItemHeader } from '@/ui/components/detail/item-header';\nimport { MetadataGrid } from '@/ui/components/detail/metadata-grid';\nimport { DescriptionEditor } from '@/ui/components/detail/description-editor';\nimport { TodoList } from '@/ui/components/detail/todo-list';\nimport { DependenciesSection } from '@/ui/components/detail/dependencies-section';\nimport type {\n  WorkItemDetail as DetailComponentType,\n  WorkItemStatus,\n  WorkItemPriority,\n  WorkItemKind,\n  WorkItemDependency,\n} from '@/ui/components/detail/types';\nimport { ItemMemories } from '@/ui/components/memory/item-memories';\nimport { MemoryEditor } from '@/ui/components/memory/memory-editor';\nimport type { MemoryItem, MemoryFormData } from '@/ui/components/memory/types';\nimport { ItemCommunications } from '@/ui/components/communications/item-communications';\nimport type { LinkedEmail, LinkedCalendarEvent } from '@/ui/components/communications/types';\nimport {\n  DeleteConfirmDialog,\n  UndoToast,\n  useWorkItemDelete,\n} from '@/ui/components/work-item-delete';\nimport {\n  ChevronRight,\n  Calendar,\n  Network,\n  FileText,\n  CheckSquare,\n  GitBranch,\n  Activity,\n  Brain,\n  Mail,\n  Users,\n  Clock,\n} from 'lucide-react';\n\n/** Format a relative time string from a Date. */\nfunction formatRelativeTime(date: Date): string {\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffMins < 1) return 'just now';\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n  return date.toLocaleDateString(undefined, { month: 'short', day: 'numeric' });\n}\n\nexport function WorkItemDetailPage(): React.JSX.Element {\n  const { id } = useParams<{ id: string }>();\n  const itemId = id ?? '';\n  const queryClient = useQueryClient();\n  const bootstrap = readBootstrap<AppBootstrap>();\n  const participants = bootstrap?.participants ?? [];\n\n  // Data queries\n  const { data: apiDetail, isLoading, error: itemError } = useWorkItem(itemId);\n  const { data: memoriesData, isLoading: memoriesLoading } = useWorkItemMemories(itemId);\n  const { data: commsData, isLoading: communicationsLoading } = useWorkItemCommunications(itemId);\n  const { data: activityData, isLoading: activityLoading } = useActivity(50);\n\n  // Mutations\n  const updateMutation = useUpdateWorkItem();\n  const createMemoryMutation = useCreateMemory();\n  const updateMemoryMutation = useUpdateMemory();\n\n  // Memory editor state\n  const [memoryEditorOpen, setMemoryEditorOpen] = useState(false);\n  const [editingMemory, setEditingMemory] = useState<MemoryItem | null>(null);\n\n  // Delete state\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const {\n    deleteItem: performDelete,\n    isDeleting,\n    undoState,\n    dismissUndo,\n  } = useWorkItemDelete({\n    onDeleted: () => {\n      window.location.href = '/app/work-items';\n    },\n  });\n\n  // Map API detail to component format\n  const workItem: DetailComponentType | null = apiDetail\n    ? (() => {\n        const deps: WorkItemDependency[] = [];\n        if (apiDetail.dependencies?.blocks) {\n          deps.push(\n            ...apiDetail.dependencies.blocks.map((d) => ({\n              id: d.id,\n              title: d.title,\n              kind: 'issue' as WorkItemKind,\n              status: 'not_started' as WorkItemStatus,\n              direction: 'blocks' as const,\n            })),\n          );\n        }\n        if (apiDetail.dependencies?.blocked_by) {\n          deps.push(\n            ...apiDetail.dependencies.blocked_by.map((d) => ({\n              id: d.id,\n              title: d.title,\n              kind: 'issue' as WorkItemKind,\n              status: 'not_started' as WorkItemStatus,\n              direction: 'blocked_by' as const,\n            })),\n          );\n        }\n        return {\n          id: apiDetail.id,\n          title: apiDetail.title,\n          kind: (apiDetail.kind as WorkItemKind) || 'issue',\n          status: (apiDetail.status as WorkItemStatus) || 'not_started',\n          priority: mapApiPriority(apiDetail.priority),\n          description: apiDetail.description || undefined,\n          parentId: apiDetail.parent_id || undefined,\n          parentTitle: apiDetail.parent?.title,\n          estimateMinutes: apiDetail.estimate_minutes || undefined,\n          actualMinutes: apiDetail.actual_minutes || undefined,\n          dueDate: apiDetail.not_after ? new Date(apiDetail.not_after) : undefined,\n          startDate: apiDetail.not_before ? new Date(apiDetail.not_before) : undefined,\n          createdAt: new Date(apiDetail.created_at),\n          updatedAt: new Date(apiDetail.updated_at),\n          todos: [],\n          attachments: [],\n          dependencies: deps,\n        };\n      })()\n    : null;\n\n  // Map memories\n  const memories: MemoryItem[] = (memoriesData?.memories ?? []).map((m) => ({\n    id: m.id,\n    title: m.title,\n    content: m.content,\n    linkedItemId: itemId,\n    linkedItemTitle: workItem?.title || undefined,\n    linkedItemKind: (workItem?.kind || 'issue') as 'issue',\n    createdAt: new Date(m.created_at),\n    updatedAt: new Date(m.updated_at),\n  }));\n\n  // Map communications\n  const emails: LinkedEmail[] = (commsData?.emails ?? []).map((e) => ({\n    id: e.id,\n    subject: 'Email',\n    from: { name: 'Unknown', email: '' },\n    to: [],\n    date: e.received_at ? new Date(e.received_at) : new Date(),\n    snippet: e.body?.substring(0, 100) || '',\n    body: e.body || undefined,\n  }));\n\n  const calendarEvents: LinkedCalendarEvent[] = (commsData?.calendar_events ?? []).map(\n    (e) => ({\n      id: e.id,\n      title: 'Calendar Event',\n      startTime: e.received_at ? new Date(e.received_at) : new Date(),\n      endTime: e.received_at ? new Date(e.received_at) : new Date(),\n      attendees: [],\n    }),\n  );\n\n  // Filter activity for this work item\n  const itemActivity = (activityData?.items ?? []).filter(\n    (a) => a.work_item_id === itemId,\n  );\n\n  // Handlers\n  const handleUpdate = useCallback(\n    (body: Record<string, unknown>) => {\n      updateMutation.mutate({ id: itemId, body: body as Parameters<typeof updateMutation.mutate>[0]['body'] });\n    },\n    [itemId, updateMutation],\n  );\n\n  const handleTitleChange = (title: string) => handleUpdate({ title });\n  const handleDescriptionChange = (description: string) => handleUpdate({ description });\n  const handleStatusChange = (status: WorkItemStatus) => handleUpdate({ status });\n  const handlePriorityChange = (priority: WorkItemPriority) =>\n    handleUpdate({ priority: mapPriorityToApi(priority) });\n  const handleDueDateChange = (date: string) => handleUpdate({ notAfter: date || null });\n  const handleStartDateChange = (date: string) => handleUpdate({ notBefore: date || null });\n  const handleEstimateChange = (minutes: string) => {\n    const value = parseInt(minutes, 10);\n    handleUpdate({ estimateMinutes: isNaN(value) ? null : value });\n  };\n  const handleActualChange = (minutes: string) => {\n    const value = parseInt(minutes, 10);\n    handleUpdate({ actualMinutes: isNaN(value) ? null : value });\n  };\n  const handleParentClick = () => {\n    if (workItem?.parentId) {\n      window.location.href = `/app/work-items/${workItem.parentId}`;\n    }\n  };\n  const handleDependencyClick = (dep: WorkItemDependency) => {\n    window.location.href = `/app/work-items/${dep.id}`;\n  };\n\n  // Memory handlers\n  const handleAddMemory = () => {\n    setEditingMemory(null);\n    setMemoryEditorOpen(true);\n  };\n  const handleEditMemory = (memory: MemoryItem) => {\n    setEditingMemory(memory);\n    setMemoryEditorOpen(true);\n  };\n  const handleCreateMemory = (data: MemoryFormData) => {\n    createMemoryMutation.mutate(\n      { workItemId: itemId, body: { title: data.title, content: data.content, type: 'note' } },\n      { onSuccess: () => setMemoryEditorOpen(false) },\n    );\n  };\n  const handleUpdateMemory = (data: MemoryFormData) => {\n    if (!editingMemory) return;\n    updateMemoryMutation.mutate(\n      { id: editingMemory.id, body: { title: data.title, content: data.content }, workItemId: itemId },\n      {\n        onSuccess: () => {\n          setMemoryEditorOpen(false);\n          setEditingMemory(null);\n        },\n      },\n    );\n  };\n  const handleDeleteMemory = async (memory: MemoryItem) => {\n    if (!confirm(`Delete memory \"${memory.title}\"?`)) return;\n    try {\n      await apiClient.delete(`/api/memories/${memory.id}`);\n      queryClient.invalidateQueries({ queryKey: memoryKeys.forWorkItem(itemId) });\n    } catch {\n      // Silently fail\n    }\n  };\n\n  // Communication handlers\n  const handleUnlinkEmail = async (email: LinkedEmail) => {\n    if (!confirm('Unlink this email from the work item?')) return;\n    try {\n      await apiClient.delete(`/api/work-items/${itemId}/communications/${email.id}`);\n      queryClient.invalidateQueries({ queryKey: communicationsKeys.forWorkItem(itemId) });\n    } catch {\n      // Silently fail\n    }\n  };\n  const handleUnlinkEvent = async (event: LinkedCalendarEvent) => {\n    if (!confirm('Unlink this event from the work item?')) return;\n    try {\n      await apiClient.delete(`/api/work-items/${itemId}/communications/${event.id}`);\n      queryClient.invalidateQueries({ queryKey: communicationsKeys.forWorkItem(itemId) });\n    } catch {\n      // Silently fail\n    }\n  };\n\n  // Delete handler\n  const handleDelete = () => setDeleteDialogOpen(true);\n  const handleConfirmDelete = async () => {\n    if (!workItem) return;\n    await performDelete({ id: workItem.id, title: workItem.title });\n    setDeleteDialogOpen(false);\n  };\n\n  // --- LOADING STATE ---\n  if (isLoading) {\n    return (\n      <div data-testid=\"page-work-item-detail\" className=\"flex flex-col h-full\">\n        <div className=\"p-4 border-b border-border flex items-center gap-4\">\n          <Skeleton width={80} height={32} />\n          <div className=\"flex gap-2\">\n            <Skeleton width={100} height={32} />\n            <Skeleton width={120} height={32} />\n          </div>\n        </div>\n        <div className=\"flex-1 p-6\">\n          <div className=\"mx-auto max-w-5xl space-y-6\">\n            <SkeletonCard />\n            <div className=\"grid gap-6 lg:grid-cols-3\">\n              <div className=\"lg:col-span-2\">\n                <SkeletonCard />\n              </div>\n              <div>\n                <Skeleton width=\"100%\" height={200} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // --- ERROR STATE ---\n  if (itemError || !workItem) {\n    return (\n      <div data-testid=\"page-work-item-detail\" className=\"p-6\">\n        <ErrorState\n          title=\"Work Item Not Found\"\n          message={itemError instanceof Error ? itemError.message : 'The requested work item could not be loaded.'}\n          action={\n            <Button variant=\"outline\" asChild>\n              <Link to=\"/work-items\">Back to Work Items</Link>\n            </Button>\n          }\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div data-testid=\"page-work-item-detail\" className=\"flex flex-col h-full\">\n      {/* Navigation bar */}\n      <div className=\"p-4 border-b border-border bg-background flex items-center gap-4 shrink-0\">\n        <Button variant=\"ghost\" size=\"sm\" asChild>\n          <Link to=\"/work-items\">\n            <ChevronRight className=\"mr-1 size-4 rotate-180\" />\n            Back\n          </Link>\n        </Button>\n        <div className=\"flex gap-2 ml-auto\">\n          <Button variant=\"outline\" size=\"sm\" asChild>\n            <Link to={`/work-items/${itemId}/timeline`}>\n              <Calendar className=\"mr-2 size-4\" />\n              Timeline\n            </Link>\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" asChild>\n            <Link to={`/work-items/${itemId}/graph`}>\n              <Network className=\"mr-2 size-4\" />\n              Dependencies\n            </Link>\n          </Button>\n        </div>\n      </div>\n\n      {/* Main content area */}\n      <ScrollArea className=\"flex-1\">\n        <div className=\"mx-auto max-w-5xl p-6 space-y-6\">\n          {/* Header section */}\n          <ItemHeader\n            title={workItem.title}\n            kind={workItem.kind}\n            status={workItem.status}\n            parentTitle={workItem.parentTitle}\n            onTitleChange={handleTitleChange}\n            onParentClick={handleParentClick}\n            onDelete={handleDelete}\n          />\n\n          {/* Timestamps */}\n          <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n            <span className=\"flex items-center gap-1\">\n              <Clock className=\"size-3\" />\n              Created {formatRelativeTime(workItem.createdAt)}\n            </span>\n            <span className=\"flex items-center gap-1\">\n              <Clock className=\"size-3\" />\n              Updated {formatRelativeTime(workItem.updatedAt)}\n            </span>\n            {updateMutation.isPending && (\n              <Badge variant=\"outline\" className=\"text-xs animate-pulse\">\n                Saving...\n              </Badge>\n            )}\n          </div>\n\n          {/* Main grid: content + sidebar */}\n          <div className=\"grid gap-6 lg:grid-cols-3\">\n            {/* Left column - tabbed content */}\n            <div className=\"lg:col-span-2 space-y-6\">\n              {/* Metadata card */}\n              <Card>\n                <CardContent className=\"pt-4\">\n                  <MetadataGrid\n                    status={workItem.status}\n                    priority={workItem.priority}\n                    assignee={workItem.assignee}\n                    dueDate={workItem.dueDate}\n                    startDate={workItem.startDate}\n                    estimateMinutes={workItem.estimateMinutes}\n                    actualMinutes={workItem.actualMinutes}\n                    onStatusChange={handleStatusChange}\n                    onPriorityChange={handlePriorityChange}\n                    onDueDateChange={handleDueDateChange}\n                    onStartDateChange={handleStartDateChange}\n                    onEstimateChange={handleEstimateChange}\n                    onActualChange={handleActualChange}\n                  />\n                </CardContent>\n              </Card>\n\n              {/* Tabbed content sections */}\n              <Tabs defaultValue=\"description\">\n                <TabsList variant=\"line\" className=\"w-full justify-start\">\n                  <TabsTrigger value=\"description\" className=\"gap-1.5\">\n                    <FileText className=\"size-3.5\" />\n                    Description\n                  </TabsTrigger>\n                  <TabsTrigger value=\"checklist\" className=\"gap-1.5\">\n                    <CheckSquare className=\"size-3.5\" />\n                    Checklist\n                    {workItem.todos.length > 0 && (\n                      <Badge variant=\"secondary\" className=\"ml-1 text-xs px-1.5 py-0\">\n                        {workItem.todos.length}\n                      </Badge>\n                    )}\n                  </TabsTrigger>\n                  <TabsTrigger value=\"dependencies\" className=\"gap-1.5\">\n                    <GitBranch className=\"size-3.5\" />\n                    Dependencies\n                    {workItem.dependencies.length > 0 && (\n                      <Badge variant=\"secondary\" className=\"ml-1 text-xs px-1.5 py-0\">\n                        {workItem.dependencies.length}\n                      </Badge>\n                    )}\n                  </TabsTrigger>\n                  <TabsTrigger value=\"activity\" className=\"gap-1.5\">\n                    <Activity className=\"size-3.5\" />\n                    Activity\n                  </TabsTrigger>\n                </TabsList>\n\n                {/* Description Tab */}\n                <TabsContent value=\"description\" data-testid=\"tab-content-description\">\n                  <Card>\n                    <CardContent className=\"pt-4\">\n                      <DescriptionEditor\n                        description={workItem.description}\n                        onDescriptionChange={handleDescriptionChange}\n                      />\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n\n                {/* Checklist Tab */}\n                <TabsContent value=\"checklist\" data-testid=\"tab-content-checklist\">\n                  <Card>\n                    <CardContent className=\"pt-4\">\n                      <TodoList todos={workItem.todos} />\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n\n                {/* Dependencies Tab */}\n                <TabsContent value=\"dependencies\" data-testid=\"tab-content-dependencies\">\n                  <Card>\n                    <CardContent className=\"pt-4\">\n                      <DependenciesSection\n                        dependencies={workItem.dependencies}\n                        onDependencyClick={handleDependencyClick}\n                      />\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n\n                {/* Activity Tab */}\n                <TabsContent value=\"activity\" data-testid=\"tab-content-activity\">\n                  <Card>\n                    <CardContent className=\"pt-4\">\n                      {activityLoading ? (\n                        <SkeletonList count={3} variant=\"row\" />\n                      ) : itemActivity.length === 0 ? (\n                        <div className=\"py-8 text-center text-muted-foreground\">\n                          <Activity className=\"size-8 mx-auto mb-2 opacity-50\" />\n                          <p className=\"text-sm\">No activity recorded yet</p>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-3\">\n                          {itemActivity.map((act) => (\n                            <div\n                              key={act.id}\n                              className=\"flex items-start gap-3 py-2 border-b border-border last:border-0\"\n                            >\n                              <div\n                                className={`size-7 rounded-full flex items-center justify-center shrink-0 ${\n                                  act.actor_email?.includes('agent')\n                                    ? 'bg-violet-500/10 text-violet-500 dark:bg-violet-500/20'\n                                    : 'bg-primary/10 text-primary dark:bg-primary/20'\n                                }`}\n                              >\n                                <span className=\"text-xs font-medium\">\n                                  {(act.actor_email ?? 'S').charAt(0).toUpperCase()}\n                                </span>\n                              </div>\n                              <div className=\"flex-1 min-w-0\">\n                                <p className=\"text-sm\">\n                                  <span className=\"font-medium text-foreground\">\n                                    {act.actor_email || 'System'}\n                                  </span>{' '}\n                                  <span className=\"text-muted-foreground\">{act.description}</span>\n                                </p>\n                                <p className=\"text-xs text-muted-foreground mt-0.5\">\n                                  {formatRelativeTime(new Date(act.created_at))}\n                                </p>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n              </Tabs>\n            </div>\n\n            {/* Right column - sidebar panels */}\n            <div className=\"space-y-6\">\n              {/* Memories panel */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                    <Brain className=\"size-4 text-muted-foreground\" />\n                    Memories\n                    {memories.length > 0 && (\n                      <Badge variant=\"secondary\" className=\"text-xs px-1.5 py-0\">\n                        {memories.length}\n                      </Badge>\n                    )}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {memoriesLoading ? (\n                    <Skeleton width=\"100%\" height={80} />\n                  ) : (\n                    <ItemMemories\n                      memories={memories}\n                      onAddMemory={handleAddMemory}\n                      onEditMemory={handleEditMemory}\n                      onDeleteMemory={handleDeleteMemory}\n                    />\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Communications panel */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                    <Mail className=\"size-4 text-muted-foreground\" />\n                    Communications\n                    {(emails.length + calendarEvents.length) > 0 && (\n                      <Badge variant=\"secondary\" className=\"text-xs px-1.5 py-0\">\n                        {emails.length + calendarEvents.length}\n                      </Badge>\n                    )}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {communicationsLoading ? (\n                    <Skeleton width=\"100%\" height={80} />\n                  ) : (\n                    <ItemCommunications\n                      emails={emails}\n                      calendarEvents={calendarEvents}\n                      onUnlinkEmail={handleUnlinkEmail}\n                      onUnlinkEvent={handleUnlinkEvent}\n                    />\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Participants panel */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                    <Users className=\"size-4 text-muted-foreground\" />\n                    Participants\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {participants.length === 0 ? (\n                    <p className=\"text-xs text-muted-foreground\">No participants assigned</p>\n                  ) : (\n                    <ul className=\"space-y-2\">\n                      {participants.map((p, idx) => (\n                        <li key={idx} className=\"flex items-center gap-2\">\n                          <div className=\"size-7 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center\">\n                            <span className=\"text-xs font-medium text-primary\">\n                              {(p.participant ?? 'U')[0].toUpperCase()}\n                            </span>\n                          </div>\n                          <span className=\"text-sm\">{p.participant ?? 'Unknown'}</span>\n                          {p.role && (\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {p.role}\n                            </Badge>\n                          )}\n                        </li>\n                      ))}\n                    </ul>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </ScrollArea>\n\n      {/* Memory Editor Dialog */}\n      <MemoryEditor\n        memory={editingMemory || undefined}\n        open={memoryEditorOpen}\n        onOpenChange={setMemoryEditorOpen}\n        onSubmit={editingMemory ? handleUpdateMemory : handleCreateMemory}\n      />\n\n      {/* Delete Confirmation */}\n      <DeleteConfirmDialog\n        open={deleteDialogOpen}\n        onOpenChange={setDeleteDialogOpen}\n        item={\n          workItem\n            ? { id: workItem.id, title: workItem.title, kind: workItem.kind, childCount: 0 }\n            : undefined\n        }\n        onConfirm={handleConfirmDelete}\n        isDeleting={isDeleting}\n      />\n      {undoState && (\n        <UndoToast\n          visible={!!undoState}\n          itemTitle={undoState.itemTitle}\n          onUndo={undoState.onUndo}\n          onDismiss={dismissUndo}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":["__iconNode","ArrowLeft","createLucideIcon","ArrowRight","Bold","Code","Italic","ListOrdered","MapPin","Paperclip","PenLine","Pen","SquareCheckBig","Unlink","Video","communicationsKeys","workItemId","useWorkItemCommunications","useQuery","signal","apiClient","useCreateMemory","queryClient","useQueryClient","useMutation","body","_data","memoryKeys","useUpdateMemory","id","getKindIcon","kind","jsx","Folder","Target","Layers","FileText","getKindLabel","getStatusVariant","status","getStatusLabel","c","ItemHeader","title","parentTitle","onTitleChange","onParentClick","onDelete","className","isEditing","setIsEditing","useState","editValue","setEditValue","handleStartEdit","handleSave","handleCancel","handleKeyDown","e","cn","jsxs","ChevronRight","Input","Button","Check","X","Pencil","Trash2","Badge","formatDate","date","formatMinutes","minutes","hours","mins","MetadataField","icon","label","value","editable","onEdit","editType","options","Select","SelectTrigger","SelectValue","SelectContent","opt","SelectItem","STATUS_OPTIONS","PRIORITY_OPTIONS","MetadataGrid","priority","assignee","dueDate","startDate","estimateMinutes","actualMinutes","onStatusChange","onPriorityChange","onAssigneeChange","onDueDateChange","onStartDateChange","onEstimateChange","onActualChange","getPriorityLabel","p","o","s","AlertCircle","v","User","Calendar","Clock","DescriptionEditor","description","onDescriptionChange","showPreview","setShowPreview","renderMarkdown","text","line","i","parseInline","result","remaining","keyIndex","codeMatch","boldMatch","italicMatch","nextSpecial","Edit2","Eye","Textarea","CHECKBOX_NAME","createCheckboxContext","createContextScope","CheckboxProviderImpl","useCheckboxContext","CheckboxProvider","props","__scopeCheckbox","checkedProp","children","defaultChecked","disabled","form","name","onCheckedChange","required","internal_do_not_use_render","checked","setChecked","useControllableState","control","setControl","React.useState","bubbleInput","setBubbleInput","hasConsumerStoppedPropagationRef","React.useRef","isFormControl","context","isIndeterminate","isFunction","TRIGGER_NAME","CheckboxTrigger","React.forwardRef","onKeyDown","onClick","checkboxProps","forwardedRef","composedRefs","useComposedRefs","initialCheckedStateRef","React.useEffect","reset","Primitive","getState","composeEventHandlers","event","prevChecked","Checkbox","Fragment","CheckboxBubbleInput","INDICATOR_NAME","CheckboxIndicator","forceMount","indicatorProps","Presence","BUBBLE_INPUT_NAME","usePrevious","controlSize","useSize","input","inputProto","bubbles","defaultCheckedRef","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","CheckIcon","TodoList","todos","onAdd","onToggle","newTodoText","setNewTodoText","handleAdd","completedCount","t","todo","GripVertical","Plus","DependenciesSection","dependencies","onDependencyClick","onAddDependency","blockedBy","d","blocks","renderDependency","dep","getLinkedItemIcon","MemoryCard","memory","preview","DropdownMenu","DropdownMenuTrigger","MoreVertical","DropdownMenuContent","DropdownMenuItem","tag","ItemMemories","memories","onMemoryClick","onAddMemory","onLinkMemory","onEditMemory","onDeleteMemory","Link2","MemoryEditor","open","onOpenChange","onSubmit","setTitle","content","setContent","tagInput","setTagInput","tags","setTags","activeTab","setActiveTab","textareaRef","insertMarkdown","useCallback","before","after","textarea","start","end","selected","newContent","newStart","newEnd","handleAddTag","handleRemoveTag","tagToRemove","handleSubmit","isValid","renderPreview","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","Tabs","List","TabsList","TabsTrigger","Edit3","TabsContent","DialogFooter","EmailCard","email","onUnlink","Mail","formatEmailDate","diff","days","CalendarEventCard","isPast","isToday","isSameDay","formatTime","Users","attendee","d1","d2","ItemCommunications","emails","calendarEvents","onEmailClick","onEventClick","onUnlinkEmail","onUnlinkEvent","onLinkEmail","onLinkEvent","totalCount","EmptyState","message","action","formatRelativeTime","diffMs","diffMins","diffHours","diffDays","WorkItemDetailPage","useParams","itemId","participants","readBootstrap","apiDetail","isLoading","itemError","useWorkItem","memoriesData","memoriesLoading","useWorkItemMemories","commsData","communicationsLoading","activityData","activityLoading","useActivity","updateMutation","useUpdateWorkItem","createMemoryMutation","updateMemoryMutation","memoryEditorOpen","setMemoryEditorOpen","editingMemory","setEditingMemory","deleteDialogOpen","setDeleteDialogOpen","performDelete","isDeleting","undoState","dismissUndo","useWorkItemDelete","workItem","deps","mapApiPriority","m","itemActivity","a","handleUpdate","handleTitleChange","handleDescriptionChange","handleStatusChange","handlePriorityChange","mapPriorityToApi","handleDueDateChange","handleStartDateChange","handleEstimateChange","handleActualChange","handleParentClick","handleDependencyClick","handleAddMemory","handleEditMemory","handleCreateMemory","data","handleUpdateMemory","handleDeleteMemory","handleUnlinkEmail","handleUnlinkEvent","handleDelete","handleConfirmDelete","Skeleton","SkeletonCard","ErrorState","Link","Network","ScrollArea","Card","CardContent","CheckSquare","GitBranch","Activity","SkeletonList","act","CardHeader","CardTitle","Brain","idx","DeleteConfirmDialog","UndoToast"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,19]}