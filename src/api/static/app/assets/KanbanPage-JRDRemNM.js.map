{"version":3,"file":"KanbanPage-JRDRemNM.js","sources":["../../../../ui/hooks/queries/use-backlog.ts","../../../../ui/pages/KanbanPage.tsx"],"sourcesContent":["/**\n * TanStack Query hook for the backlog/kanban board data.\n *\n * Fetches backlog items from GET /api/backlog with optional filters.\n */\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { BacklogResponse } from '@/ui/lib/api-types.ts';\n\n/** Query key factory for backlog. */\nexport const backlogKeys = {\n  all: ['backlog'] as const,\n  list: (filters?: { priority?: string[]; kind?: string[] }) =>\n    [...backlogKeys.all, 'list', filters] as const,\n};\n\n/**\n * Fetch backlog items with optional priority and kind filters.\n *\n * @param filters - Optional priority and kind filter arrays\n * @returns TanStack Query result with `BacklogResponse`\n */\nexport function useBacklog(filters?: { priority?: string[]; kind?: string[] }) {\n  const params = new URLSearchParams();\n  filters?.priority?.forEach((p) => params.append('priority', p));\n  filters?.kind?.forEach((k) => params.append('kind', k));\n  const queryString = params.toString() ? `?${params.toString()}` : '';\n\n  return useQuery({\n    queryKey: backlogKeys.list(filters),\n    queryFn: ({ signal }) =>\n      apiClient.get<BacklogResponse>(`/api/backlog${queryString}`, { signal }),\n  });\n}\n","/**\n * Kanban board page.\n *\n * Displays work items in a drag-and-drop column layout grouped by status.\n * Supports priority and kind filtering, inline title editing, and\n * optimistic status updates via drag-and-drop.\n */\nimport React, { useState, useCallback } from 'react';\nimport { Link, useSearchParams } from 'react-router';\nimport { useBacklog, backlogKeys } from '@/ui/hooks/queries/use-backlog';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client';\nimport type { BacklogItem } from '@/ui/lib/api-types';\nimport { ErrorState } from '@/ui/components/feedback';\nimport { Button } from '@/ui/components/ui/button';\nimport { InlineEditableText } from '@/ui/components/inline-edit';\nimport {\n  List,\n  Clock,\n  AlertCircle,\n  CheckCircle2,\n  Circle,\n} from 'lucide-react';\n\nconst statuses = ['open', 'blocked', 'closed'];\nconst statusConfig: Record<string, { label: string; bgColor: string }> = {\n  open: { label: 'To Do', bgColor: 'from-blue-500/5 to-blue-500/0' },\n  blocked: { label: 'Blocked', bgColor: 'from-amber-500/5 to-amber-500/0' },\n  closed: { label: 'Done', bgColor: 'from-emerald-500/5 to-emerald-500/0' },\n};\nconst priorityConfig: Record<string, { color: string; bg: string }> = {\n  P0: { color: '#ef4444', bg: 'bg-red-500/10 text-red-400 border-red-500/20' },\n  P1: { color: '#f97316', bg: 'bg-orange-500/10 text-orange-400 border-orange-500/20' },\n  P2: { color: '#eab308', bg: 'bg-yellow-500/10 text-yellow-400 border-yellow-500/20' },\n  P3: { color: '#22c55e', bg: 'bg-green-500/10 text-green-400 border-green-500/20' },\n  P4: { color: '#6b7280', bg: 'bg-gray-500/10 text-gray-400 border-gray-500/20' },\n};\nconst kindLabels: Record<string, { label: string; color: string }> = {\n  project: { label: 'P', color: 'bg-blue-500' },\n  initiative: { label: 'I', color: 'bg-violet-500' },\n  epic: { label: 'E', color: 'bg-emerald-500' },\n  issue: { label: 'T', color: 'bg-gray-500' },\n};\n\nexport function KanbanPage(): React.JSX.Element {\n  const queryClient = useQueryClient();\n  const [searchParams, setSearchParams] = useSearchParams();\n\n  const [filters, setFilters] = useState({\n    priority: searchParams.getAll('priority'),\n    kind: searchParams.getAll('kind'),\n  });\n\n  const { data, isLoading, error, refetch } = useBacklog({\n    priority: filters.priority.length > 0 ? filters.priority : undefined,\n    kind: filters.kind.length > 0 ? filters.kind : undefined,\n  });\n\n  const [items, setItems] = useState<BacklogItem[]>([]);\n  const [draggedItem, setDraggedItem] = useState<string | null>(null);\n  const [dragOverColumn, setDragOverColumn] = useState<string | null>(null);\n\n  // Sync fetched data to local state for optimistic updates\n  React.useEffect(() => {\n    if (data?.items) setItems(data.items);\n  }, [data]);\n\n  const updateFilters = useCallback(\n    (newFilters: typeof filters) => {\n      setFilters(newFilters);\n      const params = new URLSearchParams();\n      newFilters.priority.forEach((p) => params.append('priority', p));\n      newFilters.kind.forEach((k) => params.append('kind', k));\n      setSearchParams(params);\n    },\n    [setSearchParams],\n  );\n\n  const toggleFilter = (type: 'priority' | 'kind', value: string) => {\n    const current = filters[type];\n    const updated = current.includes(value)\n      ? current.filter((v) => v !== value)\n      : [...current, value];\n    updateFilters({ ...filters, [type]: updated });\n  };\n\n  const handleDragStart = (e: React.DragEvent, itemId: string) => {\n    setDraggedItem(itemId);\n    e.dataTransfer.effectAllowed = 'move';\n  };\n  const handleDragOver = (e: React.DragEvent, status: string) => {\n    e.preventDefault();\n    e.dataTransfer.dropEffect = 'move';\n    setDragOverColumn(status);\n  };\n  const handleDragLeave = () => setDragOverColumn(null);\n\n  const handleDrop = async (e: React.DragEvent, newStatus: string) => {\n    e.preventDefault();\n    setDragOverColumn(null);\n    if (!draggedItem) return;\n    const item = items.find((i) => i.id === draggedItem);\n    if (!item || item.status === newStatus) {\n      setDraggedItem(null);\n      return;\n    }\n    // Optimistic update\n    setItems((prev) => prev.map((i) => (i.id === draggedItem ? { ...i, status: newStatus } : i)));\n    try {\n      await apiClient.patch(`/api/work-items/${draggedItem}/status`, { status: newStatus });\n    } catch {\n      setItems((prev) => prev.map((i) => (i.id === draggedItem ? { ...i, status: item.status } : i)));\n    }\n    setDraggedItem(null);\n  };\n\n  const handleTitleChange = async (id: string, newTitle: string) => {\n    setItems((prev) => prev.map((i) => (i.id === id ? { ...i, title: newTitle } : i)));\n    try {\n      await apiClient.patch(`/api/work-items/${id}`, { title: newTitle });\n    } catch {\n      refetch();\n    }\n  };\n\n  return (\n    <div data-testid=\"page-kanban\" className=\"h-full flex flex-col bg-gradient-to-br from-background to-muted/20\">\n      <div className=\"px-6 pt-6 pb-4\">\n        <div className=\"flex items-center justify-between\">\n          <div>\n            <h1 className=\"text-2xl font-bold tracking-tight text-foreground\">Kanban Board</h1>\n            <p className=\"text-sm text-muted-foreground mt-1\">Drag cards to update status</p>\n          </div>\n          <Button variant=\"outline\" size=\"sm\" asChild className=\"border-border/50\">\n            <Link to=\"/work-items\">\n              <List className=\"mr-2 size-4\" />\n              List View\n            </Link>\n          </Button>\n        </div>\n        {/* Filters */}\n        <div className=\"mt-4 flex flex-wrap gap-3 items-center\">\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">Priority</span>\n            <div className=\"flex gap-1\">\n              {['P0', 'P1', 'P2', 'P3', 'P4'].map((p) => (\n                <button key={p} onClick={() => toggleFilter('priority', p)}\n                  className={`px-2.5 py-1 text-xs font-medium rounded-md transition-all ${\n                    filters.priority.includes(p) ? priorityConfig[p].bg + ' border' : 'text-muted-foreground hover:text-foreground hover:bg-muted'\n                  }`}>\n                  {p}\n                </button>\n              ))}\n            </div>\n          </div>\n          <div className=\"h-4 w-px bg-border/50\" />\n          <div className=\"flex items-center gap-2\">\n            <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wide\">Type</span>\n            <div className=\"flex gap-1\">\n              {(['project', 'initiative', 'epic', 'issue'] as const).map((k) => (\n                <button key={k} onClick={() => toggleFilter('kind', k)}\n                  className={`px-2.5 py-1 text-xs font-medium rounded-md transition-all flex items-center gap-1.5 ${\n                    filters.kind.includes(k) ? 'bg-primary/10 text-primary border border-primary/20' : 'text-muted-foreground hover:text-foreground hover:bg-muted'\n                  }`}>\n                  <span className={`size-2 rounded-sm ${kindLabels[k].color}`} />\n                  {k.charAt(0).toUpperCase() + k.slice(1)}\n                </button>\n              ))}\n            </div>\n          </div>\n          {(filters.priority.length > 0 || filters.kind.length > 0) && (\n            <>\n              <div className=\"h-4 w-px bg-border/50\" />\n              <button onClick={() => updateFilters({ priority: [], kind: [] })} className=\"text-xs text-muted-foreground hover:text-foreground transition-colors\">\n                Clear all\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n\n      {isLoading && (\n        <div className=\"flex gap-4 flex-1 px-6 pb-6\">\n          {statuses.map((s) => <div key={s} className=\"flex-1 rounded-xl bg-muted/30 animate-pulse min-h-[400px]\" />)}\n        </div>\n      )}\n      {error && (\n        <div className=\"px-6\">\n          <ErrorState type=\"generic\" title=\"Failed to load board\" description={error instanceof Error ? error.message : 'Unknown error'} onRetry={() => refetch()} />\n        </div>\n      )}\n      {!isLoading && !error && (\n        <div className=\"flex gap-4 flex-1 overflow-x-auto px-6 pb-6\">\n          {statuses.map((status) => {\n            const columnItems = items.filter((i) => i.status === status);\n            const config = statusConfig[status];\n            const isOver = dragOverColumn === status;\n            return (\n              <div key={status} className={`flex-1 min-w-[300px] max-w-[380px] flex flex-col rounded-xl transition-all duration-200 ${isOver ? 'ring-2 ring-primary/50 ring-offset-2 ring-offset-background' : ''}`}\n                onDragOver={(e) => handleDragOver(e, status)} onDragLeave={handleDragLeave} onDrop={(e) => handleDrop(e, status)}>\n                <div className={`px-4 py-3 rounded-t-xl bg-gradient-to-b ${config.bgColor} border-b border-border/30`}>\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className={`size-2 rounded-full ${status === 'open' ? 'bg-blue-400' : status === 'blocked' ? 'bg-amber-400' : 'bg-emerald-400'}`} />\n                      <h3 className=\"font-semibold text-sm\">{config.label}</h3>\n                    </div>\n                    <span className=\"text-xs font-medium px-2 py-0.5 rounded-full bg-muted text-muted-foreground\">{columnItems.length}</span>\n                  </div>\n                </div>\n                <div className=\"flex-1 p-2 space-y-2 overflow-y-auto bg-muted/20 rounded-b-xl\">\n                  {columnItems.map((item) => {\n                    const kc = kindLabels[item.kind] || { label: '?', color: 'bg-gray-500' };\n                    const pc = priorityConfig[item.priority] || priorityConfig.P4;\n                    return (\n                      <div key={item.id} draggable onDragStart={(e) => handleDragStart(e, item.id)}\n                        className={`group bg-surface border border-border/50 rounded-lg p-3 cursor-grab active:cursor-grabbing transition-all duration-150 hover:border-border hover:shadow-lg hover:shadow-black/5 hover:-translate-y-0.5 ${draggedItem === item.id ? 'opacity-50 scale-95' : ''}`}\n                        style={{ borderLeftWidth: 3, borderLeftColor: pc.color }}>\n                        <div className=\"flex items-start gap-2\">\n                          <div className=\"flex-1 min-w-0\">\n                            <InlineEditableText value={item.title} onSave={(newTitle) => handleTitleChange(item.id, newTitle)} selectOnFocus className=\"font-medium text-sm text-foreground line-clamp-2 leading-snug\" validate={(v) => v.trim().length > 0} />\n                          </div>\n                          <Link to={`/work-items/${item.id}`} className=\"shrink-0 size-5 rounded flex items-center justify-center text-[10px] font-bold text-white hover:opacity-80 transition-opacity\" onClick={(e) => e.stopPropagation()} title=\"View details\">\n                            <div className={`size-full rounded flex items-center justify-center ${kc.color}`}>{kc.label}</div>\n                          </Link>\n                        </div>\n                        <div className=\"mt-2.5 flex items-center gap-2\">\n                          <span className={`text-[10px] font-semibold px-1.5 py-0.5 rounded border ${pc.bg}`}>{item.priority}</span>\n                          {item.estimate_minutes && (\n                            <span className=\"flex items-center gap-1 text-[11px] text-muted-foreground\">\n                              <Clock className=\"size-3\" />\n                              {item.estimate_minutes >= 60 ? `${Math.floor(item.estimate_minutes / 60)}h` : `${item.estimate_minutes}m`}\n                            </span>\n                          )}\n                        </div>\n                      </div>\n                    );\n                  })}\n                  {columnItems.length === 0 && (\n                    <div className=\"flex flex-col items-center justify-center py-12 text-muted-foreground\">\n                      <div className=\"size-10 rounded-full bg-muted/50 flex items-center justify-center mb-2\">\n                        {status === 'open' ? <Circle className=\"size-5\" /> : status === 'blocked' ? <AlertCircle className=\"size-5\" /> : <CheckCircle2 className=\"size-5\" />}\n                      </div>\n                      <span className=\"text-sm\">No items</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["backlogKeys","filters","useBacklog","params","p","k","queryString","useQuery","signal","apiClient","statuses","statusConfig","priorityConfig","kindLabels","KanbanPage","useQueryClient","searchParams","setSearchParams","useSearchParams","setFilters","useState","data","isLoading","error","refetch","items","setItems","draggedItem","setDraggedItem","dragOverColumn","setDragOverColumn","React","updateFilters","useCallback","newFilters","toggleFilter","type","value","current","updated","v","handleDragStart","e","itemId","handleDragOver","status","handleDragLeave","handleDrop","newStatus","item","i","prev","handleTitleChange","id","newTitle","jsxs","jsx","Button","Link","List","Fragment","s","ErrorState","columnItems","config","isOver","kc","pc","InlineEditableText","Clock","Circle","AlertCircle","CheckCircle2"],"mappings":"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"}