{"version":3,"file":"use-work-items-d_fseGMd.js","sources":["../../../../ui/hooks/queries/use-work-items.ts"],"sourcesContent":["/**\n * TanStack Query hooks for work item data fetching.\n *\n * Provides cached, deduplicated queries for work item lists, details, and trees.\n */\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type {\n  WorkItemsResponse,\n  WorkItemDetail,\n  WorkItemTreeResponse,\n} from '@/ui/lib/api-types.ts';\n\n/** Query key factory for work items. */\nexport const workItemKeys = {\n  all: ['work-items'] as const,\n  lists: () => [...workItemKeys.all, 'list'] as const,\n  list: (filters?: Record<string, string>) => [...workItemKeys.lists(), filters] as const,\n  details: () => [...workItemKeys.all, 'detail'] as const,\n  detail: (id: string) => [...workItemKeys.details(), id] as const,\n  tree: () => [...workItemKeys.all, 'tree'] as const,\n};\n\n/**\n * Fetch the flat list of work items.\n *\n * @param filters - Optional query string params (e.g. `{ kind: 'project' }`)\n * @returns TanStack Query result with `WorkItemsResponse`\n */\nexport function useWorkItems(filters?: Record<string, string>) {\n  const queryString = filters\n    ? '?' + new URLSearchParams(filters).toString()\n    : '';\n\n  return useQuery({\n    queryKey: workItemKeys.list(filters),\n    queryFn: ({ signal }) =>\n      apiClient.get<WorkItemsResponse>(`/api/work-items${queryString}`, { signal }),\n  });\n}\n\n/**\n * Fetch a single work item by ID.\n *\n * @param id - Work item UUID\n * @returns TanStack Query result with `WorkItemDetail`\n */\nexport function useWorkItem(id: string) {\n  return useQuery({\n    queryKey: workItemKeys.detail(id),\n    queryFn: ({ signal }) =>\n      apiClient.get<WorkItemDetail>(`/api/work-items/${id}`, { signal }),\n    enabled: !!id,\n  });\n}\n\n/**\n * Fetch the hierarchical work item tree.\n *\n * @returns TanStack Query result with `WorkItemTreeResponse`\n */\nexport function useWorkItemTree() {\n  return useQuery({\n    queryKey: workItemKeys.tree(),\n    queryFn: ({ signal }) =>\n      apiClient.get<WorkItemTreeResponse>('/api/work-items/tree', { signal }),\n  });\n}\n"],"names":["workItemKeys","filters","id","useWorkItems","useQuery","signal","apiClient","useWorkItem","useWorkItemTree"],"mappings":"wFAcO,MAAMA,EAAe,CAC1B,IAAK,CAAC,YAAY,EAClB,MAAO,IAAM,CAAC,GAAGA,EAAa,IAAK,MAAM,EACzC,KAAOC,GAAqC,CAAC,GAAGD,EAAa,MAAA,EAASC,CAAO,EAC7E,QAAS,IAAM,CAAC,GAAGD,EAAa,IAAK,QAAQ,EAC7C,OAASE,GAAe,CAAC,GAAGF,EAAa,QAAA,EAAWE,CAAE,EACtD,KAAM,IAAM,CAAC,GAAGF,EAAa,IAAK,MAAM,CAC1C,EAQO,SAASG,EAAaF,EAAkC,CAK7D,OAAOG,EAAS,CACd,SAAUJ,EAAa,KAAKC,CAAO,EACnC,QAAS,CAAC,CAAE,OAAAI,CAAA,IACVC,EAAU,IAAuB,kBAAiC,CAAE,OAAAD,CAAA,CAAQ,CAAA,CAC/E,CACH,CAQO,SAASE,EAAYL,EAAY,CACtC,OAAOE,EAAS,CACd,SAAUJ,EAAa,OAAOE,CAAE,EAChC,QAAS,CAAC,CAAE,OAAAG,CAAA,IACVC,EAAU,IAAoB,mBAAmBJ,CAAE,GAAI,CAAE,OAAAG,CAAA,CAAQ,EACnE,QAAS,CAAC,CAACH,CAAA,CACZ,CACH,CAOO,SAASM,GAAkB,CAChC,OAAOJ,EAAS,CACd,SAAUJ,EAAa,KAAA,EACvB,QAAS,CAAC,CAAE,OAAAK,CAAA,IACVC,EAAU,IAA0B,uBAAwB,CAAE,OAAAD,CAAA,CAAQ,CAAA,CACzE,CACH"}