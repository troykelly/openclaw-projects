import{j as e,L as l}from"./index-nMqE_Vs3.js";import{u as m}from"./use-activity-BDmOn32i.js";import{S as x,a as p}from"./skeleton-sgkYYJWR.js";import{E as u}from"./error-state-DTZcQKZm.js";import{E as h}from"./empty-state-CKT-McZC.js";import{C as i,a as n}from"./card-Cz9VqdbX.js";import{S as f}from"./scroll-area-Bmw3Bpqm.js";import"./api-client-CDvRtWmo.js";import"./button-TOpELVfJ.js";import"./bell-B1_IhwkZ.js";import"./mail-Bsr1blDG.js";import"./users-BjVxdKN7.js";import"./search-DgEAN9wj.js";import"./index-C41Rbgjy.js";function j(t){return{id:t.id,actorType:t.actor_email?.includes("agent")?"agent":"human",actorName:t.actor_email||"System",action:t.type==="status_change"?"status_changed":t.type,entityId:t.work_item_id,entityTitle:t.work_item_title,detail:t.description,timestamp:new Date(t.created_at)}}function g(t){switch(t){case"created":return"created";case"updated":return"updated";case"status_changed":return"changed status of";case"commented":return"commented on";case"assigned":return"assigned";default:return t}}function F(){const{data:t,isLoading:c,error:s,refetch:d}=m(50);if(c)return e.jsxs("div",{"data-testid":"page-activity",className:"p-6",children:[e.jsx("div",{className:"mb-6 flex items-center justify-between",children:e.jsx(x,{width:200,height:32})}),e.jsx(p,{count:5,variant:"row"})]});if(s)return e.jsx("div",{"data-testid":"page-activity",className:"p-6",children:e.jsx(u,{type:"generic",title:"Failed to load activity",description:s instanceof Error?s.message:"Unknown error",onRetry:()=>d()})});const r=t?.items??[];if(r.length===0)return e.jsxs("div",{"data-testid":"page-activity",className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-foreground mb-4",children:"Activity Feed"}),e.jsx(i,{children:e.jsx(n,{className:"p-8",children:e.jsx(h,{variant:"no-data",title:"No activity yet",description:"Activity will appear here when work items are created or updated."})})})]});const o=r.map(j);return e.jsxs("div",{"data-testid":"page-activity",className:"p-6 h-full flex flex-col",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-semibold text-foreground",children:"Activity Feed"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Recent updates across all work items"})]}),e.jsx(i,{className:"flex-1",children:e.jsx(n,{className:"p-0",children:e.jsx(f,{className:"h-[calc(100vh-200px)]",children:e.jsx("div",{className:"divide-y",children:o.map(a=>e.jsx("div",{className:"p-4 hover:bg-muted/50 transition-colors",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`size-8 rounded-full flex items-center justify-center shrink-0 ${a.actorType==="agent"?"bg-violet-500/10 text-violet-500":"bg-primary/10 text-primary"}`,children:e.jsx("span",{className:"text-xs font-medium",children:a.actorName.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:a.actorName}),e.jsx("span",{className:"text-xs text-muted-foreground",children:g(a.action)})]}),e.jsx(l,{to:`/work-items/${a.entityId}`,className:"text-sm font-medium text-primary hover:underline",children:a.entityTitle}),a.detail&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:a.detail}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[a.timestamp.toLocaleDateString()," at"," ",a.timestamp.toLocaleTimeString()]})]})]})},a.id))})})})})]})}export{F as ActivityPage};
//# sourceMappingURL=ActivityPage-9JrmhoBl.js.map
