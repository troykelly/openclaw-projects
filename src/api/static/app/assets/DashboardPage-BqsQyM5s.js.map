{"version":3,"file":"DashboardPage-BqsQyM5s.js","sources":["../../../../ui/pages/DashboardPage.tsx"],"sourcesContent":["/**\n * Dashboard page - the default landing page for users.\n *\n * Provides a clear overview of current work with sections for:\n * - Welcome header with greeting and current date\n * - My Tasks - items grouped by status (In Progress, Not Started, Blocked)\n * - Upcoming Due - items due within 7 days\n * - Recent Activity - last 10 activity events\n * - Quick Actions - create task, search, open recent project\n *\n * Uses TanStack Query for data fetching with automatic caching.\n *\n * @see Issue #467\n */\nimport React, { useMemo } from 'react';\nimport { Link, useNavigate } from 'react-router';\nimport { useWorkItems } from '@/ui/hooks/queries/use-work-items';\nimport { useActivity } from '@/ui/hooks/queries/use-activity';\nimport type { WorkItemSummary, ActivityItem } from '@/ui/lib/api-types';\nimport { priorityColors } from '@/ui/lib/work-item-utils';\nimport { Skeleton, SkeletonCard } from '@/ui/components/feedback';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Button } from '@/ui/components/ui/button';\nimport {\n  Card,\n  CardContent,\n  CardHeader,\n  CardTitle,\n  CardDescription,\n} from '@/ui/components/ui/card';\nimport {\n  Plus,\n  Search,\n  FolderOpen,\n  Calendar,\n  Clock,\n  Activity,\n  ArrowRight,\n  CheckCircle2,\n  Circle,\n  AlertTriangle,\n  Loader2,\n} from 'lucide-react';\n\n// ---------------------------------------------------------------------------\n// Types\n// ---------------------------------------------------------------------------\n\n/** Status group for organizing tasks. */\ninterface StatusGroup {\n  key: string;\n  label: string;\n  icon: React.ReactNode;\n  colorClass: string;\n  items: WorkItemSummary[];\n}\n\n// ---------------------------------------------------------------------------\n// Helpers\n// ---------------------------------------------------------------------------\n\n/** Get a time-of-day greeting. */\nfunction getGreeting(): string {\n  const hour = new Date().getHours();\n  if (hour < 12) return 'Good morning';\n  if (hour < 17) return 'Good afternoon';\n  return 'Good evening';\n}\n\n/** Format today's date as a readable string. */\nfunction formatCurrentDate(): string {\n  return new Date().toLocaleDateString(undefined, {\n    weekday: 'long',\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric',\n  });\n}\n\n/** Get status display info. */\nfunction getStatusInfo(status: string): { label: string; colorClass: string } {\n  switch (status) {\n    case 'in_progress':\n      return { label: 'In Progress', colorClass: 'bg-blue-500/10 text-blue-600 dark:text-blue-400' };\n    case 'not_started':\n      return { label: 'Not Started', colorClass: 'bg-gray-500/10 text-gray-600 dark:text-gray-400' };\n    case 'blocked':\n      return { label: 'Blocked', colorClass: 'bg-red-500/10 text-red-600 dark:text-red-400' };\n    case 'done':\n      return { label: 'Done', colorClass: 'bg-green-500/10 text-green-600 dark:text-green-400' };\n    case 'cancelled':\n      return { label: 'Cancelled', colorClass: 'bg-gray-500/10 text-gray-500' };\n    default:\n      return { label: status.replace(/_/g, ' '), colorClass: 'bg-gray-500/10 text-gray-600' };\n  }\n}\n\n/** Format a relative timestamp for activity items. */\nfunction formatRelativeTime(dateStr: string): string {\n  const date = new Date(dateStr);\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffMins < 1) return 'just now';\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n\n  return date.toLocaleDateString(undefined, { month: 'short', day: 'numeric' });\n}\n\n/** Get a human-readable label for an activity action. */\nfunction getActivityLabel(type: string): string {\n  switch (type) {\n    case 'created':\n      return 'created';\n    case 'updated':\n      return 'updated';\n    case 'status_change':\n      return 'changed status of';\n    case 'commented':\n      return 'commented on';\n    case 'assigned':\n      return 'assigned';\n    case 'memory_added':\n      return 'added memory to';\n    default:\n      return type.replace(/_/g, ' ');\n  }\n}\n\n/** Filter active (non-completed) tasks and group by status. */\nfunction groupTasksByStatus(items: WorkItemSummary[]): StatusGroup[] {\n  const activeStatuses = ['in_progress', 'not_started', 'blocked'];\n  const activeItems = items.filter(\n    (item) => item.status !== null && activeStatuses.includes(item.status),\n  );\n\n  const groups: StatusGroup[] = [\n    {\n      key: 'in_progress',\n      label: 'In Progress',\n      icon: <Loader2 className=\"size-4\" />,\n      colorClass: 'text-blue-600 dark:text-blue-400',\n      items: activeItems.filter((i) => i.status === 'in_progress'),\n    },\n    {\n      key: 'not_started',\n      label: 'Not Started',\n      icon: <Circle className=\"size-4\" />,\n      colorClass: 'text-gray-600 dark:text-gray-400',\n      items: activeItems.filter((i) => i.status === 'not_started'),\n    },\n    {\n      key: 'blocked',\n      label: 'Blocked',\n      icon: <AlertTriangle className=\"size-4\" />,\n      colorClass: 'text-red-600 dark:text-red-400',\n      items: activeItems.filter((i) => i.status === 'blocked'),\n    },\n  ];\n\n  // Only return groups that have items\n  return groups.filter((g) => g.items.length > 0);\n}\n\n/** Check if an item has a due date within the next N days. */\nfunction isDueWithinDays(item: WorkItemSummary, _days: number): boolean {\n  // The API WorkItemSummary doesn't have not_after directly in list view,\n  // but we include all non-completed items as potentially upcoming.\n  // In a real implementation, the API would filter by due date.\n  return item.status !== 'done' && item.status !== 'cancelled';\n}\n\n// ---------------------------------------------------------------------------\n// Sub-components\n// ---------------------------------------------------------------------------\n\n/** Loading skeleton for the full dashboard. */\nfunction DashboardSkeleton(): React.JSX.Element {\n  return (\n    <div data-testid=\"page-dashboard\" className=\"p-6 space-y-8\">\n      {/* Welcome header skeleton */}\n      <div className=\"space-y-2\">\n        <Skeleton width={300} height={32} />\n        <Skeleton width={200} height={18} />\n      </div>\n\n      {/* Sections skeleton */}\n      <div className=\"grid gap-6 lg:grid-cols-2\">\n        <div className=\"space-y-4\">\n          <Skeleton width={150} height={24} />\n          <SkeletonCard />\n          <SkeletonCard />\n        </div>\n        <div className=\"space-y-4\">\n          <Skeleton width={150} height={24} />\n          <SkeletonCard />\n          <SkeletonCard />\n        </div>\n      </div>\n\n      <div>\n        <Skeleton width={180} height={24} />\n        <div className=\"mt-4 space-y-2\">\n          <Skeleton width=\"100%\" height={48} />\n          <Skeleton width=\"100%\" height={48} />\n          <Skeleton width=\"100%\" height={48} />\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/** Single work item card for the dashboard. */\nfunction WorkItemCard({ item }: { item: WorkItemSummary }): React.JSX.Element {\n  const statusInfo = getStatusInfo(item.status ?? 'not_started');\n  const priorityClass = item.priority ? priorityColors[item.priority] : undefined;\n\n  return (\n    <Link\n      to={`/work-items/${item.id}`}\n      className=\"flex items-center gap-3 rounded-lg border border-border bg-card p-3 transition-colors hover:bg-muted/50 dark:hover:bg-muted/30\"\n      data-testid=\"work-item-card\"\n    >\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"text-sm font-medium text-foreground truncate\">\n          {item.title}\n        </p>\n        <div className=\"flex items-center gap-2 mt-1\">\n          <Badge\n            variant=\"secondary\"\n            className={`text-xs ${statusInfo.colorClass}`}\n          >\n            {statusInfo.label}\n          </Badge>\n          {priorityClass && (\n            <Badge className={`text-xs ${priorityClass}`}>\n              {item.priority}\n            </Badge>\n          )}\n          {item.task_type && (\n            <span className=\"text-xs text-muted-foreground capitalize\">\n              {item.task_type}\n            </span>\n          )}\n        </div>\n      </div>\n      <ArrowRight className=\"size-4 text-muted-foreground shrink-0\" />\n    </Link>\n  );\n}\n\n/** Activity row in the recent activity section. */\nfunction ActivityRow({ item }: { item: ActivityItem }): React.JSX.Element {\n  return (\n    <div className=\"flex items-start gap-3 py-2\">\n      <div className=\"size-2 rounded-full bg-primary mt-2 shrink-0\" />\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"text-sm text-foreground\">\n          <span className=\"text-muted-foreground\">\n            {item.actor_email ?? 'System'}{' '}\n          </span>\n          <span className=\"text-muted-foreground\">\n            {getActivityLabel(item.type)}{' '}\n          </span>\n          <Link\n            to={`/work-items/${item.work_item_id}`}\n            className=\"font-medium text-primary hover:underline\"\n          >\n            {item.work_item_title}\n          </Link>\n        </p>\n        {item.description && (\n          <p className=\"text-xs text-muted-foreground mt-0.5 line-clamp-1\">\n            {item.description}\n          </p>\n        )}\n      </div>\n      <span className=\"text-xs text-muted-foreground whitespace-nowrap shrink-0\">\n        {formatRelativeTime(item.created_at)}\n      </span>\n    </div>\n  );\n}\n\n// ---------------------------------------------------------------------------\n// Main Component\n// ---------------------------------------------------------------------------\n\n/**\n * Dashboard page component.\n *\n * Fetches work items and activity data, then renders them in\n * a section-based layout with clear visual hierarchy.\n */\nexport function DashboardPage(): React.JSX.Element {\n  const navigate = useNavigate();\n\n  // Fetch work items and activity in parallel\n  const workItemsQuery = useWorkItems();\n  const activityQuery = useActivity(10);\n\n  // Derive task groups from work items\n  const taskGroups = useMemo(\n    () => groupTasksByStatus(workItemsQuery.data?.items ?? []),\n    [workItemsQuery.data],\n  );\n\n  // Count of total active tasks (max 10 shown)\n  const totalActiveTasks = useMemo(\n    () => taskGroups.reduce((sum, g) => sum + g.items.length, 0),\n    [taskGroups],\n  );\n\n  // Upcoming due items (all non-completed, limited to 5)\n  const upcomingItems = useMemo(() => {\n    const items = workItemsQuery.data?.items ?? [];\n    return items\n      .filter((i) => isDueWithinDays(i, 7))\n      .slice(0, 5);\n  }, [workItemsQuery.data]);\n\n  // Activity items (limited to 10)\n  const activityItems = useMemo(\n    () => (activityQuery.data?.items ?? []).slice(0, 10),\n    [activityQuery.data],\n  );\n\n  // Show loading skeleton if both queries are loading\n  const isInitialLoad = workItemsQuery.isLoading && activityQuery.isLoading;\n\n  if (isInitialLoad) {\n    return <DashboardSkeleton />;\n  }\n\n  return (\n    <div data-testid=\"page-dashboard\" className=\"p-6 space-y-8\">\n      {/* Welcome Header */}\n      <div data-testid=\"welcome-header\" className=\"space-y-1\">\n        <h1 className=\"text-2xl font-semibold text-foreground sm:text-3xl\">\n          {getGreeting()}\n        </h1>\n        <p className=\"text-sm text-muted-foreground\">\n          {formatCurrentDate()}\n        </p>\n      </div>\n\n      {/* Main grid: My Tasks + Upcoming Due */}\n      <div className=\"grid gap-6 lg:grid-cols-2\">\n        {/* My Tasks Section */}\n        <Card data-testid=\"section-my-tasks\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <CheckCircle2 className=\"size-5 text-primary\" />\n              My Tasks\n            </CardTitle>\n            <CardDescription>\n              {totalActiveTasks > 0\n                ? `${totalActiveTasks} active task${totalActiveTasks !== 1 ? 's' : ''}`\n                : 'Your assigned tasks'}\n            </CardDescription>\n          </CardHeader>\n          <CardContent>\n            {workItemsQuery.isLoading ? (\n              <div className=\"space-y-3\">\n                <SkeletonCard />\n                <SkeletonCard />\n              </div>\n            ) : taskGroups.length === 0 ? (\n              <div className=\"py-8 text-center\">\n                <CheckCircle2 className=\"mx-auto size-10 text-muted-foreground/30\" />\n                <p className=\"mt-3 text-sm font-medium text-muted-foreground\">\n                  No tasks assigned\n                </p>\n                <p className=\"mt-1 text-xs text-muted-foreground\">\n                  Tasks assigned to you will appear here.\n                </p>\n              </div>\n            ) : (\n              <div className=\"space-y-4\">\n                {taskGroups.map((group) => (\n                  <div key={group.key}>\n                    <div className=\"flex items-center gap-2 mb-2\">\n                      <span className={group.colorClass}>{group.icon}</span>\n                      <span className=\"text-xs font-medium text-muted-foreground uppercase tracking-wider\">\n                        {group.label}\n                      </span>\n                      <Badge variant=\"outline\" className=\"text-xs\">\n                        {group.items.length}\n                      </Badge>\n                    </div>\n                    <div className=\"space-y-2\">\n                      {group.items.slice(0, 10).map((item) => (\n                        <WorkItemCard key={item.id} item={item} />\n                      ))}\n                    </div>\n                  </div>\n                ))}\n                {totalActiveTasks > 0 && (\n                  <Link\n                    to=\"/work-items\"\n                    className=\"flex items-center justify-center gap-1 text-sm text-primary hover:underline py-2\"\n                  >\n                    View all tasks\n                    <ArrowRight className=\"size-3.5\" />\n                  </Link>\n                )}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Upcoming Due Section */}\n        <Card data-testid=\"section-upcoming-due\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-base\">\n              <Calendar className=\"size-5 text-orange-500\" />\n              Upcoming Due\n            </CardTitle>\n            <CardDescription>Items due within 7 days</CardDescription>\n          </CardHeader>\n          <CardContent>\n            {workItemsQuery.isLoading ? (\n              <div className=\"space-y-3\">\n                <SkeletonCard />\n                <SkeletonCard />\n              </div>\n            ) : upcomingItems.length === 0 ? (\n              <div className=\"py-8 text-center\">\n                <Calendar className=\"mx-auto size-10 text-muted-foreground/30\" />\n                <p className=\"mt-3 text-sm font-medium text-muted-foreground\">\n                  No upcoming deadlines\n                </p>\n                <p className=\"mt-1 text-xs text-muted-foreground\">\n                  Items with upcoming due dates will appear here.\n                </p>\n              </div>\n            ) : (\n              <div className=\"space-y-2\">\n                {upcomingItems.map((item) => (\n                  <WorkItemCard key={item.id} item={item} />\n                ))}\n              </div>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Recent Activity Section */}\n      <Card data-testid=\"section-recent-activity\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2 text-base\">\n            <Activity className=\"size-5 text-violet-500\" />\n            Recent Activity\n          </CardTitle>\n          <CardDescription>Latest updates across your projects</CardDescription>\n        </CardHeader>\n        <CardContent>\n          {activityQuery.isLoading ? (\n            <div className=\"space-y-3\">\n              <Skeleton width=\"100%\" height={40} />\n              <Skeleton width=\"100%\" height={40} />\n              <Skeleton width=\"100%\" height={40} />\n            </div>\n          ) : activityItems.length === 0 ? (\n            <div className=\"py-8 text-center\">\n              <Activity className=\"mx-auto size-10 text-muted-foreground/30\" />\n              <p className=\"mt-3 text-sm font-medium text-muted-foreground\">\n                No recent activity\n              </p>\n              <p className=\"mt-1 text-xs text-muted-foreground\">\n                Activity will appear here when work items are created or updated.\n              </p>\n            </div>\n          ) : (\n            <div className=\"divide-y divide-border\">\n              {activityItems.map((item) => (\n                <ActivityRow key={item.id} item={item} />\n              ))}\n              <div className=\"pt-3\">\n                <Link\n                  to=\"/activity\"\n                  className=\"flex items-center justify-center gap-1 text-sm text-primary hover:underline py-2\"\n                >\n                  View all activity\n                  <ArrowRight className=\"size-3.5\" />\n                </Link>\n              </div>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      {/* Quick Actions Section */}\n      <Card data-testid=\"section-quick-actions\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2 text-base\">\n            Quick Actions\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid gap-3 sm:grid-cols-3\">\n            <Button\n              variant=\"outline\"\n              className=\"h-auto flex-col gap-2 py-4\"\n              onClick={() => navigate('/work-items')}\n              data-testid=\"quick-action-create\"\n            >\n              <Plus className=\"size-5 text-primary\" />\n              <span className=\"text-sm font-medium\">Create Task</span>\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"h-auto flex-col gap-2 py-4\"\n              onClick={() => navigate('/work-items')}\n              data-testid=\"quick-action-search\"\n            >\n              <Search className=\"size-5 text-primary\" />\n              <span className=\"text-sm font-medium\">Search</span>\n            </Button>\n            <Button\n              variant=\"outline\"\n              className=\"h-auto flex-col gap-2 py-4\"\n              onClick={() => navigate('/work-items')}\n              data-testid=\"quick-action-projects\"\n            >\n              <FolderOpen className=\"size-5 text-primary\" />\n              <span className=\"text-sm font-medium\">Open Projects</span>\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":["getGreeting","hour","formatCurrentDate","getStatusInfo","status","formatRelativeTime","dateStr","date","diffMs","diffMins","diffHours","diffDays","getActivityLabel","type","groupTasksByStatus","items","activeStatuses","activeItems","item","jsx","Loader2","i","Circle","AlertTriangle","g","isDueWithinDays","_days","DashboardSkeleton","jsxs","Skeleton","SkeletonCard","WorkItemCard","statusInfo","priorityClass","priorityColors","Link","Badge","ArrowRight","ActivityRow","DashboardPage","navigate","useNavigate","workItemsQuery","useWorkItems","activityQuery","useActivity","taskGroups","useMemo","totalActiveTasks","sum","upcomingItems","activityItems","Card","CardHeader","CardTitle","CheckCircle2","CardDescription","CardContent","group","Calendar","Activity","Button","Plus","Search","FolderOpen"],"mappings":"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"}