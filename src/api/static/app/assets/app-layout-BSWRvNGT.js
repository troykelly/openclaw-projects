import{r as s,j as e,u as zt,a as Ft,O as Ht}from"./index-B0jGvhPy.js";import{c as Ce,u as mt,a as L,b as de,B as je}from"./button-CCiohzVt.js";import{P as Gt,c as Z,a as qt,b as Wt}from"./index-klPlCMKI.js";import{u as Q,a as Bt,R as Vt,A as Ut,P as Qt,b as Jt,c as ft,D as Yt,C as Xt}from"./index-xQcg4lbJ.js";import{P as pt,S as ht}from"./scroll-area-DqR4J_Ln.js";import{R as Zt,S as Ke,a as ze,b as Fe,c as He,d as ye}from"./select-CeQhap1d.js";import{P as ke}from"./plus-DR4zEbhv.js";import{B as Je}from"./bell-CR2Az-o8.js";import{F as ue}from"./folder-DCNYnIZ-.js";import{C as Ye,U as Xe,F as Ge}from"./users-Cag4sY_s.js";import{S as we}from"./search-rUAHapof.js";import{C as qe}from"./chevron-right-LPqUr2OU.js";import{D as Ne,a as Se,b as Ee,c as Te,d as Ie,R as er,P as tr,O as rr,C as nr,e as xt}from"./dialog-Dr6Neh0P.js";import{S as sr,P as q}from"./separator-QYg8CSWL.js";import{C as ar}from"./clock-fGQChX_l.js";import{U as or}from"./user-CUiuaq3n.js";import{I as We}from"./input-xGgLMeeZ.js";import{L as gt}from"./loader-circle-BtIUp28K.js";import{T as ir}from"./textarea-BizFXLE9.js";import{a as lr}from"./api-client-CDvRtWmo.js";import{r as cr}from"./work-item-utils-RZsWa1qH.js";const dr=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],ur=Ce("chevron-left",dr);const mr=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],fr=Ce("hash",mr);const pr=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],hr=Ce("house",pr);const xr=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],rt=Ce("settings",xr);var[Pe]=qt("Tooltip",[ft]),Re=ft(),vt="TooltipProvider",gr=700,Be="tooltip.open",[vr,Ze]=Pe(vt),bt=t=>{const{__scopeTooltip:r,delayDuration:n=gr,skipDelayDuration:o=300,disableHoverableContent:a=!1,children:i}=t,l=s.useRef(!0),d=s.useRef(!1),c=s.useRef(0);return s.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),e.jsx(vr,{scope:r,isOpenDelayedRef:l,delayDuration:n,onOpen:s.useCallback(()=>{window.clearTimeout(c.current),l.current=!1},[]),onClose:s.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>l.current=!0,o)},[o]),isPointerInTransitRef:d,onPointerInTransitChange:s.useCallback(u=>{d.current=u},[]),disableHoverableContent:a,children:i})};bt.displayName=vt;var me="Tooltip",[br,fe]=Pe(me),yt=t=>{const{__scopeTooltip:r,children:n,open:o,defaultOpen:a,onOpenChange:i,disableHoverableContent:l,delayDuration:d}=t,c=Ze(me,t.__scopeTooltip),u=Re(r),[p,f]=s.useState(null),v=Q(),x=s.useRef(0),y=l??c.disableHoverableContent,E=d??c.delayDuration,g=s.useRef(!1),[w,C]=Bt({prop:o,defaultProp:a??!1,onChange:h=>{h?(c.onOpen(),document.dispatchEvent(new CustomEvent(Be))):c.onClose(),i?.(h)},caller:me}),R=s.useMemo(()=>w?g.current?"delayed-open":"instant-open":"closed",[w]),T=s.useCallback(()=>{window.clearTimeout(x.current),x.current=0,g.current=!1,C(!0)},[C]),S=s.useCallback(()=>{window.clearTimeout(x.current),x.current=0,C(!1)},[C]),N=s.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{g.current=!0,C(!0),x.current=0},E)},[E,C]);return s.useEffect(()=>()=>{x.current&&(window.clearTimeout(x.current),x.current=0)},[]),e.jsx(Vt,{...u,children:e.jsx(br,{scope:r,contentId:v,open:w,stateAttribute:R,trigger:p,onTriggerChange:f,onTriggerEnter:s.useCallback(()=>{c.isOpenDelayedRef.current?N():T()},[c.isOpenDelayedRef,N,T]),onTriggerLeave:s.useCallback(()=>{y?S():(window.clearTimeout(x.current),x.current=0)},[S,y]),onOpen:T,onClose:S,disableHoverableContent:y,children:n})})};yt.displayName=me;var Ve="TooltipTrigger",jt=s.forwardRef((t,r)=>{const{__scopeTooltip:n,...o}=t,a=fe(Ve,n),i=Ze(Ve,n),l=Re(n),d=s.useRef(null),c=mt(r,d,a.onTriggerChange),u=s.useRef(!1),p=s.useRef(!1),f=s.useCallback(()=>u.current=!1,[]);return s.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),e.jsx(Ut,{asChild:!0,...l,children:e.jsx(Gt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...o,ref:c,onPointerMove:Z(t.onPointerMove,v=>{v.pointerType!=="touch"&&!p.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),p.current=!0)}),onPointerLeave:Z(t.onPointerLeave,()=>{a.onTriggerLeave(),p.current=!1}),onPointerDown:Z(t.onPointerDown,()=>{a.open&&a.onClose(),u.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Z(t.onFocus,()=>{u.current||a.onOpen()}),onBlur:Z(t.onBlur,a.onClose),onClick:Z(t.onClick,a.onClose)})})});jt.displayName=Ve;var et="TooltipPortal",[yr,jr]=Pe(et,{forceMount:void 0}),kt=t=>{const{__scopeTooltip:r,forceMount:n,children:o,container:a}=t,i=fe(et,r);return e.jsx(yr,{scope:r,forceMount:n,children:e.jsx(pt,{present:n||i.open,children:e.jsx(Qt,{asChild:!0,container:a,children:o})})})};kt.displayName=et;var ne="TooltipContent",wt=s.forwardRef((t,r)=>{const n=jr(ne,t.__scopeTooltip),{forceMount:o=n.forceMount,side:a="top",...i}=t,l=fe(ne,t.__scopeTooltip);return e.jsx(pt,{present:o||l.open,children:l.disableHoverableContent?e.jsx(Ct,{side:a,...i,ref:r}):e.jsx(kr,{side:a,...i,ref:r})})}),kr=s.forwardRef((t,r)=>{const n=fe(ne,t.__scopeTooltip),o=Ze(ne,t.__scopeTooltip),a=s.useRef(null),i=mt(r,a),[l,d]=s.useState(null),{trigger:c,onClose:u}=n,p=a.current,{onPointerInTransitChange:f}=o,v=s.useCallback(()=>{d(null),f(!1)},[f]),x=s.useCallback((y,E)=>{const g=y.currentTarget,w={x:y.clientX,y:y.clientY},C=Sr(w,g.getBoundingClientRect()),R=Er(w,C),T=Tr(E.getBoundingClientRect()),S=Pr([...R,...T]);d(S),f(!0)},[f]);return s.useEffect(()=>()=>v(),[v]),s.useEffect(()=>{if(c&&p){const y=g=>x(g,p),E=g=>x(g,c);return c.addEventListener("pointerleave",y),p.addEventListener("pointerleave",E),()=>{c.removeEventListener("pointerleave",y),p.removeEventListener("pointerleave",E)}}},[c,p,x,v]),s.useEffect(()=>{if(l){const y=E=>{const g=E.target,w={x:E.clientX,y:E.clientY},C=c?.contains(g)||p?.contains(g),R=!Ir(w,l);C?v():R&&(v(),u())};return document.addEventListener("pointermove",y),()=>document.removeEventListener("pointermove",y)}},[c,p,l,u,v]),e.jsx(Ct,{...t,ref:i})}),[wr,Cr]=Pe(me,{isInside:!1}),Nr=Wt("TooltipContent"),Ct=s.forwardRef((t,r)=>{const{__scopeTooltip:n,children:o,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:l,...d}=t,c=fe(ne,n),u=Re(n),{onClose:p}=c;return s.useEffect(()=>(document.addEventListener(Be,p),()=>document.removeEventListener(Be,p)),[p]),s.useEffect(()=>{if(c.trigger){const f=v=>{v.target?.contains(c.trigger)&&p()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,p]),e.jsx(Yt,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:f=>f.preventDefault(),onDismiss:p,children:e.jsxs(Xt,{"data-state":c.stateAttribute,...u,...d,ref:r,style:{...d.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Nr,{children:o}),e.jsx(wr,{scope:n,isInside:!0,children:e.jsx(Zt,{id:c.contentId,role:"tooltip",children:a||o})})]})})});wt.displayName=ne;var Nt="TooltipArrow",St=s.forwardRef((t,r)=>{const{__scopeTooltip:n,...o}=t,a=Re(n);return Cr(Nt,n).isInside?null:e.jsx(Jt,{...a,...o,ref:r})});St.displayName=Nt;function Sr(t,r){const n=Math.abs(r.top-t.y),o=Math.abs(r.bottom-t.y),a=Math.abs(r.right-t.x),i=Math.abs(r.left-t.x);switch(Math.min(n,o,a,i)){case i:return"left";case a:return"right";case n:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function Er(t,r,n=5){const o=[];switch(r){case"top":o.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":o.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":o.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":o.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return o}function Tr(t){const{top:r,right:n,bottom:o,left:a}=t;return[{x:a,y:r},{x:n,y:r},{x:n,y:o},{x:a,y:o}]}function Ir(t,r){const{x:n,y:o}=t;let a=!1;for(let i=0,l=r.length-1;i<r.length;l=i++){const d=r[i],c=r[l],u=d.x,p=d.y,f=c.x,v=c.y;p>o!=v>o&&n<(f-u)*(o-p)/(v-p)+u&&(a=!a)}return a}function Pr(t){const r=t.slice();return r.sort((n,o)=>n.x<o.x?-1:n.x>o.x?1:n.y<o.y?-1:n.y>o.y?1:0),Rr(r)}function Rr(t){if(t.length<=1)return t.slice();const r=[];for(let o=0;o<t.length;o++){const a=t[o];for(;r.length>=2;){const i=r[r.length-1],l=r[r.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))r.pop();else break}r.push(a)}r.pop();const n=[];for(let o=t.length-1;o>=0;o--){const a=t[o];for(;n.length>=2;){const i=n[n.length-1],l=n[n.length-2];if((i.x-l.x)*(a.y-l.y)>=(i.y-l.y)*(a.x-l.x))n.pop();else break}n.push(a)}return n.pop(),r.length===1&&n.length===1&&r[0].x===n[0].x&&r[0].y===n[0].y?r:r.concat(n)}var Dr=bt,_r=yt,Ar=jt,Lr=kt,Mr=wt,Or=St;function Et({delayDuration:t=0,...r}){return e.jsx(Dr,{"data-slot":"tooltip-provider",delayDuration:t,...r})}function ge({...t}){return e.jsx(Et,{children:e.jsx(_r,{"data-slot":"tooltip",...t})})}function ve({...t}){return e.jsx(Ar,{"data-slot":"tooltip-trigger",...t})}function be({className:t,sideOffset:r=0,children:n,...o}){return e.jsx(Lr,{children:e.jsxs(Mr,{"data-slot":"tooltip-content",sideOffset:r,className:L("bg-foreground text-background animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",t),...o,children:[n,e.jsx(Or,{className:"bg-foreground fill-foreground z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const $r=[{id:"activity",label:"Activity",icon:Je},{id:"projects",label:"Projects",icon:ue},{id:"timeline",label:"Timeline",icon:Ye},{id:"people",label:"People",icon:Xe}];function Kr({items:t=$r,activeItem:r="activity",onItemClick:n,onCreateClick:o,collapsed:a=!1,onCollapsedChange:i,className:l}){const d=()=>{i?.(!a)};return e.jsx(Et,{delayDuration:0,children:e.jsxs("aside",{"data-testid":"sidebar","data-collapsed":a,className:L("flex h-full flex-col border-r border-border bg-surface z-20 transition-all duration-300 ease-out",a?"w-16":"w-60",l),children:[e.jsxs("div",{className:"flex h-14 items-center px-4",children:[e.jsxs("div",{className:L("flex items-center gap-3",a&&"justify-center w-full"),children:[e.jsx("div",{className:"flex size-8 items-center justify-center rounded-lg bg-gradient-to-br from-primary to-primary/70 shadow-sm",children:e.jsx("span",{className:"text-sm font-bold text-primary-foreground",children:"O"})}),!a&&e.jsx("span",{className:"text-base font-semibold tracking-tight text-foreground",children:"OpenClaw Projects"})]}),!a&&e.jsx("button",{onClick:d,className:"ml-auto flex size-6 items-center justify-center rounded-md text-muted-foreground hover:bg-muted hover:text-foreground transition-colors","aria-label":"Collapse sidebar",children:e.jsx(ur,{className:"size-4"})})]}),o&&e.jsx("div",{className:"px-3 pt-4",children:e.jsxs(ge,{children:[e.jsx(ve,{asChild:!0,children:e.jsxs("button",{onClick:o,className:L("flex w-full items-center justify-center gap-2 rounded-lg bg-primary px-3 py-2.5 text-sm font-medium text-primary-foreground shadow-sm transition-colors hover:bg-primary/90",a&&"px-0"),"aria-label":"Create new work item",children:[e.jsx(ke,{className:"size-[18px] shrink-0"}),!a&&e.jsx("span",{children:"Create"})]})}),a&&e.jsxs(be,{side:"right",sideOffset:8,className:"font-medium",children:["Create ",e.jsx("kbd",{className:"ml-1 text-[10px]",children:"N"})]})]})}),e.jsx(ht,{className:"flex-1 px-3 py-4",children:e.jsx("nav",{className:"flex flex-col gap-1",role:"navigation","aria-label":"Main navigation",children:t.map(c=>{const u=c.icon,p=r===c.id,f=e.jsxs("button",{onClick:()=>{c.onClick?.(),n?.(c)},className:L("group flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all duration-150",a&&"justify-center px-0",p?"bg-primary/10 text-primary shadow-sm":"text-muted-foreground hover:bg-muted hover:text-foreground"),"aria-current":p?"page":void 0,children:[e.jsx(u,{className:L("size-[18px] shrink-0 transition-transform duration-150",!p&&"group-hover:scale-110")}),!a&&e.jsx("span",{children:c.label})]},c.id);return a?e.jsxs(ge,{children:[e.jsx(ve,{asChild:!0,children:f}),e.jsx(be,{side:"right",sideOffset:8,className:"font-medium",children:c.label})]},c.id):f})})}),e.jsxs("div",{className:"border-t border-border p-3 space-y-1",children:[e.jsxs(ge,{children:[e.jsx(ve,{asChild:!0,children:e.jsxs("button",{className:L("flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm text-muted-foreground transition-colors hover:bg-muted hover:text-foreground",a&&"justify-center px-0"),onClick:()=>n?.({id:"search",label:"Search",icon:we}),children:[e.jsx(we,{className:"size-[18px] shrink-0"}),!a&&e.jsxs("span",{className:"flex flex-1 items-center justify-between",children:[e.jsx("span",{children:"Search"}),e.jsx("kbd",{className:"hidden rounded border border-border bg-muted px-1.5 py-0.5 text-[10px] font-medium text-muted-foreground sm:inline-block",children:"⌘K"})]})]})}),a&&e.jsxs(be,{side:"right",sideOffset:8,className:"font-medium",children:["Search ",e.jsx("kbd",{className:"ml-1 text-[10px]",children:"⌘K"})]})]}),e.jsxs(ge,{children:[e.jsx(ve,{asChild:!0,children:e.jsxs("button",{className:L("flex w-full items-center gap-3 rounded-lg px-3 py-2.5 text-sm transition-colors",a&&"justify-center px-0",r==="settings"?"bg-primary/10 text-primary shadow-sm":"text-muted-foreground hover:bg-muted hover:text-foreground"),onClick:()=>n?.({id:"settings",label:"Settings",icon:rt}),children:[e.jsx(rt,{className:"size-[18px] shrink-0"}),!a&&e.jsx("span",{children:"Settings"})]})}),a&&e.jsx(be,{side:"right",sideOffset:8,className:"font-medium",children:"Settings"})]}),a&&e.jsx("button",{onClick:d,className:"mt-2 flex w-full items-center justify-center rounded-lg py-2 text-muted-foreground hover:bg-muted hover:text-foreground transition-colors","aria-label":"Expand sidebar",children:e.jsx(qe,{className:"size-4"})})]})]})})}const zr=[{id:"activity",label:"Activity",icon:Je},{id:"projects",label:"Projects",icon:ue},{id:"timeline",label:"Timeline",icon:Ye},{id:"people",label:"People",icon:Xe},{id:"search",label:"Search",icon:we}];function Fr({items:t=zr,activeItem:r="activity",onItemClick:n,className:o}){return e.jsx("nav",{"data-testid":"mobile-nav",className:L("fixed inset-x-0 bottom-0 z-50 h-16 items-center justify-around border-t border-border bg-surface","flex md:!hidden",o),style:{display:"var(--mobile-nav-display, flex)"},role:"navigation","aria-label":"Mobile navigation",children:t.map(a=>{const i=a.icon,l=r===a.id;return e.jsxs("button",{type:"button",onClick:()=>{a.onClick?.(),n?.(a)},className:L("flex flex-col items-center justify-center gap-1 px-3 py-2 text-muted-foreground transition-colors hover:text-foreground",l&&"text-primary"),"aria-current":l?"page":void 0,children:[e.jsx(i,{className:"size-5"}),e.jsx("span",{className:"text-[10px] font-medium",children:a.label})]},a.id)})})}function Hr({items:t,showHome:r=!0,onHomeClick:n,className:o}){return e.jsx("nav",{"data-testid":"breadcrumb","aria-label":"Breadcrumb",className:L("flex items-center gap-1 text-sm",o),children:e.jsxs("ol",{className:"flex items-center gap-1",children:[r&&e.jsxs("li",{className:"flex items-center",children:[e.jsx("button",{type:"button",onClick:n,className:"flex items-center text-muted-foreground hover:text-foreground transition-colors","aria-label":"Home",children:e.jsx(hr,{className:"size-4"})}),t.length>0&&e.jsx(qe,{className:"mx-1 size-4 text-muted-foreground","aria-hidden":"true"})]}),t.map((a,i)=>{const l=i===t.length-1;return e.jsx("li",{className:"flex items-center",children:l?e.jsx("span",{className:"font-medium text-foreground","aria-current":"page",children:a.label}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:a.onClick,className:"text-muted-foreground hover:text-foreground transition-colors",children:a.label}),e.jsx(qe,{className:"mx-1 size-4 text-muted-foreground","aria-hidden":"true"})]})},i)})]})})}const Gr=[{title:"Global",shortcuts:[{keys:["⌘","K"],description:"Open command palette"},{keys:["⌘","/"],description:"Show keyboard shortcuts"},{keys:["Esc"],description:"Close modal / cancel"}]},{title:"Navigation",shortcuts:[{keys:["G","A"],description:"Go to Activity"},{keys:["G","P"],description:"Go to Projects"},{keys:["G","T"],description:"Go to Timeline"},{keys:["G","C"],description:"Go to Contacts"},{keys:["G","S"],description:"Go to Settings"}]},{title:"Lists",shortcuts:[{keys:["J"],description:"Move down"},{keys:["K"],description:"Move up"},{keys:["Enter"],description:"Open selected item"},{keys:["⌫"],description:"Go back / up hierarchy"}]},{title:"Actions",shortcuts:[{keys:["N"],description:"New item"},{keys:["E"],description:"Edit current item"},{keys:["S"],description:"Change status"},{keys:["Space"],description:"Toggle selection"}]}];function _e({children:t}){return e.jsx("kbd",{className:"inline-flex h-5 min-w-5 items-center justify-center rounded border border-border bg-muted px-1.5 font-mono text-xs font-medium text-muted-foreground",children:t})}function qr(){const[t,r]=s.useState(!1),n=s.useCallback(o=>{const a=o.target;a.tagName==="INPUT"||a.tagName==="TEXTAREA"||a.isContentEditable||((o.metaKey||o.ctrlKey)&&o.key==="/"&&(o.preventDefault(),r(i=>!i)),o.key==="?"&&!o.metaKey&&!o.ctrlKey&&!o.altKey&&(o.preventDefault(),r(!0)))},[]);return s.useEffect(()=>(document.addEventListener("keydown",n),()=>document.removeEventListener("keydown",n)),[n]),e.jsx(Ne,{open:t,onOpenChange:r,children:e.jsxs(Se,{className:"sm:max-w-lg",children:[e.jsxs(Ee,{children:[e.jsx(Te,{children:"Keyboard Shortcuts"}),e.jsxs(Ie,{children:["Navigate and act faster with these shortcuts. Press"," ",e.jsx(_e,{children:"⌘"})," ",e.jsx(_e,{children:"/"})," to toggle this help."]})]}),e.jsx(ht,{className:"max-h-[60vh]",children:e.jsx("div",{className:"space-y-6 pr-4",children:Gr.map((o,a)=>e.jsxs("div",{children:[a>0&&e.jsx(sr,{className:"mb-4"}),e.jsx("h3",{className:"mb-3 text-sm font-medium text-foreground",children:o.title}),e.jsx("div",{className:"space-y-2",children:o.shortcuts.map(i=>e.jsxs("div",{className:"flex items-center justify-between py-1",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:i.description}),e.jsx("div",{className:"flex items-center gap-1",children:i.keys.map((l,d)=>e.jsxs(s.Fragment,{children:[e.jsx(_e,{children:l}),d<i.keys.length-1&&e.jsx("span",{className:"text-xs text-muted-foreground",children:"+"})]},d))})]},i.description))})]},o.title))})}),e.jsx("div",{className:"text-center text-xs text-muted-foreground",children:e.jsx("span",{className:"opacity-75",children:"Shortcuts are disabled when typing in text fields"})})]})})}const nt="sidebar-collapsed";function Wr({children:t,activeSection:r="activity",onSectionChange:n,onCreateClick:o,breadcrumbs:a=[],onBreadcrumbClick:i,onHomeClick:l,header:d,className:c}){const[u,p]=s.useState(()=>typeof window>"u"?!1:localStorage.getItem(nt)==="true"),f=s.useCallback(x=>{p(x),localStorage.setItem(nt,String(x))},[]),v=s.useCallback(x=>{n?.(x.id)},[n]);return s.useEffect(()=>{const x=y=>{(y.metaKey||y.ctrlKey)&&y.key==="k"&&(y.preventDefault(),n?.("search"))};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[n]),e.jsxs("div",{"data-testid":"app-shell",className:L("flex h-screen bg-background",c),children:[e.jsx("div",{className:"hidden md:block",children:e.jsx(Kr,{activeItem:r,onItemClick:v,onCreateClick:o,collapsed:u,onCollapsedChange:f})}),e.jsxs("main",{className:"flex flex-1 flex-col overflow-hidden",children:[e.jsxs("header",{className:"sticky top-0 z-10 flex h-14 shrink-0 items-center gap-4 border-b border-border bg-surface px-4",children:[a.length>0&&e.jsx(Hr,{items:a,onHomeClick:l}),d&&e.jsx("div",{className:"ml-auto flex items-center gap-2",children:d})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4 pb-20 md:p-6 md:pb-0",children:t})]}),e.jsx(Fr,{activeItem:r,onItemClick:v}),e.jsx(qr,{})]})}var st=1,Br=.9,Vr=.8,Ur=.17,Ae=.1,Le=.999,Qr=.9999,Jr=.99,Yr=/[\\\/_+.#"@\[\(\{&]/,Xr=/[\\\/_+.#"@\[\(\{&]/g,Zr=/[\s-]/,Tt=/[\s-]/g;function Ue(t,r,n,o,a,i,l){if(i===r.length)return a===t.length?st:Jr;var d=`${a},${i}`;if(l[d]!==void 0)return l[d];for(var c=o.charAt(i),u=n.indexOf(c,a),p=0,f,v,x,y;u>=0;)f=Ue(t,r,n,o,u+1,i+1,l),f>p&&(u===a?f*=st:Yr.test(t.charAt(u-1))?(f*=Vr,x=t.slice(a,u-1).match(Xr),x&&a>0&&(f*=Math.pow(Le,x.length))):Zr.test(t.charAt(u-1))?(f*=Br,y=t.slice(a,u-1).match(Tt),y&&a>0&&(f*=Math.pow(Le,y.length))):(f*=Ur,a>0&&(f*=Math.pow(Le,u-a))),t.charAt(u)!==r.charAt(i)&&(f*=Qr)),(f<Ae&&n.charAt(u-1)===o.charAt(i+1)||o.charAt(i+1)===o.charAt(i)&&n.charAt(u-1)!==o.charAt(i))&&(v=Ue(t,r,n,o,u+1,i+2,l),v*Ae>f&&(f=v*Ae)),f>p&&(p=f),u=n.indexOf(c,u+1);return l[d]=p,p}function at(t){return t.toLowerCase().replace(Tt," ")}function en(t,r,n){return t=n&&n.length>0?`${t+" "+n.join(" ")}`:t,Ue(t,r,at(t),at(r),0,0,{})}var oe='[cmdk-group=""]',Me='[cmdk-group-items=""]',tn='[cmdk-group-heading=""]',It='[cmdk-item=""]',ot=`${It}:not([aria-disabled="true"])`,Qe="cmdk-item-select",te="data-value",rn=(t,r,n)=>en(t,r,n),Pt=s.createContext(void 0),pe=()=>s.useContext(Pt),Rt=s.createContext(void 0),tt=()=>s.useContext(Rt),Dt=s.createContext(void 0),_t=s.forwardRef((t,r)=>{let n=re(()=>{var m,j;return{search:"",value:(j=(m=t.value)!=null?m:t.defaultValue)!=null?j:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),o=re(()=>new Set),a=re(()=>new Map),i=re(()=>new Map),l=re(()=>new Set),d=At(t),{label:c,children:u,value:p,onValueChange:f,filter:v,shouldFilter:x,loop:y,disablePointerSelection:E=!1,vimBindings:g=!0,...w}=t,C=Q(),R=Q(),T=Q(),S=s.useRef(null),N=pn();J(()=>{if(p!==void 0){let m=p.trim();n.current.value=m,h.emit()}},[p]),J(()=>{N(6,B)},[]);let h=s.useMemo(()=>({subscribe:m=>(l.current.add(m),()=>l.current.delete(m)),snapshot:()=>n.current,setState:(m,j,I)=>{var b,P,_,K;if(!Object.is(n.current[m],j)){if(n.current[m]=j,m==="search")X(),F(),N(1,se);else if(m==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let M=document.getElementById(T);M?M.focus():(b=document.getElementById(C))==null||b.focus()}if(N(7,()=>{var M;n.current.selectedItemId=(M=H())==null?void 0:M.id,h.emit()}),I||N(5,B),((P=d.current)==null?void 0:P.value)!==void 0){let M=j??"";(K=(_=d.current).onValueChange)==null||K.call(_,M);return}}h.emit()}},emit:()=>{l.current.forEach(m=>m())}}),[]),A=s.useMemo(()=>({value:(m,j,I)=>{var b;j!==((b=i.current.get(m))==null?void 0:b.value)&&(i.current.set(m,{value:j,keywords:I}),n.current.filtered.items.set(m,$(j,I)),N(2,()=>{F(),h.emit()}))},item:(m,j)=>(o.current.add(m),j&&(a.current.has(j)?a.current.get(j).add(m):a.current.set(j,new Set([m]))),N(3,()=>{X(),F(),n.current.value||se(),h.emit()}),()=>{i.current.delete(m),o.current.delete(m),n.current.filtered.items.delete(m);let I=H();N(4,()=>{X(),I?.getAttribute("id")===m&&se(),h.emit()})}),group:m=>(a.current.has(m)||a.current.set(m,new Set),()=>{i.current.delete(m),a.current.delete(m)}),filter:()=>d.current.shouldFilter,label:c||t["aria-label"],getDisablePointerSelection:()=>d.current.disablePointerSelection,listId:C,inputId:T,labelId:R,listInnerRef:S}),[]);function $(m,j){var I,b;let P=(b=(I=d.current)==null?void 0:I.filter)!=null?b:rn;return m?P(m,n.current.search,j):0}function F(){if(!n.current.search||d.current.shouldFilter===!1)return;let m=n.current.filtered.items,j=[];n.current.filtered.groups.forEach(b=>{let P=a.current.get(b),_=0;P.forEach(K=>{let M=m.get(K);_=Math.max(M,_)}),j.push([b,_])});let I=S.current;V().sort((b,P)=>{var _,K;let M=b.getAttribute("id"),xe=P.getAttribute("id");return((_=m.get(xe))!=null?_:0)-((K=m.get(M))!=null?K:0)}).forEach(b=>{let P=b.closest(Me);P?P.appendChild(b.parentElement===P?b:b.closest(`${Me} > *`)):I.appendChild(b.parentElement===I?b:b.closest(`${Me} > *`))}),j.sort((b,P)=>P[1]-b[1]).forEach(b=>{var P;let _=(P=S.current)==null?void 0:P.querySelector(`${oe}[${te}="${encodeURIComponent(b[0])}"]`);_?.parentElement.appendChild(_)})}function se(){let m=V().find(I=>I.getAttribute("aria-disabled")!=="true"),j=m?.getAttribute(te);h.setState("value",j||void 0)}function X(){var m,j,I,b;if(!n.current.search||d.current.shouldFilter===!1){n.current.filtered.count=o.current.size;return}n.current.filtered.groups=new Set;let P=0;for(let _ of o.current){let K=(j=(m=i.current.get(_))==null?void 0:m.value)!=null?j:"",M=(b=(I=i.current.get(_))==null?void 0:I.keywords)!=null?b:[],xe=$(K,M);n.current.filtered.items.set(_,xe),xe>0&&P++}for(let[_,K]of a.current)for(let M of K)if(n.current.filtered.items.get(M)>0){n.current.filtered.groups.add(_);break}n.current.filtered.count=P}function B(){var m,j,I;let b=H();b&&(((m=b.parentElement)==null?void 0:m.firstChild)===b&&((I=(j=b.closest(oe))==null?void 0:j.querySelector(tn))==null||I.scrollIntoView({block:"nearest"})),b.scrollIntoView({block:"nearest"}))}function H(){var m;return(m=S.current)==null?void 0:m.querySelector(`${It}[aria-selected="true"]`)}function V(){var m;return Array.from(((m=S.current)==null?void 0:m.querySelectorAll(ot))||[])}function ae(m){let j=V()[m];j&&h.setState("value",j.getAttribute(te))}function k(m){var j;let I=H(),b=V(),P=b.findIndex(K=>K===I),_=b[P+m];(j=d.current)!=null&&j.loop&&(_=P+m<0?b[b.length-1]:P+m===b.length?b[0]:b[P+m]),_&&h.setState("value",_.getAttribute(te))}function D(m){let j=H(),I=j?.closest(oe),b;for(;I&&!b;)I=m>0?mn(I,oe):fn(I,oe),b=I?.querySelector(ot);b?h.setState("value",b.getAttribute(te)):k(m)}let O=()=>ae(V().length-1),U=m=>{m.preventDefault(),m.metaKey?O():m.altKey?D(1):k(1)},he=m=>{m.preventDefault(),m.metaKey?ae(0):m.altKey?D(-1):k(-1)};return s.createElement(q.div,{ref:r,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:m=>{var j;(j=w.onKeyDown)==null||j.call(w,m);let I=m.nativeEvent.isComposing||m.keyCode===229;if(!(m.defaultPrevented||I))switch(m.key){case"n":case"j":{g&&m.ctrlKey&&U(m);break}case"ArrowDown":{U(m);break}case"p":case"k":{g&&m.ctrlKey&&he(m);break}case"ArrowUp":{he(m);break}case"Home":{m.preventDefault(),ae(0);break}case"End":{m.preventDefault(),O();break}case"Enter":{m.preventDefault();let b=H();if(b){let P=new Event(Qe);b.dispatchEvent(P)}}}}},s.createElement("label",{"cmdk-label":"",htmlFor:A.inputId,id:A.labelId,style:xn},c),De(t,m=>s.createElement(Rt.Provider,{value:h},s.createElement(Pt.Provider,{value:A},m))))}),nn=s.forwardRef((t,r)=>{var n,o;let a=Q(),i=s.useRef(null),l=s.useContext(Dt),d=pe(),c=At(t),u=(o=(n=c.current)==null?void 0:n.forceMount)!=null?o:l?.forceMount;J(()=>{if(!u)return d.item(a,l?.id)},[u]);let p=Lt(a,i,[t.value,t.children,i],t.keywords),f=tt(),v=W(N=>N.value&&N.value===p.current),x=W(N=>u||d.filter()===!1?!0:N.search?N.filtered.items.get(a)>0:!0);s.useEffect(()=>{let N=i.current;if(!(!N||t.disabled))return N.addEventListener(Qe,y),()=>N.removeEventListener(Qe,y)},[x,t.onSelect,t.disabled]);function y(){var N,h;E(),(h=(N=c.current).onSelect)==null||h.call(N,p.current)}function E(){f.setState("value",p.current,!0)}if(!x)return null;let{disabled:g,value:w,onSelect:C,forceMount:R,keywords:T,...S}=t;return s.createElement(q.div,{ref:de(i,r),...S,id:a,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!v,"data-disabled":!!g,"data-selected":!!v,onPointerMove:g||d.getDisablePointerSelection()?void 0:E,onClick:g?void 0:y},t.children)}),sn=s.forwardRef((t,r)=>{let{heading:n,children:o,forceMount:a,...i}=t,l=Q(),d=s.useRef(null),c=s.useRef(null),u=Q(),p=pe(),f=W(x=>a||p.filter()===!1?!0:x.search?x.filtered.groups.has(l):!0);J(()=>p.group(l),[]),Lt(l,d,[t.value,t.heading,c]);let v=s.useMemo(()=>({id:l,forceMount:a}),[a]);return s.createElement(q.div,{ref:de(d,r),...i,"cmdk-group":"",role:"presentation",hidden:f?void 0:!0},n&&s.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),De(t,x=>s.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},s.createElement(Dt.Provider,{value:v},x))))}),an=s.forwardRef((t,r)=>{let{alwaysRender:n,...o}=t,a=s.useRef(null),i=W(l=>!l.search);return!n&&!i?null:s.createElement(q.div,{ref:de(a,r),...o,"cmdk-separator":"",role:"separator"})}),on=s.forwardRef((t,r)=>{let{onValueChange:n,...o}=t,a=t.value!=null,i=tt(),l=W(u=>u.search),d=W(u=>u.selectedItemId),c=pe();return s.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),s.createElement(q.input,{ref:r,...o,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":d,id:c.inputId,type:"text",value:a?t.value:l,onChange:u=>{a||i.setState("search",u.target.value),n?.(u.target.value)}})}),ln=s.forwardRef((t,r)=>{let{children:n,label:o="Suggestions",...a}=t,i=s.useRef(null),l=s.useRef(null),d=W(u=>u.selectedItemId),c=pe();return s.useEffect(()=>{if(l.current&&i.current){let u=l.current,p=i.current,f,v=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let x=u.offsetHeight;p.style.setProperty("--cmdk-list-height",x.toFixed(1)+"px")})});return v.observe(u),()=>{cancelAnimationFrame(f),v.unobserve(u)}}},[]),s.createElement(q.div,{ref:de(i,r),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":d,"aria-label":o,id:c.listId},De(t,u=>s.createElement("div",{ref:de(l,c.listInnerRef),"cmdk-list-sizer":""},u)))}),cn=s.forwardRef((t,r)=>{let{open:n,onOpenChange:o,overlayClassName:a,contentClassName:i,container:l,...d}=t;return s.createElement(er,{open:n,onOpenChange:o},s.createElement(tr,{container:l},s.createElement(rr,{"cmdk-overlay":"",className:a}),s.createElement(nr,{"aria-label":t.label,"cmdk-dialog":"",className:i},s.createElement(_t,{ref:r,...d}))))}),dn=s.forwardRef((t,r)=>W(n=>n.filtered.count===0)?s.createElement(q.div,{ref:r,...t,"cmdk-empty":"",role:"presentation"}):null),un=s.forwardRef((t,r)=>{let{progress:n,children:o,label:a="Loading...",...i}=t;return s.createElement(q.div,{ref:r,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},De(t,l=>s.createElement("div",{"aria-hidden":!0},l)))}),Y=Object.assign(_t,{List:ln,Item:nn,Input:on,Group:sn,Separator:an,Dialog:cn,Empty:dn,Loading:un});function mn(t,r){let n=t.nextElementSibling;for(;n;){if(n.matches(r))return n;n=n.nextElementSibling}}function fn(t,r){let n=t.previousElementSibling;for(;n;){if(n.matches(r))return n;n=n.previousElementSibling}}function At(t){let r=s.useRef(t);return J(()=>{r.current=t}),r}var J=typeof window>"u"?s.useEffect:s.useLayoutEffect;function re(t){let r=s.useRef();return r.current===void 0&&(r.current=t()),r}function W(t){let r=tt(),n=()=>t(r.snapshot());return s.useSyncExternalStore(r.subscribe,n,n)}function Lt(t,r,n,o=[]){let a=s.useRef(),i=pe();return J(()=>{var l;let d=(()=>{var u;for(let p of n){if(typeof p=="string")return p.trim();if(typeof p=="object"&&"current"in p)return p.current?(u=p.current.textContent)==null?void 0:u.trim():a.current}})(),c=o.map(u=>u.trim());i.value(t,d,c),(l=r.current)==null||l.setAttribute(te,d),a.current=d}),a}var pn=()=>{let[t,r]=s.useState(),n=re(()=>new Map);return J(()=>{n.current.forEach(o=>o()),n.current=new Map},[t]),(o,a)=>{n.current.set(o,a),r({})}};function hn(t){let r=t.type;return typeof r=="function"?r(t.props):"render"in r?r.render(t.props):t}function De({asChild:t,children:r},n){return t&&s.isValidElement(r)?s.cloneElement(hn(r),{ref:r.ref},n(r.props.children)):n(r)}var xn={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function gn({className:t,...r}){return e.jsx(Y,{"data-slot":"command",className:L("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",t),...r})}function vn({title:t="Command Palette",description:r="Search for a command to run...",children:n,className:o,showCloseButton:a=!0,...i}){return e.jsxs(Ne,{...i,children:[e.jsxs(Ee,{className:"sr-only",children:[e.jsx(Te,{children:t}),e.jsx(Ie,{children:r})]}),e.jsx(Se,{className:L("overflow-hidden p-0",o),showCloseButton:a,children:e.jsx(gn,{className:"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:n})})]})}function bn({className:t,...r}){return e.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[e.jsx(we,{className:"size-4 shrink-0 opacity-50"}),e.jsx(Y.Input,{"data-slot":"command-input",className:L("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",t),...r})]})}function yn({className:t,...r}){return e.jsx(Y.List,{"data-slot":"command-list",className:L("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",t),...r})}function jn({...t}){return e.jsx(Y.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...t})}function ie({className:t,...r}){return e.jsx(Y.Group,{"data-slot":"command-group",className:L("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",t),...r})}function Oe({className:t,...r}){return e.jsx(Y.Separator,{"data-slot":"command-separator",className:L("bg-border -mx-1 h-px",t),...r})}function G({className:t,...r}){return e.jsx(Y.Item,{"data-slot":"command-item",className:L("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...r})}function it({className:t,...r}){return e.jsx("span",{"data-slot":"command-shortcut",className:L("text-muted-foreground ml-auto text-xs tracking-widest",t),...r})}const lt="command-palette-recent",kn=5;function ct(t){switch(t){case"project":return e.jsx(ue,{className:"size-4"});case"issue":return e.jsx(Ge,{className:"size-4"});case"contact":return e.jsx(or,{className:"size-4"});case"epic":return e.jsx(fr,{className:"size-4"});case"initiative":return e.jsx(ue,{className:"size-4"});default:return e.jsx(Ge,{className:"size-4"})}}function wn({open:t,onOpenChange:r,onSearch:n,onSelect:o,onNavigate:a,recentItems:i}){const[l,d]=s.useState(t??!1),[c,u]=s.useState(""),[p,f]=s.useState([]),[v,x]=s.useState(!1),[y,E]=s.useState(()=>{if(i)return i;if(typeof window>"u")return[];try{const h=localStorage.getItem(lt);return h?JSON.parse(h):[]}catch{return[]}});s.useEffect(()=>{t!==void 0&&d(t)},[t]),s.useEffect(()=>{const h=A=>{(A.metaKey||A.ctrlKey)&&A.key==="k"&&(A.preventDefault(),d($=>!$))};return window.addEventListener("keydown",h),()=>window.removeEventListener("keydown",h)},[]),s.useEffect(()=>{if(!c.trim()||!n){f([]);return}const h=setTimeout(async()=>{x(!0);try{const A=await n(c);f(A)}catch(A){console.error("Search failed:",A),f([])}finally{x(!1)}},200);return()=>clearTimeout(h)},[c,n]);const g=s.useCallback(h=>{d(h),r?.(h),h||(u(""),f([]))},[r]),w=s.useCallback(h=>{const A=[{id:h.id,type:h.type,title:h.title,timestamp:new Date},...y.filter($=>$.id!==h.id)].slice(0,kn);E(A),typeof window<"u"&&localStorage.setItem(lt,JSON.stringify(A)),o?.(h),g(!1)},[y,o,g]),C=s.useCallback(h=>{a?.(h),g(!1)},[a,g]),R=s.useCallback(h=>{o?.(h),g(!1)},[o,g]),{filteredQuery:T,typeFilter:S}=s.useMemo(()=>{const h=c.match(/^(@|#|!)(\S*)\s*(.*)/);if(h){const[,A,,$]=h;let F;return A==="@"?F="contact":A==="#"?F="project":A==="!"&&(F="issue"),{filteredQuery:$||"",typeFilter:F}}return{filteredQuery:c,typeFilter:void 0}},[c]),N=S?p.filter(h=>h.type===S):p;return e.jsxs(vn,{open:l,onOpenChange:g,title:"Command Palette",description:"Search for commands, projects, issues, or contacts",children:[e.jsx(bn,{placeholder:"Type a command or search...",value:c,onValueChange:u}),e.jsxs(yn,{children:[e.jsx(jn,{children:v?"Searching...":"No results found."}),N.length>0&&e.jsx(ie,{heading:S?`${S}s`:"Search Results",children:N.map(h=>e.jsxs(G,{value:`${h.type}-${h.id}-${h.title}`,onSelect:()=>w(h),children:[ct(h.type),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:h.title}),h.subtitle&&e.jsx("span",{className:"text-xs text-muted-foreground",children:h.subtitle})]})]},`${h.type}-${h.id}`))}),!c&&y.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(ie,{heading:"Recent",children:y.map(h=>e.jsxs(G,{value:`recent-${h.type}-${h.id}-${h.title}`,onSelect:()=>w(h),children:[e.jsx(ar,{className:"size-4 text-muted-foreground"}),ct(h.type),e.jsx("span",{children:h.title})]},`recent-${h.type}-${h.id}`))}),e.jsx(Oe,{})]}),!c&&e.jsxs(ie,{heading:"Actions",children:[e.jsxs(G,{onSelect:()=>R("create-issue"),children:[e.jsx(ke,{className:"size-4"}),e.jsx("span",{children:"Create new issue"}),e.jsx(it,{children:"⌘I"})]}),e.jsxs(G,{onSelect:()=>R("create-project"),children:[e.jsx(ke,{className:"size-4"}),e.jsx("span",{children:"Create new project"}),e.jsx(it,{children:"⌘P"})]})]}),!c&&e.jsxs(e.Fragment,{children:[e.jsx(Oe,{}),e.jsxs(ie,{heading:"Navigate",children:[e.jsxs(G,{onSelect:()=>C("activity"),children:[e.jsx(Je,{className:"size-4"}),e.jsx("span",{children:"Activity"})]}),e.jsxs(G,{onSelect:()=>C("projects"),children:[e.jsx(ue,{className:"size-4"}),e.jsx("span",{children:"Projects"})]}),e.jsxs(G,{onSelect:()=>C("timeline"),children:[e.jsx(Ye,{className:"size-4"}),e.jsx("span",{children:"Timeline"})]}),e.jsxs(G,{onSelect:()=>C("people"),children:[e.jsx(Xe,{className:"size-4"}),e.jsx("span",{children:"People"})]})]})]}),!c&&e.jsxs(e.Fragment,{children:[e.jsx(Oe,{}),e.jsx(ie,{heading:"Search Tips",children:e.jsx(G,{disabled:!0,children:e.jsxs("span",{className:"text-muted-foreground",children:[e.jsx("kbd",{className:"rounded border bg-muted px-1 text-xs",children:"@"})," contacts",e.jsx("kbd",{className:"ml-2 rounded border bg-muted px-1 text-xs",children:"#"})," projects",e.jsx("kbd",{className:"ml-2 rounded border bg-muted px-1 text-xs",children:"!"})," issues"]})})})]})]})]})}const Cn=s.createContext(null);function Mt(){const t=s.useContext(Cn);return t||{isEnabled:!0,setEnabled:()=>{}}}function Ot(t){if(!t||!(t instanceof HTMLElement))return!1;const r=t.tagName.toLowerCase();return r==="input"||r==="textarea"||r==="select"||t.isContentEditable}function Nn(t){const r=t.toLowerCase().split("+");return{key:r[r.length-1],ctrl:r.includes("ctrl"),meta:r.includes("meta")||r.includes("cmd"),alt:r.includes("alt"),shift:r.includes("shift")}}function dt(t){const r={escape:"escape",esc:"escape",enter:"enter",return:"enter",space:" ",backspace:"backspace",delete:"delete",arrowup:"arrowup",arrowdown:"arrowdown",arrowleft:"arrowleft",arrowright:"arrowright"},n=t.toLowerCase();return r[n]||n}function Sn(t,r){const n=dt(t.key),o=dt(r.key),a=n===o,i=r.ctrl===t.ctrlKey,l=r.meta===t.metaKey,d=r.alt===t.altKey,c=!r.shift||r.shift===t.shiftKey;return a&&i&&l&&d&&c}function z(t,r,n={}){const{isEnabled:o}=Mt(),{enabled:a=!0}=n,i=s.useRef(r);i.current=r;const l=Nn(t),d=s.useCallback(c=>{!a||!o||Ot(c.target)||Sn(c,l)&&(c.preventDefault(),i.current(c))},[a,o,l.key,l.ctrl,l.meta,l.alt,l.shift]);s.useEffect(()=>(document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)),[d])}function le(t,r,n={}){const{isEnabled:o}=Mt(),{timeout:a=1e3,enabled:i=!0}=n,l=s.useRef(r);l.current=r;const d=s.useRef([]),c=s.useRef(null),u=s.useCallback(()=>{d.current=[],c.current&&(clearTimeout(c.current),c.current=null)},[]),p=s.useCallback(f=>{if(!i||!o||Ot(f.target))return;const v=f.key.toLowerCase();c.current&&clearTimeout(c.current),d.current.push(v);const x=d.current,y=t.map(g=>g.toLowerCase());let E=!0;for(let g=0;g<x.length;g++)if(x[g]!==y[g]){E=!1;break}if(E&&x.length===y.length){f.preventDefault(),u(),l.current(f);return}if(!E)if(v===y[0])d.current=[v];else{u();return}c.current=setTimeout(u,a)},[i,o,t,a,u]);s.useEffect(()=>(document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p),u()}),[p,u])}function En({onNavigate:t,onSearch:r,onNewItem:n,onNewItemFullForm:o,onEdit:a,onDelete:i,onChangeStatus:l,onMoveUp:d,onMoveDown:c,onSelect:u,onBack:p,onOpenSelected:f}){const v=s.useCallback(()=>t?.("activity"),[t]),x=s.useCallback(()=>t?.("projects"),[t]),y=s.useCallback(()=>t?.("timeline"),[t]),E=s.useCallback(()=>t?.("people"),[t]),g=s.useCallback(()=>t?.("settings"),[t]);return le(["g","a"],v),le(["g","p"],x),le(["g","t"],y),le(["g","c"],E),le(["g","s"],g),z("meta+k",()=>r?.()),z("ctrl+k",()=>r?.()),z("j",()=>c?.()),z("k",()=>d?.()),z("enter",()=>f?.()),z("backspace",()=>p?.()),z("n",()=>n?.()),z("shift+n",()=>o?.()),z("e",()=>a?.()),z("d",()=>i?.()),z("s",()=>l?.()),z(" ",()=>u?.()),null}const Tn={project:"Project",initiative:"Initiative",epic:"Epic",issue:"Issue"};function In({open:t,onOpenChange:r,onCreated:n,defaultParentId:o,defaultKind:a="issue"}){const[i,l]=s.useState(""),[d,c]=s.useState(a),[u,p]=s.useState(!1),[f,v]=s.useState(null),x=s.useCallback(()=>{l(""),c(a),v(null)},[a]),y=s.useCallback(async()=>{if(u)return;p(!0),v(null);const w={title:i.trim(),kind:d,parentId:o??null};try{const C=await fetch("/api/work-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(!C.ok){const S=(await C.json().catch(()=>({}))).error??`Failed to create work item (${C.status})`;v(S),p(!1);return}const R=await C.json();n?.(R),x(),r(!1)}catch(C){v(C instanceof Error?C.message:"Network error")}finally{p(!1)}},[i,d,o,u,n,r,x]),E=s.useCallback(w=>{w.key==="Enter"&&!w.shiftKey&&(w.preventDefault(),y()),w.key==="Escape"&&r(!1)},[y,r]),g=s.useCallback(w=>{w||x(),r(w)},[r,x]);return e.jsx(Ne,{open:t,onOpenChange:g,children:e.jsxs(Se,{className:"sm:max-w-md",children:[e.jsxs(Ee,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(ke,{className:"size-5"}),"Quick Add"]}),e.jsx(Ie,{children:"Create a new work item quickly."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Ke,{value:d,onValueChange:w=>c(w),children:[e.jsx(ze,{className:"w-[140px]","aria-label":"Kind",children:e.jsx(Fe,{placeholder:"Kind"})}),e.jsx(He,{children:Object.entries(Tn).map(([w,C])=>e.jsx(ye,{value:w,children:C},w))})]}),e.jsx(We,{placeholder:"Title...",value:i,onChange:w=>l(w.target.value),onKeyDown:E,className:"flex-1",autoFocus:!0})]}),f&&e.jsx("p",{className:"text-sm text-destructive",role:"alert",children:f})]}),e.jsxs(xt,{children:[e.jsx(je,{variant:"outline",onClick:()=>g(!1),disabled:u,children:"Cancel"}),e.jsx(je,{onClick:y,disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"mr-2 size-4 animate-spin"}),"Creating..."]}):"Create"})]})]})})}var Pn="Label",$t=s.forwardRef((t,r)=>e.jsx(q.label,{...t,ref:r,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));$t.displayName=Pn;var Rn=$t;function ce({className:t,...r}){return e.jsx(Rn,{"data-slot":"label",className:L("flex items-center gap-2 text-sm font-medium leading-none select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}const ee={project:"Project",initiative:"Initiative",epic:"Epic",issue:"Issue"},Dn={project:"Top-level container for initiatives",initiative:"Strategic goal or theme (belongs to a project)",epic:"Large body of work (belongs to an initiative)",issue:"Specific task or bug (belongs to an epic)"},$e={project:null,initiative:"project",epic:"initiative",issue:"epic"};function Kt(t,r=0){const n=[];for(const o of t)n.push({id:o.id,title:o.title,kind:o.kind,depth:r}),o.children?.length>0&&n.push(...Kt(o.children,r+1));return n}function _n({open:t,onOpenChange:r,onCreated:n,defaultParentId:o,defaultKind:a="issue"}){const[i,l]=s.useState(""),[d,c]=s.useState(a),[u,p]=s.useState(""),[f,v]=s.useState(o),[x,y]=s.useState(""),[E,g]=s.useState(!1),[w,C]=s.useState(null),[R,T]=s.useState({}),[S,N]=s.useState([]),[h,A]=s.useState(!1);s.useEffect(()=>{if(!t)return;async function k(){A(!0);try{const D=await fetch("/api/work-items/tree",{headers:{accept:"application/json"}});if(D.ok){const O=await D.json();N(Kt(O.items))}}catch{}finally{A(!1)}}k()},[t]);const $=s.useCallback(()=>{l(""),c(a),p(""),v(o),y(""),C(null),T({})},[a,o]),F=s.useCallback(()=>{const k={};i.trim()||(k.title="Title is required");const D=$e[d];if(D&&!f&&d!=="issue"&&(k.parent=`${ee[d]} requires a parent ${ee[D]}`),f&&D){const O=S.find(U=>U.id===f);O&&O.kind!==D&&(k.parent=`${ee[d]} parent must be a ${ee[D]}`)}if(x){const O=parseInt(x,10);(isNaN(O)||O<0||O>525600)&&(k.estimate="Estimate must be between 0 and 525600 minutes")}return T(k),Object.keys(k).length===0},[i,d,f,S,x]),se=s.useCallback(async()=>{if(E||!F())return;g(!0),C(null);const k={title:i.trim(),kind:d,description:u.trim()||void 0,parentId:f??null,estimateMinutes:x?parseInt(x,10):null};try{const D=await fetch("/api/work-items",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)});if(!D.ok){const he=(await D.json().catch(()=>({}))).error??`Failed to create work item (${D.status})`;C(he),g(!1);return}const O=await D.json();n?.(O),$(),r(!1)}catch(D){C(D instanceof Error?D.message:"Network error")}finally{g(!1)}},[i,d,u,f,x,E,F,n,r,$]),X=s.useCallback(k=>{k||$(),r(k)},[r,$]),B=$e[d],H=B?S.filter(k=>k.kind===B):[],V=d!=="project",ae=d==="issue"||d==="epic";return e.jsx(Ne,{open:t,onOpenChange:X,children:e.jsxs(Se,{className:"sm:max-w-lg",children:[e.jsxs(Ee,{children:[e.jsxs(Te,{className:"flex items-center gap-2",children:[e.jsx(Ge,{className:"size-5"}),"Create Work Item"]}),e.jsx(Ie,{children:"Fill in the details to create a new work item."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{htmlFor:"title",children:"Title"}),e.jsx(We,{id:"title",placeholder:"Enter title...",value:i,onChange:k=>l(k.target.value),"aria-invalid":!!R.title,autoFocus:!0}),R.title&&e.jsx("p",{className:"text-sm text-destructive",children:R.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{htmlFor:"kind",children:"Kind"}),e.jsxs(Ke,{value:d,onValueChange:k=>{if(c(k),f){const D=$e[k];S.find(U=>U.id===f)?.kind!==D&&v(void 0)}},children:[e.jsx(ze,{id:"kind","aria-label":"Kind",children:e.jsx(Fe,{placeholder:"Select kind"})}),e.jsx(He,{children:Object.entries(ee).map(([k,D])=>e.jsx(ye,{value:k,children:e.jsxs("span",{className:"flex flex-col",children:[e.jsx("span",{children:D}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Dn[k]})]})},k))})]})]}),V&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{htmlFor:"parent",children:"Parent"}),e.jsxs(Ke,{value:f??"__none__",onValueChange:k=>v(k==="__none__"?void 0:k),disabled:d==="project"||h,children:[e.jsx(ze,{id:"parent","aria-label":"Parent",disabled:d==="project"||h,children:e.jsx(Fe,{placeholder:h?"Loading...":H.length===0?`No ${B?ee[B]+"s":"parents"} available`:"Select parent..."})}),e.jsxs(He,{children:[e.jsx(ye,{value:"__none__",children:"None"}),H.map(k=>e.jsx(ye,{value:k.id,children:e.jsx("span",{style:{paddingLeft:`${k.depth*12}px`},children:k.title})},k.id))]})]}),R.parent&&e.jsx("p",{className:"text-sm text-destructive",children:R.parent})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{htmlFor:"description",children:"Description"}),e.jsx(ir,{id:"description",placeholder:"Enter description...",value:u,onChange:k=>p(k.target.value),rows:3})]}),ae&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(ce,{htmlFor:"estimate",children:"Estimate (minutes)"}),e.jsx(We,{id:"estimate",type:"number",placeholder:"e.g., 60",value:x,onChange:k=>y(k.target.value),min:0,max:525600,"aria-invalid":!!R.estimate}),R.estimate&&e.jsx("p",{className:"text-sm text-destructive",children:R.estimate})]}),w&&e.jsx("p",{className:"text-sm text-destructive",role:"alert",children:w})]}),e.jsxs(xt,{children:[e.jsx(je,{variant:"outline",onClick:()=>X(!1),disabled:E,children:"Cancel"}),e.jsx(je,{onClick:se,disabled:E,children:E?e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"mr-2 size-4 animate-spin"}),"Creating..."]}):"Create"})]})]})})}function An(t){return t.startsWith("/activity")?"activity":t.startsWith("/timeline")?"timeline":t.startsWith("/contacts")?"people":t.startsWith("/communications")?"communications":t.startsWith("/settings")?"settings":(t.startsWith("/work-items")||t.startsWith("/kanban"),"projects")}const ut={activity:"/activity",projects:"/work-items",timeline:"/timeline",people:"/contacts",communications:"/communications",settings:"/settings"};function Ln(t,r){if(t.startsWith("/activity"))return[{id:"activity",label:"Activity"}];if(t.startsWith("/timeline"))return[{id:"timeline",label:"Timeline"}];if(t.startsWith("/contacts"))return[{id:"contacts",label:"People"}];if(t.startsWith("/communications"))return[{id:"communications",label:"Communications"}];if(t.startsWith("/settings"))return[{id:"settings",label:"Settings"}];const n=[{id:"work-items",label:"Projects",href:"/work-items"}];if(t.startsWith("/kanban"))return n.push({id:"kanban",label:"Kanban Board"}),n;const o=/^\/work-items\/([^/]+)\/timeline\/?$/.exec(t);if(o){const l=o[1];return n.push({id:"detail",label:r?.workItem?.title||l,href:`/work-items/${l}`},{id:"timeline",label:"Timeline"}),n}const a=/^\/work-items\/([^/]+)\/graph\/?$/.exec(t);if(a){const l=a[1];return n.push({id:"detail",label:r?.workItem?.title||l,href:`/work-items/${l}`},{id:"graph",label:"Dependencies"}),n}const i=/^\/work-items\/([^/]+)\/?$/.exec(t);if(i){const l=i[1];return n.push({id:"detail",label:r?.workItem?.title||l}),n}return n}function ns(){const t=zt(),r=Ft(),n=cr(),[o,a]=s.useState(!1),[i,l]=s.useState(!1),[d,c]=s.useState(void 0),u=s.useMemo(()=>An(t.pathname),[t.pathname]),p=s.useMemo(()=>Ln(t.pathname,n),[t.pathname,n]),f=s.useCallback(T=>{const S=ut[T];S&&r(S)},[r]),v=s.useCallback(async T=>{try{return(await lr.get(`/api/search?q=${encodeURIComponent(T)}&limit=10`)).results.map(N=>({id:N.id,type:N.type==="work_item"?"issue":N.type==="contact"?"contact":"issue",title:N.title,subtitle:N.description?.slice(0,80)||void 0,href:N.url}))}catch{return[]}},[]),x=s.useCallback(T=>{if(typeof T=="string")(T==="create-issue"||T==="create-project")&&r("/work-items");else if(T.href){const S=T.href.startsWith("/app/")?T.href.replace("/app",""):T.href;r(S)}else r(`/work-items/${T.id}`)},[r]),y=s.useCallback(T=>{const S=ut[T];S&&r(S)},[r]),E=s.useCallback(()=>{f("search")},[f]),g=s.useMemo(()=>/^\/work-items\/([^/]+)/.exec(t.pathname)?.[1],[t.pathname]),w=s.useCallback(()=>{c(g||void 0),a(!0)},[g]),C=s.useCallback(T=>{r(`/work-items/${T.id}`)},[r]),R=s.useCallback(()=>{c(g||void 0),l(!0)},[g]);return e.jsxs(e.Fragment,{children:[e.jsx(En,{onNavigate:y,onSearch:E,onNewItem:w,onNewItemFullForm:R}),e.jsx(In,{open:o,onOpenChange:a,onCreated:C,defaultParentId:d}),e.jsx(_n,{open:i,onOpenChange:l,onCreated:C,defaultParentId:d}),e.jsx(wn,{onSearch:v,onSelect:x,onNavigate:y}),e.jsx(Wr,{activeSection:u,onSectionChange:f,onCreateClick:R,breadcrumbs:p,onHomeClick:()=>r("/work-items"),children:e.jsx(Ht,{})})]})}export{ns as AppLayout};
//# sourceMappingURL=app-layout-BSWRvNGT.js.map
