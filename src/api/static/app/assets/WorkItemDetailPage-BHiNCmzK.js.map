{"version":3,"file":"WorkItemDetailPage-BHiNCmzK.js","sources":["../../../../../node_modules/.pnpm/@tanstack+query-core@5.90.20/node_modules/@tanstack/query-core/build/modern/mutationObserver.js","../../../../../node_modules/.pnpm/@tanstack+react-query@5.90.20_react@19.2.4/node_modules/@tanstack/react-query/build/modern/useMutation.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/activity.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/arrow-right.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/bold.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/brain.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/code.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/git-branch.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/italic.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/list-ordered.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/pen-line.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/pen.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/square-check-big.js","../../../../ui/hooks/queries/use-memories.ts","../../../../ui/hooks/queries/use-communications.ts","../../../../ui/hooks/mutations/use-update-work-item.ts","../../../../ui/hooks/mutations/use-create-memory.ts","../../../../ui/hooks/mutations/use-update-memory.ts","../../../../ui/components/detail/item-header.tsx","../../../../ui/components/detail/metadata-grid.tsx","../../../../ui/components/detail/description-editor.tsx","../../../../../node_modules/.pnpm/@radix-ui+react-checkbox@1.3.3_@types+react-dom@19.2.3_@types+react@19.2.10__@types+rea_5132bbb1edf049509ad81076406f08e7/node_modules/@radix-ui/react-checkbox/dist/index.mjs","../../../../ui/components/ui/checkbox.tsx","../../../../ui/components/detail/todo-list.tsx","../../../../ui/components/detail/dependencies-section.tsx","../../../../ui/components/memory/memory-card.tsx","../../../../ui/components/memory/item-memories.tsx","../../../../ui/components/memory/memory-editor.tsx","../../../../ui/components/communications/item-communications.tsx","../../../../ui/pages/WorkItemDetailPage.tsx"],"sourcesContent":["// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const onMutateResult = this.#currentResult.context;\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey\n        };\n        if (action?.type === \"success\") {\n          try {\n            this.#mutateOptions.onSuccess?.(\n              action.data,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n          try {\n            this.#mutateOptions.onSettled?.(\n              action.data,\n              null,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n        } else if (action?.type === \"error\") {\n          try {\n            this.#mutateOptions.onError?.(\n              action.error,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n          try {\n            this.#mutateOptions.onSettled?.(\n              void 0,\n              action.error,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n//# sourceMappingURL=mutationObserver.js.map","\"use client\";\n\n// src/useMutation.ts\nimport * as React from \"react\";\nimport {\n  MutationObserver,\n  noop,\n  notifyManager,\n  shouldThrowError\n} from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(\n    () => new MutationObserver(\n      client,\n      options\n    )\n  );\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  const mutate = React.useCallback(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop);\n    },\n    [observer]\n  );\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n  return { ...result, mutate, mutateAsync: result.mutate };\n}\nexport {\n  useMutation\n};\n//# sourceMappingURL=useMutation.js.map","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2\",\n      key: \"169zse\"\n    }\n  ]\n];\nconst Activity = createLucideIcon(\"activity\", __iconNode);\n\nexport { __iconNode, Activity as default };\n//# sourceMappingURL=activity.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"m12 5 7 7-7 7\", key: \"xquz4c\" }]\n];\nconst ArrowRight = createLucideIcon(\"arrow-right\", __iconNode);\n\nexport { __iconNode, ArrowRight as default };\n//# sourceMappingURL=arrow-right.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8\", key: \"mg9rjx\" }\n  ]\n];\nconst Bold = createLucideIcon(\"bold\", __iconNode);\n\nexport { __iconNode, Bold as default };\n//# sourceMappingURL=bold.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 18V5\", key: \"adv99a\" }],\n  [\"path\", { d: \"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4\", key: \"1e3is1\" }],\n  [\"path\", { d: \"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5\", key: \"1gqd8o\" }],\n  [\"path\", { d: \"M17.997 5.125a4 4 0 0 1 2.526 5.77\", key: \"iwvgf7\" }],\n  [\"path\", { d: \"M18 18a4 4 0 0 0 2-7.464\", key: \"efp6ie\" }],\n  [\"path\", { d: \"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517\", key: \"1gq6am\" }],\n  [\"path\", { d: \"M6 18a4 4 0 0 1-2-7.464\", key: \"k1g0md\" }],\n  [\"path\", { d: \"M6.003 5.125a4 4 0 0 0-2.526 5.77\", key: \"q97ue3\" }]\n];\nconst Brain = createLucideIcon(\"brain\", __iconNode);\n\nexport { __iconNode, Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m16 18 6-6-6-6\", key: \"eg8j8\" }],\n  [\"path\", { d: \"m8 6-6 6 6 6\", key: \"ppft3o\" }]\n];\nconst Code = createLucideIcon(\"code\", __iconNode);\n\nexport { __iconNode, Code as default };\n//# sourceMappingURL=code.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"6\", x2: \"6\", y1: \"3\", y2: \"15\", key: \"17qcm7\" }],\n  [\"circle\", { cx: \"18\", cy: \"6\", r: \"3\", key: \"1h7g24\" }],\n  [\"circle\", { cx: \"6\", cy: \"18\", r: \"3\", key: \"fqmcym\" }],\n  [\"path\", { d: \"M18 9a9 9 0 0 1-9 9\", key: \"n2h4wq\" }]\n];\nconst GitBranch = createLucideIcon(\"git-branch\", __iconNode);\n\nexport { __iconNode, GitBranch as default };\n//# sourceMappingURL=git-branch.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"19\", x2: \"10\", y1: \"4\", y2: \"4\", key: \"15jd3p\" }],\n  [\"line\", { x1: \"14\", x2: \"5\", y1: \"20\", y2: \"20\", key: \"bu0au3\" }],\n  [\"line\", { x1: \"15\", x2: \"9\", y1: \"4\", y2: \"20\", key: \"uljnxc\" }]\n];\nconst Italic = createLucideIcon(\"italic\", __iconNode);\n\nexport { __iconNode, Italic as default };\n//# sourceMappingURL=italic.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M11 5h10\", key: \"1cz7ny\" }],\n  [\"path\", { d: \"M11 12h10\", key: \"1438ji\" }],\n  [\"path\", { d: \"M11 19h10\", key: \"11t30w\" }],\n  [\"path\", { d: \"M4 4h1v5\", key: \"10yrso\" }],\n  [\"path\", { d: \"M4 9h2\", key: \"r1h2o0\" }],\n  [\"path\", { d: \"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02\", key: \"xtkcd5\" }]\n];\nconst ListOrdered = createLucideIcon(\"list-ordered\", __iconNode);\n\nexport { __iconNode, ListOrdered as default };\n//# sourceMappingURL=list-ordered.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M13 21h8\", key: \"1jsn5i\" }],\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst PenLine = createLucideIcon(\"pen-line\", __iconNode);\n\nexport { __iconNode, PenLine as default };\n//# sourceMappingURL=pen-line.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst Pen = createLucideIcon(\"pen\", __iconNode);\n\nexport { __iconNode, Pen as default };\n//# sourceMappingURL=pen.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344\", key: \"2acyp4\" }\n  ],\n  [\"path\", { d: \"m9 11 3 3L22 4\", key: \"1pflzl\" }]\n];\nconst SquareCheckBig = createLucideIcon(\"square-check-big\", __iconNode);\n\nexport { __iconNode, SquareCheckBig as default };\n//# sourceMappingURL=square-check-big.js.map\n","/**\n * TanStack Query hooks for memories.\n *\n * Provides queries for work-item-scoped memories and global memory lists.\n */\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type {\n  WorkItemMemoriesResponse,\n  MemoryListResponse,\n} from '@/ui/lib/api-types.ts';\n\n/** Query key factory for memories. */\nexport const memoryKeys = {\n  all: ['memories'] as const,\n  lists: () => [...memoryKeys.all, 'list'] as const,\n  list: () => [...memoryKeys.lists()] as const,\n  forWorkItem: (workItemId: string) => [...memoryKeys.all, 'work-item', workItemId] as const,\n};\n\n/**\n * Fetch memories attached to a specific work item.\n *\n * @param workItemId - The work item UUID\n * @returns TanStack Query result with `WorkItemMemoriesResponse`\n */\nexport function useWorkItemMemories(workItemId: string) {\n  return useQuery({\n    queryKey: memoryKeys.forWorkItem(workItemId),\n    queryFn: ({ signal }) =>\n      apiClient.get<WorkItemMemoriesResponse>(\n        `/api/work-items/${workItemId}/memories`,\n        { signal },\n      ),\n    enabled: !!workItemId,\n  });\n}\n\n/**\n * Fetch the global memory list.\n *\n * @returns TanStack Query result with `MemoryListResponse`\n */\nexport function useMemories() {\n  return useQuery({\n    queryKey: memoryKeys.list(),\n    queryFn: ({ signal }) =>\n      apiClient.get<MemoryListResponse>('/api/memory', { signal }),\n  });\n}\n","/**\n * TanStack Query hook for work item communications.\n *\n * Fetches linked emails and calendar events for a specific work item.\n */\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { CommunicationsResponse } from '@/ui/lib/api-types.ts';\n\n/** Query key factory for communications. */\nexport const communicationsKeys = {\n  all: ['communications'] as const,\n  forWorkItem: (workItemId: string) =>\n    [...communicationsKeys.all, 'work-item', workItemId] as const,\n};\n\n/**\n * Fetch communications linked to a work item.\n *\n * @param workItemId - The work item UUID\n * @returns TanStack Query result with `CommunicationsResponse`\n */\nexport function useWorkItemCommunications(workItemId: string) {\n  return useQuery({\n    queryKey: communicationsKeys.forWorkItem(workItemId),\n    queryFn: ({ signal }) =>\n      apiClient.get<CommunicationsResponse>(\n        `/api/work-items/${workItemId}/communications`,\n        { signal },\n      ),\n    enabled: !!workItemId,\n  });\n}\n","/**\n * TanStack Query mutation hook for updating work items.\n *\n * Supports optimistic updates for status and title changes to provide\n * instant UI feedback while the server request is in flight.\n */\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { UpdateWorkItemBody, WorkItemDetail } from '@/ui/lib/api-types.ts';\nimport { workItemKeys } from '@/ui/hooks/queries/use-work-items.ts';\n\n/** Variables required by the update mutation. */\nexport interface UpdateWorkItemVariables {\n  /** The work item ID to update. */\n  id: string;\n  /** Partial update body. */\n  body: UpdateWorkItemBody;\n}\n\n/**\n * Update an existing work item via PUT.\n *\n * Optimistic updates are applied to the detail cache for `status` and `title`\n * changes. On error, the cache is rolled back to the previous value.\n *\n * @returns TanStack mutation\n *\n * @example\n * ```ts\n * const { mutate } = useUpdateWorkItem();\n * mutate({ id: 'abc', body: { status: 'in_progress' } });\n * ```\n */\nexport function useUpdateWorkItem() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ id, body }: UpdateWorkItemVariables) =>\n      apiClient.put<WorkItemDetail>(`/api/work-items/${id}`, body),\n\n    onMutate: async ({ id, body }) => {\n      // Cancel in-flight queries for this work item\n      await queryClient.cancelQueries({ queryKey: workItemKeys.detail(id) });\n\n      // Snapshot the previous value\n      const previousDetail = queryClient.getQueryData<WorkItemDetail>(\n        workItemKeys.detail(id),\n      );\n\n      // Optimistically update the detail cache\n      if (previousDetail) {\n        const optimisticData: WorkItemDetail = {\n          ...previousDetail,\n          ...(body.title !== undefined ? { title: body.title } : {}),\n          ...(body.status !== undefined ? { status: body.status } : {}),\n          ...(body.priority !== undefined ? { priority: body.priority } : {}),\n          ...(body.description !== undefined ? { description: body.description } : {}),\n        };\n        queryClient.setQueryData(workItemKeys.detail(id), optimisticData);\n      }\n\n      return { previousDetail };\n    },\n\n    onError: (_error, { id }, context) => {\n      // Roll back on error\n      if (context?.previousDetail) {\n        queryClient.setQueryData(workItemKeys.detail(id), context.previousDetail);\n      }\n    },\n\n    onSettled: (_data, _error, { id }) => {\n      // Always refetch to ensure server state is accurate\n      queryClient.invalidateQueries({ queryKey: workItemKeys.detail(id) });\n      queryClient.invalidateQueries({ queryKey: workItemKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: workItemKeys.tree() });\n    },\n  });\n}\n","/**\n * TanStack Query mutation hook for creating memories.\n *\n * Creates a memory attached to a specific work item and invalidates\n * the related memory queries.\n */\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { CreateMemoryBody, Memory } from '@/ui/lib/api-types.ts';\nimport { memoryKeys } from '@/ui/hooks/queries/use-memories.ts';\n\n/** Variables for the create memory mutation. */\nexport interface CreateMemoryVariables {\n  /** The work item ID to attach the memory to. */\n  workItemId: string;\n  /** Memory data. */\n  body: CreateMemoryBody;\n}\n\n/**\n * Create a new memory attached to a work item.\n *\n * @returns TanStack mutation\n *\n * @example\n * ```ts\n * const { mutate } = useCreateMemory();\n * mutate({ workItemId: 'abc', body: { title: 'Note', content: 'Details' } });\n * ```\n */\nexport function useCreateMemory() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ workItemId, body }: CreateMemoryVariables) =>\n      apiClient.post<Memory>(`/api/work-items/${workItemId}/memories`, body),\n\n    onSuccess: (_data, { workItemId }) => {\n      // Invalidate the work item's memories list and global memories\n      queryClient.invalidateQueries({ queryKey: memoryKeys.forWorkItem(workItemId) });\n      queryClient.invalidateQueries({ queryKey: memoryKeys.lists() });\n    },\n  });\n}\n","/**\n * TanStack Query mutation hook for updating memories.\n *\n * Updates a memory by ID and invalidates related queries.\n */\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { UpdateMemoryBody, Memory } from '@/ui/lib/api-types.ts';\nimport { memoryKeys } from '@/ui/hooks/queries/use-memories.ts';\n\n/** Variables for the update memory mutation. */\nexport interface UpdateMemoryVariables {\n  /** The memory ID to update. */\n  id: string;\n  /** Partial update body. */\n  body: UpdateMemoryBody;\n  /** Optional work item ID for targeted cache invalidation. */\n  workItemId?: string;\n}\n\n/**\n * Update an existing memory.\n *\n * @returns TanStack mutation\n *\n * @example\n * ```ts\n * const { mutate } = useUpdateMemory();\n * mutate({ id: 'mem-1', body: { title: 'Updated' }, workItemId: 'wi-1' });\n * ```\n */\nexport function useUpdateMemory() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ id, body }: UpdateMemoryVariables) =>\n      apiClient.patch<Memory>(`/api/memories/${id}`, body),\n\n    onSuccess: (_data, { workItemId }) => {\n      // Invalidate global memories list\n      queryClient.invalidateQueries({ queryKey: memoryKeys.lists() });\n      // If we know the work item, invalidate its specific memory list\n      if (workItemId) {\n        queryClient.invalidateQueries({ queryKey: memoryKeys.forWorkItem(workItemId) });\n      }\n    },\n  });\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport {\n  Folder,\n  Target,\n  Layers,\n  FileText,\n  ChevronRight,\n  Pencil,\n  Check,\n  X,\n  Trash2,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport type { WorkItemKind, WorkItemStatus } from './types';\n\nfunction getKindIcon(kind: WorkItemKind) {\n  switch (kind) {\n    case 'project':\n      return <Folder className=\"size-5\" />;\n    case 'initiative':\n      return <Target className=\"size-5\" />;\n    case 'epic':\n      return <Layers className=\"size-5\" />;\n    case 'issue':\n      return <FileText className=\"size-5\" />;\n  }\n}\n\nfunction getKindLabel(kind: WorkItemKind): string {\n  return kind.charAt(0).toUpperCase() + kind.slice(1);\n}\n\nfunction getStatusVariant(status: WorkItemStatus): 'default' | 'secondary' | 'destructive' | 'outline' {\n  switch (status) {\n    case 'in_progress':\n      return 'default';\n    case 'done':\n      return 'secondary';\n    case 'blocked':\n      return 'destructive';\n    default:\n      return 'outline';\n  }\n}\n\nfunction getStatusLabel(status: WorkItemStatus): string {\n  return status.replace('_', ' ').replace(/\\b\\w/g, c => c.toUpperCase());\n}\n\nexport interface ItemHeaderProps {\n  title: string;\n  kind: WorkItemKind;\n  status: WorkItemStatus;\n  parentTitle?: string;\n  onTitleChange?: (title: string) => void;\n  onParentClick?: () => void;\n  onDelete?: () => void;\n  className?: string;\n}\n\nexport function ItemHeader({\n  title,\n  kind,\n  status,\n  parentTitle,\n  onTitleChange,\n  onParentClick,\n  onDelete,\n  className,\n}: ItemHeaderProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(title);\n\n  const handleStartEdit = () => {\n    setEditValue(title);\n    setIsEditing(true);\n  };\n\n  const handleSave = () => {\n    if (editValue.trim() && editValue !== title) {\n      onTitleChange?.(editValue.trim());\n    }\n    setIsEditing(false);\n  };\n\n  const handleCancel = () => {\n    setEditValue(title);\n    setIsEditing(false);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleSave();\n    } else if (e.key === 'Escape') {\n      handleCancel();\n    }\n  };\n\n  return (\n    <div className={cn('space-y-2', className)}>\n      {/* Breadcrumb */}\n      {parentTitle && (\n        <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n          <button\n            className=\"hover:text-foreground hover:underline\"\n            onClick={onParentClick}\n          >\n            {parentTitle}\n          </button>\n          <ChevronRight className=\"size-4\" />\n        </div>\n      )}\n\n      {/* Title row */}\n      <div className=\"flex items-start gap-3\">\n        <span className=\"mt-1 text-muted-foreground\">{getKindIcon(kind)}</span>\n\n        <div className=\"min-w-0 flex-1 space-y-2\">\n          {isEditing ? (\n            <div className=\"flex items-center gap-2\">\n              <Input\n                value={editValue}\n                onChange={(e) => setEditValue(e.target.value)}\n                onKeyDown={handleKeyDown}\n                autoFocus\n                className=\"text-xl font-semibold\"\n              />\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleSave}>\n                <Check className=\"size-4\" />\n                <span className=\"sr-only\">Save</span>\n              </Button>\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleCancel}>\n                <X className=\"size-4\" />\n                <span className=\"sr-only\">Cancel</span>\n              </Button>\n            </div>\n          ) : (\n            <div className=\"group flex items-start gap-2\">\n              <h1 className=\"text-xl font-semibold\">{title}</h1>\n              {onTitleChange && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"mt-0.5 size-6 opacity-0 group-hover:opacity-100\"\n                  onClick={handleStartEdit}\n                >\n                  <Pencil className=\"size-3\" />\n                  <span className=\"sr-only\">Edit title</span>\n                </Button>\n              )}\n              {onDelete && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"mt-0.5 size-6 opacity-0 text-destructive hover:text-destructive group-hover:opacity-100\"\n                  onClick={onDelete}\n                >\n                  <Trash2 className=\"size-3\" />\n                  <span className=\"sr-only\">Delete</span>\n                </Button>\n              )}\n            </div>\n          )}\n\n          {/* Badges */}\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <Badge variant=\"outline\">{getKindLabel(kind)}</Badge>\n            <Badge variant={getStatusVariant(status)}>{getStatusLabel(status)}</Badge>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport {\n  Calendar,\n  Clock,\n  User,\n  AlertCircle,\n  Pencil,\n  Check,\n  X,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/ui/components/ui/select';\nimport type { WorkItemStatus, WorkItemPriority } from './types';\n\nfunction formatDate(date: Date | undefined): string {\n  if (!date) return 'Not set';\n  return date.toLocaleDateString(undefined, {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\nfunction formatMinutes(minutes: number | undefined): string {\n  if (!minutes) return 'Not set';\n  if (minutes < 60) return `${minutes}m`;\n  const hours = Math.floor(minutes / 60);\n  const mins = minutes % 60;\n  return mins > 0 ? `${hours}h ${mins}m` : `${hours}h`;\n}\n\ninterface MetadataFieldProps {\n  icon: React.ReactNode;\n  label: string;\n  value: string;\n  editable?: boolean;\n  onEdit?: (value: string) => void;\n  editType?: 'text' | 'select' | 'date' | 'number';\n  options?: Array<{ value: string; label: string }>;\n}\n\nfunction MetadataField({\n  icon,\n  label,\n  value,\n  editable,\n  onEdit,\n  editType = 'text',\n  options,\n}: MetadataFieldProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(value);\n\n  const handleSave = () => {\n    onEdit?.(editValue);\n    setIsEditing(false);\n  };\n\n  const handleCancel = () => {\n    setEditValue(value);\n    setIsEditing(false);\n  };\n\n  return (\n    <div className=\"flex items-start gap-3 rounded-md p-2 hover:bg-muted/50\">\n      <span className=\"mt-0.5 text-muted-foreground\">{icon}</span>\n      <div className=\"min-w-0 flex-1\">\n        <p className=\"text-xs font-medium text-muted-foreground\">{label}</p>\n        {isEditing ? (\n          <div className=\"mt-1 flex items-center gap-1\">\n            {editType === 'select' && options ? (\n              <Select value={editValue} onValueChange={setEditValue}>\n                <SelectTrigger className=\"h-8 text-sm\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {options.map((opt) => (\n                    <SelectItem key={opt.value} value={opt.value}>\n                      {opt.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            ) : editType === 'date' ? (\n              <Input\n                type=\"date\"\n                value={editValue}\n                onChange={(e) => setEditValue(e.target.value)}\n                className=\"h-8 text-sm\"\n              />\n            ) : (\n              <Input\n                type={editType === 'number' ? 'number' : 'text'}\n                value={editValue}\n                onChange={(e) => setEditValue(e.target.value)}\n                className=\"h-8 text-sm\"\n              />\n            )}\n            <Button variant=\"ghost\" size=\"icon\" className=\"size-6\" onClick={handleSave}>\n              <Check className=\"size-3\" />\n            </Button>\n            <Button variant=\"ghost\" size=\"icon\" className=\"size-6\" onClick={handleCancel}>\n              <X className=\"size-3\" />\n            </Button>\n          </div>\n        ) : (\n          <div className=\"group flex items-center gap-1\">\n            <p className=\"text-sm\">{value}</p>\n            {editable && onEdit && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"size-5 opacity-0 group-hover:opacity-100\"\n                onClick={() => setIsEditing(true)}\n              >\n                <Pencil className=\"size-3\" />\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nconst STATUS_OPTIONS: Array<{ value: WorkItemStatus; label: string }> = [\n  { value: 'not_started', label: 'Not Started' },\n  { value: 'in_progress', label: 'In Progress' },\n  { value: 'blocked', label: 'Blocked' },\n  { value: 'done', label: 'Done' },\n  { value: 'cancelled', label: 'Cancelled' },\n];\n\nconst PRIORITY_OPTIONS: Array<{ value: WorkItemPriority; label: string }> = [\n  { value: 'urgent', label: 'Urgent' },\n  { value: 'high', label: 'High' },\n  { value: 'medium', label: 'Medium' },\n  { value: 'low', label: 'Low' },\n];\n\nexport interface MetadataGridProps {\n  status: WorkItemStatus;\n  priority: WorkItemPriority;\n  assignee?: string;\n  dueDate?: Date;\n  startDate?: Date;\n  estimateMinutes?: number;\n  actualMinutes?: number;\n  onStatusChange?: (status: WorkItemStatus) => void;\n  onPriorityChange?: (priority: WorkItemPriority) => void;\n  onAssigneeChange?: (assignee: string) => void;\n  onDueDateChange?: (date: string) => void;\n  onStartDateChange?: (date: string) => void;\n  onEstimateChange?: (minutes: string) => void;\n  onActualChange?: (minutes: string) => void;\n  className?: string;\n}\n\nexport function MetadataGrid({\n  status,\n  priority,\n  assignee,\n  dueDate,\n  startDate,\n  estimateMinutes,\n  actualMinutes,\n  onStatusChange,\n  onPriorityChange,\n  onAssigneeChange,\n  onDueDateChange,\n  onStartDateChange,\n  onEstimateChange,\n  onActualChange,\n  className,\n}: MetadataGridProps) {\n  const getPriorityLabel = (p: WorkItemPriority) =>\n    PRIORITY_OPTIONS.find(o => o.value === p)?.label ?? p;\n  const getStatusLabel = (s: WorkItemStatus) =>\n    STATUS_OPTIONS.find(o => o.value === s)?.label ?? s;\n\n  return (\n    <div className={cn('grid gap-1 sm:grid-cols-2', className)}>\n      <MetadataField\n        icon={<AlertCircle className=\"size-4\" />}\n        label=\"Status\"\n        value={getStatusLabel(status)}\n        editable={!!onStatusChange}\n        onEdit={(v) => onStatusChange?.(v as WorkItemStatus)}\n        editType=\"select\"\n        options={STATUS_OPTIONS}\n      />\n      <MetadataField\n        icon={<AlertCircle className=\"size-4\" />}\n        label=\"Priority\"\n        value={getPriorityLabel(priority)}\n        editable={!!onPriorityChange}\n        onEdit={(v) => onPriorityChange?.(v as WorkItemPriority)}\n        editType=\"select\"\n        options={PRIORITY_OPTIONS}\n      />\n      <MetadataField\n        icon={<User className=\"size-4\" />}\n        label=\"Assignee\"\n        value={assignee || 'Unassigned'}\n        editable={!!onAssigneeChange}\n        onEdit={onAssigneeChange}\n      />\n      <MetadataField\n        icon={<Calendar className=\"size-4\" />}\n        label=\"Due Date\"\n        value={formatDate(dueDate)}\n        editable={!!onDueDateChange}\n        onEdit={onDueDateChange}\n        editType=\"date\"\n      />\n      <MetadataField\n        icon={<Calendar className=\"size-4\" />}\n        label=\"Start Date\"\n        value={formatDate(startDate)}\n        editable={!!onStartDateChange}\n        onEdit={onStartDateChange}\n        editType=\"date\"\n      />\n      <MetadataField\n        icon={<Clock className=\"size-4\" />}\n        label=\"Estimate\"\n        value={formatMinutes(estimateMinutes)}\n        editable={!!onEstimateChange}\n        onEdit={onEstimateChange}\n        editType=\"number\"\n      />\n      <MetadataField\n        icon={<Clock className=\"size-4\" />}\n        label=\"Actual\"\n        value={formatMinutes(actualMinutes)}\n        editable={!!onActualChange}\n        onEdit={onActualChange}\n        editType=\"number\"\n      />\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Pencil, Check, X, Eye, Edit2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Textarea } from '@/ui/components/ui/textarea';\n\nexport interface DescriptionEditorProps {\n  description?: string;\n  onDescriptionChange?: (description: string) => void;\n  className?: string;\n}\n\nexport function DescriptionEditor({\n  description,\n  onDescriptionChange,\n  className,\n}: DescriptionEditorProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(description || '');\n  const [showPreview, setShowPreview] = useState(false);\n\n  const handleStartEdit = () => {\n    setEditValue(description || '');\n    setIsEditing(true);\n    setShowPreview(false);\n  };\n\n  const handleSave = () => {\n    onDescriptionChange?.(editValue);\n    setIsEditing(false);\n  };\n\n  const handleCancel = () => {\n    setEditValue(description || '');\n    setIsEditing(false);\n    setShowPreview(false);\n  };\n\n  // Simple markdown to React elements (safe - no dangerouslySetInnerHTML)\n  const renderMarkdown = (text: string): React.ReactNode => {\n    if (!text) return null;\n\n    const lines = text.split('\\n');\n    return lines.map((line, i) => {\n      // Headers\n      if (line.startsWith('### ')) {\n        return <h4 key={i} className=\"mt-4 mb-2 text-sm font-semibold\">{line.slice(4)}</h4>;\n      }\n      if (line.startsWith('## ')) {\n        return <h3 key={i} className=\"mt-4 mb-2 font-semibold\">{line.slice(3)}</h3>;\n      }\n      if (line.startsWith('# ')) {\n        return <h2 key={i} className=\"mt-4 mb-2 text-lg font-semibold\">{line.slice(2)}</h2>;\n      }\n      // Lists\n      if (line.startsWith('- ') || line.startsWith('* ')) {\n        return <li key={i} className=\"ml-4\">{line.slice(2)}</li>;\n      }\n      // Empty line\n      if (!line.trim()) {\n        return <br key={i} />;\n      }\n\n      // Parse inline formatting into React elements\n      const parseInline = (text: string): React.ReactNode[] => {\n        const result: React.ReactNode[] = [];\n        let remaining = text;\n        let keyIndex = 0;\n\n        while (remaining.length > 0) {\n          // Check for code\n          const codeMatch = remaining.match(/^`([^`]+)`/);\n          if (codeMatch) {\n            result.push(\n              <code key={keyIndex++} className=\"rounded bg-muted px-1 text-sm\">\n                {codeMatch[1]}\n              </code>\n            );\n            remaining = remaining.slice(codeMatch[0].length);\n            continue;\n          }\n\n          // Check for bold\n          const boldMatch = remaining.match(/^\\*\\*([^*]+)\\*\\*/);\n          if (boldMatch) {\n            result.push(<strong key={keyIndex++}>{boldMatch[1]}</strong>);\n            remaining = remaining.slice(boldMatch[0].length);\n            continue;\n          }\n\n          // Check for italic\n          const italicMatch = remaining.match(/^\\*([^*]+)\\*/);\n          if (italicMatch) {\n            result.push(<em key={keyIndex++}>{italicMatch[1]}</em>);\n            remaining = remaining.slice(italicMatch[0].length);\n            continue;\n          }\n\n          // Take next character as plain text\n          const nextSpecial = remaining.search(/[`*]/);\n          if (nextSpecial === -1) {\n            result.push(remaining);\n            break;\n          } else if (nextSpecial === 0) {\n            // Special char but didn't match pattern, take as literal\n            result.push(remaining[0]);\n            remaining = remaining.slice(1);\n          } else {\n            result.push(remaining.slice(0, nextSpecial));\n            remaining = remaining.slice(nextSpecial);\n          }\n        }\n\n        return result;\n      };\n\n      return (\n        <p key={i} className=\"my-1\">\n          {parseInline(line)}\n        </p>\n      );\n    });\n  };\n\n  return (\n    <div className={cn('space-y-3', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-sm font-medium\">Description</h3>\n        {!isEditing && onDescriptionChange && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-7 gap-1\"\n            onClick={handleStartEdit}\n          >\n            <Pencil className=\"size-3\" />\n            Edit\n          </Button>\n        )}\n        {isEditing && (\n          <div className=\"flex items-center gap-1\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className={cn('h-7 gap-1', !showPreview && 'bg-muted')}\n              onClick={() => setShowPreview(false)}\n            >\n              <Edit2 className=\"size-3\" />\n              Edit\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className={cn('h-7 gap-1', showPreview && 'bg-muted')}\n              onClick={() => setShowPreview(true)}\n            >\n              <Eye className=\"size-3\" />\n              Preview\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {/* Content */}\n      {isEditing ? (\n        <div className=\"space-y-3\">\n          {showPreview ? (\n            <div className=\"min-h-32 rounded-md border bg-muted/30 p-3 text-sm\">\n              {editValue ? (\n                renderMarkdown(editValue)\n              ) : (\n                <p className=\"text-muted-foreground\">Nothing to preview</p>\n              )}\n            </div>\n          ) : (\n            <Textarea\n              value={editValue}\n              onChange={(e) => setEditValue(e.target.value)}\n              placeholder=\"Add a description... (Markdown supported)\"\n              className=\"min-h-32 font-mono text-sm\"\n            />\n          )}\n          <div className=\"flex justify-end gap-2\">\n            <Button variant=\"ghost\" size=\"sm\" onClick={handleCancel}>\n              <X className=\"mr-1 size-3\" />\n              Cancel\n            </Button>\n            <Button size=\"sm\" onClick={handleSave}>\n              <Check className=\"mr-1 size-3\" />\n              Save\n            </Button>\n          </div>\n        </div>\n      ) : description ? (\n        <div className=\"prose prose-sm max-w-none rounded-md bg-muted/30 p-3\">\n          {renderMarkdown(description)}\n        </div>\n      ) : (\n        <p className=\"py-4 text-center text-sm text-muted-foreground\">\n          No description\n        </p>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\n// src/checkbox.tsx\nimport * as React from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar CHECKBOX_NAME = \"Checkbox\";\nvar [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);\nvar [CheckboxProviderImpl, useCheckboxContext] = createCheckboxContext(CHECKBOX_NAME);\nfunction CheckboxProvider(props) {\n  const {\n    __scopeCheckbox,\n    checked: checkedProp,\n    children,\n    defaultChecked,\n    disabled,\n    form,\n    name,\n    onCheckedChange,\n    required,\n    value = \"on\",\n    // @ts-expect-error\n    internal_do_not_use_render\n  } = props;\n  const [checked, setChecked] = useControllableState({\n    prop: checkedProp,\n    defaultProp: defaultChecked ?? false,\n    onChange: onCheckedChange,\n    caller: CHECKBOX_NAME\n  });\n  const [control, setControl] = React.useState(null);\n  const [bubbleInput, setBubbleInput] = React.useState(null);\n  const hasConsumerStoppedPropagationRef = React.useRef(false);\n  const isFormControl = control ? !!form || !!control.closest(\"form\") : (\n    // We set this to true by default so that events bubble to forms without JS (SSR)\n    true\n  );\n  const context = {\n    checked,\n    disabled,\n    setChecked,\n    control,\n    setControl,\n    name,\n    form,\n    value,\n    hasConsumerStoppedPropagationRef,\n    required,\n    defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked,\n    isFormControl,\n    bubbleInput,\n    setBubbleInput\n  };\n  return /* @__PURE__ */ jsx(\n    CheckboxProviderImpl,\n    {\n      scope: __scopeCheckbox,\n      ...context,\n      children: isFunction(internal_do_not_use_render) ? internal_do_not_use_render(context) : children\n    }\n  );\n}\nvar TRIGGER_NAME = \"CheckboxTrigger\";\nvar CheckboxTrigger = React.forwardRef(\n  ({ __scopeCheckbox, onKeyDown, onClick, ...checkboxProps }, forwardedRef) => {\n    const {\n      control,\n      value,\n      disabled,\n      checked,\n      required,\n      setControl,\n      setChecked,\n      hasConsumerStoppedPropagationRef,\n      isFormControl,\n      bubbleInput\n    } = useCheckboxContext(TRIGGER_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setControl);\n    const initialCheckedStateRef = React.useRef(checked);\n    React.useEffect(() => {\n      const form = control?.form;\n      if (form) {\n        const reset = () => setChecked(initialCheckedStateRef.current);\n        form.addEventListener(\"reset\", reset);\n        return () => form.removeEventListener(\"reset\", reset);\n      }\n    }, [control, setChecked]);\n    return /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        role: \"checkbox\",\n        \"aria-checked\": isIndeterminate(checked) ? \"mixed\" : checked,\n        \"aria-required\": required,\n        \"data-state\": getState(checked),\n        \"data-disabled\": disabled ? \"\" : void 0,\n        disabled,\n        value,\n        ...checkboxProps,\n        ref: composedRefs,\n        onKeyDown: composeEventHandlers(onKeyDown, (event) => {\n          if (event.key === \"Enter\") event.preventDefault();\n        }),\n        onClick: composeEventHandlers(onClick, (event) => {\n          setChecked((prevChecked) => isIndeterminate(prevChecked) ? true : !prevChecked);\n          if (bubbleInput && isFormControl) {\n            hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n            if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n          }\n        })\n      }\n    );\n  }\n);\nCheckboxTrigger.displayName = TRIGGER_NAME;\nvar Checkbox = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeCheckbox,\n      name,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      value,\n      onCheckedChange,\n      form,\n      ...checkboxProps\n    } = props;\n    return /* @__PURE__ */ jsx(\n      CheckboxProvider,\n      {\n        __scopeCheckbox,\n        checked,\n        defaultChecked,\n        disabled,\n        required,\n        onCheckedChange,\n        name,\n        form,\n        value,\n        internal_do_not_use_render: ({ isFormControl }) => /* @__PURE__ */ jsxs(Fragment, { children: [\n          /* @__PURE__ */ jsx(\n            CheckboxTrigger,\n            {\n              ...checkboxProps,\n              ref: forwardedRef,\n              __scopeCheckbox\n            }\n          ),\n          isFormControl && /* @__PURE__ */ jsx(\n            CheckboxBubbleInput,\n            {\n              __scopeCheckbox\n            }\n          )\n        ] })\n      }\n    );\n  }\n);\nCheckbox.displayName = CHECKBOX_NAME;\nvar INDICATOR_NAME = \"CheckboxIndicator\";\nvar CheckboxIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;\n    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);\n    return /* @__PURE__ */ jsx(\n      Presence,\n      {\n        present: forceMount || isIndeterminate(context.checked) || context.checked === true,\n        children: /* @__PURE__ */ jsx(\n          Primitive.span,\n          {\n            \"data-state\": getState(context.checked),\n            \"data-disabled\": context.disabled ? \"\" : void 0,\n            ...indicatorProps,\n            ref: forwardedRef,\n            style: { pointerEvents: \"none\", ...props.style }\n          }\n        )\n      }\n    );\n  }\n);\nCheckboxIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"CheckboxBubbleInput\";\nvar CheckboxBubbleInput = React.forwardRef(\n  ({ __scopeCheckbox, ...props }, forwardedRef) => {\n    const {\n      control,\n      hasConsumerStoppedPropagationRef,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      name,\n      value,\n      form,\n      bubbleInput,\n      setBubbleInput\n    } = useCheckboxContext(BUBBLE_INPUT_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setBubbleInput);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = bubbleInput;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      const bubbles = !hasConsumerStoppedPropagationRef.current;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        input.indeterminate = isIndeterminate(checked);\n        setChecked.call(input, isIndeterminate(checked) ? false : checked);\n        input.dispatchEvent(event);\n      }\n    }, [bubbleInput, prevChecked, checked, hasConsumerStoppedPropagationRef]);\n    const defaultCheckedRef = React.useRef(isIndeterminate(checked) ? false : checked);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"checkbox\",\n        \"aria-hidden\": true,\n        defaultChecked: defaultChecked ?? defaultCheckedRef.current,\n        required,\n        disabled,\n        name,\n        value,\n        form,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0,\n          // We transform because the input is absolutely positioned but we have\n          // rendered it **after** the button. This pulls it back to sit on top\n          // of the button.\n          transform: \"translateX(-100%)\"\n        }\n      }\n    );\n  }\n);\nCheckboxBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\nfunction isIndeterminate(checked) {\n  return checked === \"indeterminate\";\n}\nfunction getState(checked) {\n  return isIndeterminate(checked) ? \"indeterminate\" : checked ? \"checked\" : \"unchecked\";\n}\nexport {\n  Checkbox,\n  CheckboxIndicator,\n  CheckboxIndicator as Indicator,\n  Checkbox as Root,\n  createCheckboxScope,\n  CheckboxBubbleInput as unstable_BubbleInput,\n  CheckboxBubbleInput as unstable_CheckboxBubbleInput,\n  CheckboxProvider as unstable_CheckboxProvider,\n  CheckboxTrigger as unstable_CheckboxTrigger,\n  CheckboxProvider as unstable_Provider,\n  CheckboxTrigger as unstable_Trigger\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { CheckIcon } from \"lucide-react\"\n\nimport { cn } from \"@/ui/lib/utils\"\n\nfunction Checkbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        \"peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"grid place-content-center text-current transition-none\"\n      >\n        <CheckIcon className=\"size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  )\n}\n\nexport { Checkbox }\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Plus, Trash2, GripVertical } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport { Checkbox } from '@/ui/components/ui/checkbox';\nimport type { WorkItemTodo } from './types';\n\nexport interface TodoListProps {\n  todos: WorkItemTodo[];\n  onAdd?: (text: string) => void;\n  onToggle?: (id: string, completed: boolean) => void;\n  onDelete?: (id: string) => void;\n  onReorder?: (todos: WorkItemTodo[]) => void;\n  className?: string;\n}\n\nexport function TodoList({\n  todos,\n  onAdd,\n  onToggle,\n  onDelete,\n  className,\n}: TodoListProps) {\n  const [newTodoText, setNewTodoText] = useState('');\n\n  const handleAdd = () => {\n    if (newTodoText.trim() && onAdd) {\n      onAdd(newTodoText.trim());\n      setNewTodoText('');\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleAdd();\n    }\n  };\n\n  const completedCount = todos.filter((t) => t.completed).length;\n\n  return (\n    <div className={cn('space-y-3', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-sm font-medium\">Checklist</h3>\n        {todos.length > 0 && (\n          <span className=\"text-xs text-muted-foreground\">\n            {completedCount}/{todos.length} completed\n          </span>\n        )}\n      </div>\n\n      {/* Progress bar */}\n      {todos.length > 0 && (\n        <div className=\"h-1.5 overflow-hidden rounded-full bg-muted\">\n          <div\n            className=\"h-full bg-primary transition-all\"\n            style={{ width: `${(completedCount / todos.length) * 100}%` }}\n          />\n        </div>\n      )}\n\n      {/* Todo items */}\n      <div className=\"space-y-1\">\n        {todos.map((todo) => (\n          <div\n            key={todo.id}\n            data-testid=\"todo-item\"\n            className={cn(\n              'group flex items-center gap-2 rounded-md px-2 py-1.5',\n              'hover:bg-muted/50'\n            )}\n          >\n            <GripVertical className=\"size-4 cursor-grab text-muted-foreground opacity-0 group-hover:opacity-100\" />\n            <Checkbox\n              checked={todo.completed}\n              onCheckedChange={(checked) => onToggle?.(todo.id, checked === true)}\n              aria-label={`Mark \"${todo.text}\" as ${todo.completed ? 'incomplete' : 'complete'}`}\n            />\n            <span\n              className={cn(\n                'flex-1 text-sm',\n                todo.completed && 'text-muted-foreground line-through'\n              )}\n            >\n              {todo.text}\n            </span>\n            {onDelete && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"size-6 opacity-0 group-hover:opacity-100\"\n                onClick={() => onDelete(todo.id)}\n              >\n                <Trash2 className=\"size-3\" />\n                <span className=\"sr-only\">Delete</span>\n              </Button>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Add new todo */}\n      {onAdd && (\n        <div className=\"flex items-center gap-2\">\n          <Plus className=\"size-4 text-muted-foreground\" />\n          <Input\n            value={newTodoText}\n            onChange={(e) => setNewTodoText(e.target.value)}\n            onKeyDown={handleKeyDown}\n            placeholder=\"Add a task...\"\n            className=\"h-8 flex-1\"\n          />\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleAdd}\n            disabled={!newTodoText.trim()}\n          >\n            Add\n          </Button>\n        </div>\n      )}\n\n      {/* Empty state */}\n      {todos.length === 0 && !onAdd && (\n        <p className=\"py-4 text-center text-sm text-muted-foreground\">\n          No tasks yet\n        </p>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport {\n  ArrowLeft,\n  ArrowRight,\n  Folder,\n  Target,\n  Layers,\n  FileText,\n  Plus,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Button } from '@/ui/components/ui/button';\nimport type { WorkItemDependency, WorkItemKind, WorkItemStatus } from './types';\n\nfunction getKindIcon(kind: WorkItemKind) {\n  switch (kind) {\n    case 'project':\n      return <Folder className=\"size-4\" />;\n    case 'initiative':\n      return <Target className=\"size-4\" />;\n    case 'epic':\n      return <Layers className=\"size-4\" />;\n    case 'issue':\n      return <FileText className=\"size-4\" />;\n  }\n}\n\nfunction getStatusVariant(status: WorkItemStatus): 'default' | 'secondary' | 'destructive' | 'outline' {\n  switch (status) {\n    case 'in_progress':\n      return 'default';\n    case 'done':\n      return 'secondary';\n    case 'blocked':\n      return 'destructive';\n    default:\n      return 'outline';\n  }\n}\n\nfunction getStatusLabel(status: WorkItemStatus): string {\n  return status.replace('_', ' ').replace(/\\b\\w/g, c => c.toUpperCase());\n}\n\nexport interface DependenciesSectionProps {\n  dependencies: WorkItemDependency[];\n  onDependencyClick?: (dependency: WorkItemDependency) => void;\n  onAddDependency?: (direction: 'blocks' | 'blocked_by') => void;\n  className?: string;\n}\n\nexport function DependenciesSection({\n  dependencies,\n  onDependencyClick,\n  onAddDependency,\n  className,\n}: DependenciesSectionProps) {\n  const blockedBy = dependencies.filter((d) => d.direction === 'blocked_by');\n  const blocks = dependencies.filter((d) => d.direction === 'blocks');\n\n  const renderDependency = (dep: WorkItemDependency) => (\n    <button\n      key={dep.id}\n      data-testid=\"dependency-item\"\n      className={cn(\n        'flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-left',\n        'hover:bg-muted/50',\n        onDependencyClick && 'cursor-pointer'\n      )}\n      onClick={() => onDependencyClick?.(dep)}\n    >\n      <span className=\"text-muted-foreground\">{getKindIcon(dep.kind)}</span>\n      <span className=\"min-w-0 flex-1 truncate text-sm\">{dep.title}</span>\n      <Badge variant={getStatusVariant(dep.status)} className=\"shrink-0 text-xs\">\n        {getStatusLabel(dep.status)}\n      </Badge>\n    </button>\n  );\n\n  return (\n    <div className={cn('space-y-4', className)}>\n      {/* Blocked by */}\n      <div>\n        <div className=\"mb-2 flex items-center justify-between\">\n          <h4 className=\"flex items-center gap-2 text-xs font-medium text-muted-foreground\">\n            <ArrowLeft className=\"size-4\" />\n            Blocked by ({blockedBy.length})\n          </h4>\n          {onAddDependency && (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"size-6\"\n              onClick={() => onAddDependency('blocked_by')}\n            >\n              <Plus className=\"size-3\" />\n              <span className=\"sr-only\">Add blocker</span>\n            </Button>\n          )}\n        </div>\n        {blockedBy.length > 0 ? (\n          <div className=\"space-y-1\">{blockedBy.map(renderDependency)}</div>\n        ) : (\n          <p className=\"py-2 text-center text-xs text-muted-foreground\">\n            No blockers\n          </p>\n        )}\n      </div>\n\n      {/* Blocks */}\n      <div>\n        <div className=\"mb-2 flex items-center justify-between\">\n          <h4 className=\"flex items-center gap-2 text-xs font-medium text-muted-foreground\">\n            <ArrowRight className=\"size-4\" />\n            Blocks ({blocks.length})\n          </h4>\n          {onAddDependency && (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"size-6\"\n              onClick={() => onAddDependency('blocks')}\n            >\n              <Plus className=\"size-3\" />\n              <span className=\"sr-only\">Add dependent</span>\n            </Button>\n          )}\n        </div>\n        {blocks.length > 0 ? (\n          <div className=\"space-y-1\">{blocks.map(renderDependency)}</div>\n        ) : (\n          <p className=\"py-2 text-center text-xs text-muted-foreground\">\n            No dependents\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { FileText, Folder, Target, Layers, MoreVertical, Pencil, Trash2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Button } from '@/ui/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/ui/components/ui/dropdown-menu';\nimport type { MemoryItem } from './types';\n\nfunction getLinkedItemIcon(kind: MemoryItem['linkedItemKind']) {\n  switch (kind) {\n    case 'project':\n      return <Folder className=\"size-3\" />;\n    case 'initiative':\n      return <Target className=\"size-3\" />;\n    case 'epic':\n      return <Layers className=\"size-3\" />;\n    case 'issue':\n      return <FileText className=\"size-3\" />;\n    default:\n      return null;\n  }\n}\n\nexport interface MemoryCardProps {\n  memory: MemoryItem;\n  onClick?: (memory: MemoryItem) => void;\n  onEdit?: (memory: MemoryItem) => void;\n  onDelete?: (memory: MemoryItem) => void;\n  className?: string;\n}\n\nexport function MemoryCard({\n  memory,\n  onClick,\n  onEdit,\n  onDelete,\n  className,\n}: MemoryCardProps) {\n  const preview = memory.content.slice(0, 150) + (memory.content.length > 150 ? '...' : '');\n\n  return (\n    <div\n      data-testid=\"memory-card\"\n      className={cn(\n        'group relative rounded-lg border bg-card p-4 transition-colors hover:bg-accent/50',\n        onClick && 'cursor-pointer',\n        className\n      )}\n      onClick={() => onClick?.(memory)}\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between gap-2\">\n        <h3 className=\"font-medium leading-tight\">{memory.title}</h3>\n\n        {(onEdit || onDelete) && (\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"size-6 opacity-0 group-hover:opacity-100\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <MoreVertical className=\"size-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              {onEdit && (\n                <DropdownMenuItem\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onEdit(memory);\n                  }}\n                >\n                  <Pencil className=\"mr-2 size-4\" />\n                  Edit\n                </DropdownMenuItem>\n              )}\n              {onDelete && (\n                <DropdownMenuItem\n                  className=\"text-destructive focus:text-destructive\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onDelete(memory);\n                  }}\n                >\n                  <Trash2 className=\"mr-2 size-4\" />\n                  Delete\n                </DropdownMenuItem>\n              )}\n            </DropdownMenuContent>\n          </DropdownMenu>\n        )}\n      </div>\n\n      {/* Preview */}\n      <p className=\"mt-2 text-sm text-muted-foreground line-clamp-2\">{preview}</p>\n\n      {/* Footer */}\n      <div className=\"mt-3 flex items-center justify-between text-xs text-muted-foreground\">\n        <div className=\"flex items-center gap-2\">\n          {memory.linkedItemKind && memory.linkedItemTitle && (\n            <span className=\"flex items-center gap-1\">\n              {getLinkedItemIcon(memory.linkedItemKind)}\n              <span className=\"truncate max-w-[120px]\">{memory.linkedItemTitle}</span>\n            </span>\n          )}\n        </div>\n\n        <span>{memory.updatedAt.toLocaleDateString()}</span>\n      </div>\n\n      {/* Tags */}\n      {memory.tags && memory.tags.length > 0 && (\n        <div className=\"mt-2 flex flex-wrap gap-1\">\n          {memory.tags.map((tag) => (\n            <Badge key={tag} variant=\"secondary\" className=\"text-xs\">\n              {tag}\n            </Badge>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { Plus, FileText, Link2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { MemoryCard } from './memory-card';\nimport type { MemoryItem } from './types';\n\nexport interface ItemMemoriesProps {\n  memories: MemoryItem[];\n  onMemoryClick?: (memory: MemoryItem) => void;\n  onAddMemory?: () => void;\n  onLinkMemory?: () => void;\n  onEditMemory?: (memory: MemoryItem) => void;\n  onDeleteMemory?: (memory: MemoryItem) => void;\n  className?: string;\n}\n\nexport function ItemMemories({\n  memories,\n  onMemoryClick,\n  onAddMemory,\n  onLinkMemory,\n  onEditMemory,\n  onDeleteMemory,\n  className,\n}: ItemMemoriesProps) {\n  return (\n    <div className={cn('space-y-4', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <h3 className=\"text-sm font-medium\">Memories</h3>\n          <Badge variant=\"secondary\" className=\"text-xs\">\n            {memories.length}\n          </Badge>\n        </div>\n\n        <div className=\"flex gap-1\">\n          {onLinkMemory && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onLinkMemory}>\n              <Link2 className=\"mr-1 size-3\" />\n              Link\n            </Button>\n          )}\n          {onAddMemory && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onAddMemory}>\n              <Plus className=\"mr-1 size-3\" />\n              Add\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Memory list */}\n      {memories.length > 0 ? (\n        <div className=\"grid gap-2 sm:grid-cols-2\">\n          {memories.map((memory) => (\n            <MemoryCard\n              key={memory.id}\n              memory={memory}\n              onClick={onMemoryClick}\n              onEdit={onEditMemory}\n              onDelete={onDeleteMemory}\n            />\n          ))}\n        </div>\n      ) : (\n        <div className=\"rounded-lg border border-dashed p-6 text-center\">\n          <FileText className=\"mx-auto size-8 text-muted-foreground/50\" />\n          <p className=\"mt-2 text-sm text-muted-foreground\">No memories attached</p>\n          {(onAddMemory || onLinkMemory) && (\n            <div className=\"mt-3 flex justify-center gap-2\">\n              {onAddMemory && (\n                <Button variant=\"outline\" size=\"sm\" onClick={onAddMemory}>\n                  <Plus className=\"mr-1 size-3\" />\n                  Create new\n                </Button>\n              )}\n              {onLinkMemory && (\n                <Button variant=\"outline\" size=\"sm\" onClick={onLinkMemory}>\n                  <Link2 className=\"mr-1 size-3\" />\n                  Link existing\n                </Button>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useState, useCallback } from 'react';\nimport { Bold, Italic, List, ListOrdered, Link2, Code, Eye, Edit3 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport { Textarea } from '@/ui/components/ui/textarea';\nimport { Badge } from '@/ui/components/ui/badge';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/ui/components/ui/dialog';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/ui/components/ui/tabs';\nimport type { MemoryItem, MemoryFormData } from './types';\n\nexport interface MemoryEditorProps {\n  memory?: MemoryItem;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSubmit: (data: MemoryFormData) => void;\n  className?: string;\n}\n\nexport function MemoryEditor({\n  memory,\n  open,\n  onOpenChange,\n  onSubmit,\n  className,\n}: MemoryEditorProps) {\n  const [title, setTitle] = useState(memory?.title ?? '');\n  const [content, setContent] = useState(memory?.content ?? '');\n  const [tagInput, setTagInput] = useState('');\n  const [tags, setTags] = useState<string[]>(memory?.tags ?? []);\n  const [activeTab, setActiveTab] = useState<'edit' | 'preview'>('edit');\n\n  const textareaRef = React.useRef<HTMLTextAreaElement>(null);\n\n  const insertMarkdown = useCallback((before: string, after: string = '') => {\n    const textarea = textareaRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selected = content.slice(start, end);\n\n    const newContent =\n      content.slice(0, start) +\n      before +\n      (selected || 'text') +\n      after +\n      content.slice(end);\n\n    setContent(newContent);\n\n    // Restore focus and selection\n    setTimeout(() => {\n      textarea.focus();\n      const newStart = start + before.length;\n      const newEnd = newStart + (selected || 'text').length;\n      textarea.setSelectionRange(newStart, newEnd);\n    }, 0);\n  }, [content]);\n\n  const handleAddTag = () => {\n    const tag = tagInput.trim();\n    if (tag && !tags.includes(tag)) {\n      setTags([...tags, tag]);\n      setTagInput('');\n    }\n  };\n\n  const handleRemoveTag = (tagToRemove: string) => {\n    setTags(tags.filter((t) => t !== tagToRemove));\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit({\n      title: title.trim(),\n      content: content.trim(),\n      tags: tags.length > 0 ? tags : undefined,\n    });\n  };\n\n  const isValid = title.trim() && content.trim();\n\n  // Simple markdown to HTML conversion for preview\n  const renderPreview = (text: string) => {\n    return text\n      .split('\\n')\n      .map((line, i) => {\n        // Headers\n        if (line.startsWith('### ')) {\n          return <h3 key={i} className=\"text-lg font-semibold mt-4 mb-2\">{line.slice(4)}</h3>;\n        }\n        if (line.startsWith('## ')) {\n          return <h2 key={i} className=\"text-xl font-semibold mt-4 mb-2\">{line.slice(3)}</h2>;\n        }\n        if (line.startsWith('# ')) {\n          return <h1 key={i} className=\"text-2xl font-bold mt-4 mb-2\">{line.slice(2)}</h1>;\n        }\n\n        // List items\n        if (line.startsWith('- ') || line.startsWith('* ')) {\n          return <li key={i} className=\"ml-4\">{line.slice(2)}</li>;\n        }\n\n        // Numbered list\n        if (/^\\d+\\. /.test(line)) {\n          return <li key={i} className=\"ml-4 list-decimal\">{line.replace(/^\\d+\\. /, '')}</li>;\n        }\n\n        // Empty line\n        if (!line.trim()) {\n          return <br key={i} />;\n        }\n\n        // Regular paragraph\n        return <p key={i} className=\"my-1\">{line}</p>;\n      });\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className={cn('sm:max-w-2xl', className)}>\n        <DialogHeader>\n          <DialogTitle>{memory ? 'Edit Memory' : 'Create Memory'}</DialogTitle>\n          <DialogDescription className=\"sr-only\">{memory ? 'Edit memory details' : 'Create a new memory entry'}</DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {/* Title */}\n          <div className=\"space-y-2\">\n            <label htmlFor=\"memory-title\" className=\"text-sm font-medium\">\n              Title <span className=\"text-destructive\">*</span>\n            </label>\n            <Input\n              id=\"memory-title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"Memory title\"\n              required\n            />\n          </div>\n\n          {/* Content with tabs */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <label className=\"text-sm font-medium\">\n                Content <span className=\"text-destructive\">*</span>\n              </label>\n            </div>\n\n            <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as 'edit' | 'preview')}>\n              <div className=\"flex items-center justify-between\">\n                {/* Toolbar */}\n                <div className=\"flex gap-1\">\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('**', '**')}\n                    title=\"Bold\"\n                  >\n                    <Bold className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('*', '*')}\n                    title=\"Italic\"\n                  >\n                    <Italic className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('- ')}\n                    title=\"Bullet list\"\n                  >\n                    <List className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('1. ')}\n                    title=\"Numbered list\"\n                  >\n                    <ListOrdered className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('[', '](url)')}\n                    title=\"Link\"\n                  >\n                    <Link2 className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('`', '`')}\n                    title=\"Code\"\n                  >\n                    <Code className=\"size-4\" />\n                  </Button>\n                </div>\n\n                <TabsList>\n                  <TabsTrigger value=\"edit\" className=\"gap-1\">\n                    <Edit3 className=\"size-3\" />\n                    Edit\n                  </TabsTrigger>\n                  <TabsTrigger value=\"preview\" className=\"gap-1\">\n                    <Eye className=\"size-3\" />\n                    Preview\n                  </TabsTrigger>\n                </TabsList>\n              </div>\n\n              <TabsContent value=\"edit\" className=\"mt-2\">\n                <Textarea\n                  ref={textareaRef}\n                  value={content}\n                  onChange={(e) => setContent(e.target.value)}\n                  placeholder=\"Write your memory content here... (Markdown supported)\"\n                  className=\"min-h-[200px] font-mono text-sm\"\n                  required\n                />\n              </TabsContent>\n\n              <TabsContent value=\"preview\" className=\"mt-2\">\n                <div className=\"min-h-[200px] rounded-md border bg-muted/30 p-4 text-sm\">\n                  {content ? (\n                    <div className=\"prose prose-sm dark:prose-invert max-w-none\">\n                      {renderPreview(content)}\n                    </div>\n                  ) : (\n                    <p className=\"text-muted-foreground\">Nothing to preview</p>\n                  )}\n                </div>\n              </TabsContent>\n            </Tabs>\n          </div>\n\n          {/* Tags */}\n          <div className=\"space-y-2\">\n            <label htmlFor=\"memory-tags\" className=\"text-sm font-medium\">\n              Tags\n            </label>\n            <div className=\"flex gap-2\">\n              <Input\n                id=\"memory-tags\"\n                value={tagInput}\n                onChange={(e) => setTagInput(e.target.value)}\n                placeholder=\"Add a tag\"\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') {\n                    e.preventDefault();\n                    handleAddTag();\n                  }\n                }}\n              />\n              <Button type=\"button\" variant=\"outline\" onClick={handleAddTag}>\n                Add\n              </Button>\n            </div>\n            {tags.length > 0 && (\n              <div className=\"flex flex-wrap gap-1 mt-2\">\n                {tags.map((tag) => (\n                  <Badge\n                    key={tag}\n                    variant=\"secondary\"\n                    className=\"cursor-pointer\"\n                    onClick={() => handleRemoveTag(tag)}\n                  >\n                    {tag} \n                  </Badge>\n                ))}\n              </div>\n            )}\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={!isValid}>\n              {memory ? 'Save Changes' : 'Create Memory'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Mail, Calendar, Plus, Link2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Badge } from '@/ui/components/ui/badge';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/ui/components/ui/tabs';\nimport { EmailCard } from './email-card';\nimport { CalendarEventCard } from './calendar-event-card';\nimport type { LinkedEmail, LinkedCalendarEvent } from './types';\n\nexport interface ItemCommunicationsProps {\n  emails: LinkedEmail[];\n  calendarEvents: LinkedCalendarEvent[];\n  onEmailClick?: (email: LinkedEmail) => void;\n  onEventClick?: (event: LinkedCalendarEvent) => void;\n  onUnlinkEmail?: (email: LinkedEmail) => void;\n  onUnlinkEvent?: (event: LinkedCalendarEvent) => void;\n  onLinkEmail?: () => void;\n  onLinkEvent?: () => void;\n  className?: string;\n}\n\nexport function ItemCommunications({\n  emails,\n  calendarEvents,\n  onEmailClick,\n  onEventClick,\n  onUnlinkEmail,\n  onUnlinkEvent,\n  onLinkEmail,\n  onLinkEvent,\n  className,\n}: ItemCommunicationsProps) {\n  const [activeTab, setActiveTab] = useState<'emails' | 'calendar'>('emails');\n\n  const totalCount = emails.length + calendarEvents.length;\n\n  return (\n    <div className={cn('space-y-4', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <h3 className=\"text-sm font-medium\">Communications</h3>\n          <Badge variant=\"secondary\" className=\"text-xs\">\n            {totalCount}\n          </Badge>\n        </div>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as 'emails' | 'calendar')}>\n        <div className=\"flex items-center justify-between\">\n          <TabsList>\n            <TabsTrigger value=\"emails\" className=\"gap-1\">\n              <Mail className=\"size-3\" />\n              Emails\n              {emails.length > 0 && (\n                <Badge variant=\"secondary\" className=\"ml-1 text-[10px] px-1\">\n                  {emails.length}\n                </Badge>\n              )}\n            </TabsTrigger>\n            <TabsTrigger value=\"calendar\" className=\"gap-1\">\n              <Calendar className=\"size-3\" />\n              Calendar\n              {calendarEvents.length > 0 && (\n                <Badge variant=\"secondary\" className=\"ml-1 text-[10px] px-1\">\n                  {calendarEvents.length}\n                </Badge>\n              )}\n            </TabsTrigger>\n          </TabsList>\n\n          {activeTab === 'emails' && onLinkEmail && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onLinkEmail}>\n              <Link2 className=\"mr-1 size-3\" />\n              Link Email\n            </Button>\n          )}\n          {activeTab === 'calendar' && onLinkEvent && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onLinkEvent}>\n              <Link2 className=\"mr-1 size-3\" />\n              Link Event\n            </Button>\n          )}\n        </div>\n\n        <TabsContent value=\"emails\" className=\"mt-4\">\n          {emails.length > 0 ? (\n            <div className=\"space-y-2\">\n              {emails.map((email) => (\n                <EmailCard\n                  key={email.id}\n                  email={email}\n                  onClick={onEmailClick}\n                  onUnlink={onUnlinkEmail}\n                />\n              ))}\n            </div>\n          ) : (\n            <EmptyState\n              icon={<Mail className=\"size-8\" />}\n              message=\"No linked emails\"\n              action={\n                onLinkEmail && (\n                  <Button variant=\"outline\" size=\"sm\" onClick={onLinkEmail}>\n                    <Link2 className=\"mr-1 size-3\" />\n                    Link an email\n                  </Button>\n                )\n              }\n            />\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"calendar\" className=\"mt-4\">\n          {calendarEvents.length > 0 ? (\n            <div className=\"space-y-2\">\n              {calendarEvents.map((event) => (\n                <CalendarEventCard\n                  key={event.id}\n                  event={event}\n                  onClick={onEventClick}\n                  onUnlink={onUnlinkEvent}\n                />\n              ))}\n            </div>\n          ) : (\n            <EmptyState\n              icon={<Calendar className=\"size-8\" />}\n              message=\"No linked calendar events\"\n              action={\n                onLinkEvent && (\n                  <Button variant=\"outline\" size=\"sm\" onClick={onLinkEvent}>\n                    <Link2 className=\"mr-1 size-3\" />\n                    Link an event\n                  </Button>\n                )\n              }\n            />\n          )}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n\nfunction EmptyState({\n  icon,\n  message,\n  action,\n}: {\n  icon: React.ReactNode;\n  message: string;\n  action?: React.ReactNode;\n}) {\n  return (\n    <div className=\"rounded-lg border border-dashed p-6 text-center\">\n      <div className=\"mx-auto text-muted-foreground/50\">{icon}</div>\n      <p className=\"mt-2 text-sm text-muted-foreground\">{message}</p>\n      {action && <div className=\"mt-3\">{action}</div>}\n    </div>\n  );\n}\n","/**\n * Work item detail page.\n *\n * Displays full details for a single work item with a tabbed content layout.\n * Sections include Description, Checklist, Dependencies, Activity, Memory,\n * and Communications. All metadata saves immediately via optimistic updates\n * through TanStack Query mutations.\n *\n * @see Issue #469\n */\nimport React, { useState, useCallback } from 'react';\nimport { useParams, Link } from 'react-router';\nimport { useWorkItem, workItemKeys } from '@/ui/hooks/queries/use-work-items';\nimport { useWorkItemMemories, memoryKeys } from '@/ui/hooks/queries/use-memories';\nimport { useWorkItemCommunications, communicationsKeys } from '@/ui/hooks/queries/use-communications';\nimport { useActivity } from '@/ui/hooks/queries/use-activity';\nimport { useUpdateWorkItem } from '@/ui/hooks/mutations/use-update-work-item';\nimport { useCreateMemory } from '@/ui/hooks/mutations/use-create-memory';\nimport { useUpdateMemory } from '@/ui/hooks/mutations/use-update-memory';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client';\nimport type { AppBootstrap } from '@/ui/lib/api-types';\nimport { mapApiPriority, mapPriorityToApi, readBootstrap } from '@/ui/lib/work-item-utils';\nimport { SkeletonCard, SkeletonList, ErrorState, Skeleton } from '@/ui/components/feedback';\nimport { Button } from '@/ui/components/ui/button';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/ui/components/ui/card';\nimport { Tabs, TabsList, TabsTrigger, TabsContent } from '@/ui/components/ui/tabs';\nimport { ScrollArea } from '@/ui/components/ui/scroll-area';\nimport { ItemHeader } from '@/ui/components/detail/item-header';\nimport { MetadataGrid } from '@/ui/components/detail/metadata-grid';\nimport { DescriptionEditor } from '@/ui/components/detail/description-editor';\nimport { TodoList } from '@/ui/components/detail/todo-list';\nimport { DependenciesSection } from '@/ui/components/detail/dependencies-section';\nimport type {\n  WorkItemDetail as DetailComponentType,\n  WorkItemStatus,\n  WorkItemPriority,\n  WorkItemKind,\n  WorkItemDependency,\n} from '@/ui/components/detail/types';\nimport { ItemMemories } from '@/ui/components/memory/item-memories';\nimport { MemoryEditor } from '@/ui/components/memory/memory-editor';\nimport type { MemoryItem, MemoryFormData } from '@/ui/components/memory/types';\nimport { ItemCommunications } from '@/ui/components/communications/item-communications';\nimport type { LinkedEmail, LinkedCalendarEvent } from '@/ui/components/communications/types';\nimport {\n  DeleteConfirmDialog,\n  UndoToast,\n  useWorkItemDelete,\n} from '@/ui/components/work-item-delete';\nimport {\n  ChevronRight,\n  Calendar,\n  Network,\n  FileText,\n  CheckSquare,\n  GitBranch,\n  Activity,\n  Brain,\n  Mail,\n  Users,\n  Clock,\n} from 'lucide-react';\n\n/** Format a relative time string from a Date. */\nfunction formatRelativeTime(date: Date): string {\n  const now = new Date();\n  const diffMs = now.getTime() - date.getTime();\n  const diffMins = Math.floor(diffMs / 60000);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffMins < 1) return 'just now';\n  if (diffMins < 60) return `${diffMins}m ago`;\n  if (diffHours < 24) return `${diffHours}h ago`;\n  if (diffDays < 7) return `${diffDays}d ago`;\n  return date.toLocaleDateString(undefined, { month: 'short', day: 'numeric' });\n}\n\nexport function WorkItemDetailPage(): React.JSX.Element {\n  const { id } = useParams<{ id: string }>();\n  const itemId = id ?? '';\n  const queryClient = useQueryClient();\n  const bootstrap = readBootstrap<AppBootstrap>();\n  const participants = bootstrap?.participants ?? [];\n\n  // Data queries\n  const { data: apiDetail, isLoading, error: itemError } = useWorkItem(itemId);\n  const { data: memoriesData, isLoading: memoriesLoading } = useWorkItemMemories(itemId);\n  const { data: commsData, isLoading: communicationsLoading } = useWorkItemCommunications(itemId);\n  const { data: activityData, isLoading: activityLoading } = useActivity(50);\n\n  // Mutations\n  const updateMutation = useUpdateWorkItem();\n  const createMemoryMutation = useCreateMemory();\n  const updateMemoryMutation = useUpdateMemory();\n\n  // Memory editor state\n  const [memoryEditorOpen, setMemoryEditorOpen] = useState(false);\n  const [editingMemory, setEditingMemory] = useState<MemoryItem | null>(null);\n\n  // Delete state\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const {\n    deleteItem: performDelete,\n    isDeleting,\n    undoState,\n    dismissUndo,\n  } = useWorkItemDelete({\n    onDeleted: () => {\n      window.location.href = '/app/work-items';\n    },\n  });\n\n  // Map API detail to component format\n  const workItem: DetailComponentType | null = apiDetail\n    ? (() => {\n        const deps: WorkItemDependency[] = [];\n        if (apiDetail.dependencies?.blocks) {\n          deps.push(\n            ...apiDetail.dependencies.blocks.map((d) => ({\n              id: d.id,\n              title: d.title,\n              kind: 'issue' as WorkItemKind,\n              status: 'not_started' as WorkItemStatus,\n              direction: 'blocks' as const,\n            })),\n          );\n        }\n        if (apiDetail.dependencies?.blocked_by) {\n          deps.push(\n            ...apiDetail.dependencies.blocked_by.map((d) => ({\n              id: d.id,\n              title: d.title,\n              kind: 'issue' as WorkItemKind,\n              status: 'not_started' as WorkItemStatus,\n              direction: 'blocked_by' as const,\n            })),\n          );\n        }\n        return {\n          id: apiDetail.id,\n          title: apiDetail.title,\n          kind: (apiDetail.kind as WorkItemKind) || 'issue',\n          status: (apiDetail.status as WorkItemStatus) || 'not_started',\n          priority: mapApiPriority(apiDetail.priority),\n          description: apiDetail.description || undefined,\n          parentId: apiDetail.parent_id || undefined,\n          parentTitle: apiDetail.parent?.title,\n          estimateMinutes: apiDetail.estimate_minutes || undefined,\n          actualMinutes: apiDetail.actual_minutes || undefined,\n          dueDate: apiDetail.not_after ? new Date(apiDetail.not_after) : undefined,\n          startDate: apiDetail.not_before ? new Date(apiDetail.not_before) : undefined,\n          createdAt: new Date(apiDetail.created_at),\n          updatedAt: new Date(apiDetail.updated_at),\n          todos: [],\n          attachments: [],\n          dependencies: deps,\n        };\n      })()\n    : null;\n\n  // Map memories\n  const memories: MemoryItem[] = (memoriesData?.memories ?? []).map((m) => ({\n    id: m.id,\n    title: m.title,\n    content: m.content,\n    linkedItemId: itemId,\n    linkedItemTitle: workItem?.title || undefined,\n    linkedItemKind: (workItem?.kind || 'issue') as 'issue',\n    createdAt: new Date(m.created_at),\n    updatedAt: new Date(m.updated_at),\n  }));\n\n  // Map communications\n  const emails: LinkedEmail[] = (commsData?.emails ?? []).map((e) => ({\n    id: e.id,\n    subject: 'Email',\n    from: { name: 'Unknown', email: '' },\n    to: [],\n    date: e.received_at ? new Date(e.received_at) : new Date(),\n    snippet: e.body?.substring(0, 100) || '',\n    body: e.body || undefined,\n  }));\n\n  const calendarEvents: LinkedCalendarEvent[] = (commsData?.calendar_events ?? []).map(\n    (e) => ({\n      id: e.id,\n      title: 'Calendar Event',\n      startTime: e.received_at ? new Date(e.received_at) : new Date(),\n      endTime: e.received_at ? new Date(e.received_at) : new Date(),\n      attendees: [],\n    }),\n  );\n\n  // Filter activity for this work item\n  const itemActivity = (activityData?.items ?? []).filter(\n    (a) => a.work_item_id === itemId,\n  );\n\n  // Handlers\n  const handleUpdate = useCallback(\n    (body: Record<string, unknown>) => {\n      updateMutation.mutate({ id: itemId, body: body as Parameters<typeof updateMutation.mutate>[0]['body'] });\n    },\n    [itemId, updateMutation],\n  );\n\n  const handleTitleChange = (title: string) => handleUpdate({ title });\n  const handleDescriptionChange = (description: string) => handleUpdate({ description });\n  const handleStatusChange = (status: WorkItemStatus) => handleUpdate({ status });\n  const handlePriorityChange = (priority: WorkItemPriority) =>\n    handleUpdate({ priority: mapPriorityToApi(priority) });\n  const handleDueDateChange = (date: string) => handleUpdate({ notAfter: date || null });\n  const handleStartDateChange = (date: string) => handleUpdate({ notBefore: date || null });\n  const handleEstimateChange = (minutes: string) => {\n    const value = parseInt(minutes, 10);\n    handleUpdate({ estimateMinutes: isNaN(value) ? null : value });\n  };\n  const handleActualChange = (minutes: string) => {\n    const value = parseInt(minutes, 10);\n    handleUpdate({ actualMinutes: isNaN(value) ? null : value });\n  };\n  const handleParentClick = () => {\n    if (workItem?.parentId) {\n      window.location.href = `/app/work-items/${workItem.parentId}`;\n    }\n  };\n  const handleDependencyClick = (dep: WorkItemDependency) => {\n    window.location.href = `/app/work-items/${dep.id}`;\n  };\n\n  // Memory handlers\n  const handleAddMemory = () => {\n    setEditingMemory(null);\n    setMemoryEditorOpen(true);\n  };\n  const handleEditMemory = (memory: MemoryItem) => {\n    setEditingMemory(memory);\n    setMemoryEditorOpen(true);\n  };\n  const handleCreateMemory = (data: MemoryFormData) => {\n    createMemoryMutation.mutate(\n      { workItemId: itemId, body: { title: data.title, content: data.content, type: 'note' } },\n      { onSuccess: () => setMemoryEditorOpen(false) },\n    );\n  };\n  const handleUpdateMemory = (data: MemoryFormData) => {\n    if (!editingMemory) return;\n    updateMemoryMutation.mutate(\n      { id: editingMemory.id, body: { title: data.title, content: data.content }, workItemId: itemId },\n      {\n        onSuccess: () => {\n          setMemoryEditorOpen(false);\n          setEditingMemory(null);\n        },\n      },\n    );\n  };\n  const handleDeleteMemory = async (memory: MemoryItem) => {\n    if (!confirm(`Delete memory \"${memory.title}\"?`)) return;\n    try {\n      await apiClient.delete(`/api/memories/${memory.id}`);\n      queryClient.invalidateQueries({ queryKey: memoryKeys.forWorkItem(itemId) });\n    } catch {\n      // Silently fail\n    }\n  };\n\n  // Communication handlers\n  const handleUnlinkEmail = async (email: LinkedEmail) => {\n    if (!confirm('Unlink this email from the work item?')) return;\n    try {\n      await apiClient.delete(`/api/work-items/${itemId}/communications/${email.id}`);\n      queryClient.invalidateQueries({ queryKey: communicationsKeys.forWorkItem(itemId) });\n    } catch {\n      // Silently fail\n    }\n  };\n  const handleUnlinkEvent = async (event: LinkedCalendarEvent) => {\n    if (!confirm('Unlink this event from the work item?')) return;\n    try {\n      await apiClient.delete(`/api/work-items/${itemId}/communications/${event.id}`);\n      queryClient.invalidateQueries({ queryKey: communicationsKeys.forWorkItem(itemId) });\n    } catch {\n      // Silently fail\n    }\n  };\n\n  // Delete handler\n  const handleDelete = () => setDeleteDialogOpen(true);\n  const handleConfirmDelete = async () => {\n    if (!workItem) return;\n    await performDelete({ id: workItem.id, title: workItem.title });\n    setDeleteDialogOpen(false);\n  };\n\n  // --- LOADING STATE ---\n  if (isLoading) {\n    return (\n      <div data-testid=\"page-work-item-detail\" className=\"flex flex-col h-full\">\n        <div className=\"p-4 border-b border-border flex items-center gap-4\">\n          <Skeleton width={80} height={32} />\n          <div className=\"flex gap-2\">\n            <Skeleton width={100} height={32} />\n            <Skeleton width={120} height={32} />\n          </div>\n        </div>\n        <div className=\"flex-1 p-6\">\n          <div className=\"mx-auto max-w-5xl space-y-6\">\n            <SkeletonCard />\n            <div className=\"grid gap-6 lg:grid-cols-3\">\n              <div className=\"lg:col-span-2\">\n                <SkeletonCard />\n              </div>\n              <div>\n                <Skeleton width=\"100%\" height={200} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // --- ERROR STATE ---\n  if (itemError || !workItem) {\n    return (\n      <div data-testid=\"page-work-item-detail\" className=\"p-6\">\n        <ErrorState\n          title=\"Work Item Not Found\"\n          message={itemError instanceof Error ? itemError.message : 'The requested work item could not be loaded.'}\n          action={\n            <Button variant=\"outline\" asChild>\n              <Link to=\"/work-items\">Back to Work Items</Link>\n            </Button>\n          }\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div data-testid=\"page-work-item-detail\" className=\"flex flex-col h-full\">\n      {/* Navigation bar */}\n      <div className=\"p-4 border-b border-border bg-background flex items-center gap-4 shrink-0\">\n        <Button variant=\"ghost\" size=\"sm\" asChild>\n          <Link to=\"/work-items\">\n            <ChevronRight className=\"mr-1 size-4 rotate-180\" />\n            Back\n          </Link>\n        </Button>\n        <div className=\"flex gap-2 ml-auto\">\n          <Button variant=\"outline\" size=\"sm\" asChild>\n            <Link to={`/work-items/${itemId}/timeline`}>\n              <Calendar className=\"mr-2 size-4\" />\n              Timeline\n            </Link>\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" asChild>\n            <Link to={`/work-items/${itemId}/graph`}>\n              <Network className=\"mr-2 size-4\" />\n              Dependencies\n            </Link>\n          </Button>\n        </div>\n      </div>\n\n      {/* Main content area */}\n      <ScrollArea className=\"flex-1\">\n        <div className=\"mx-auto max-w-5xl p-6 space-y-6\">\n          {/* Header section */}\n          <ItemHeader\n            title={workItem.title}\n            kind={workItem.kind}\n            status={workItem.status}\n            parentTitle={workItem.parentTitle}\n            onTitleChange={handleTitleChange}\n            onParentClick={handleParentClick}\n            onDelete={handleDelete}\n          />\n\n          {/* Timestamps */}\n          <div className=\"flex items-center gap-4 text-xs text-muted-foreground\">\n            <span className=\"flex items-center gap-1\">\n              <Clock className=\"size-3\" />\n              Created {formatRelativeTime(workItem.createdAt)}\n            </span>\n            <span className=\"flex items-center gap-1\">\n              <Clock className=\"size-3\" />\n              Updated {formatRelativeTime(workItem.updatedAt)}\n            </span>\n            {updateMutation.isPending && (\n              <Badge variant=\"outline\" className=\"text-xs animate-pulse\">\n                Saving...\n              </Badge>\n            )}\n          </div>\n\n          {/* Main grid: content + sidebar */}\n          <div className=\"grid gap-6 lg:grid-cols-3\">\n            {/* Left column - tabbed content */}\n            <div className=\"lg:col-span-2 space-y-6\">\n              {/* Metadata card */}\n              <Card>\n                <CardContent className=\"pt-4\">\n                  <MetadataGrid\n                    status={workItem.status}\n                    priority={workItem.priority}\n                    assignee={workItem.assignee}\n                    dueDate={workItem.dueDate}\n                    startDate={workItem.startDate}\n                    estimateMinutes={workItem.estimateMinutes}\n                    actualMinutes={workItem.actualMinutes}\n                    onStatusChange={handleStatusChange}\n                    onPriorityChange={handlePriorityChange}\n                    onDueDateChange={handleDueDateChange}\n                    onStartDateChange={handleStartDateChange}\n                    onEstimateChange={handleEstimateChange}\n                    onActualChange={handleActualChange}\n                  />\n                </CardContent>\n              </Card>\n\n              {/* Tabbed content sections */}\n              <Tabs defaultValue=\"description\">\n                <TabsList variant=\"line\" className=\"w-full justify-start\">\n                  <TabsTrigger value=\"description\" className=\"gap-1.5\">\n                    <FileText className=\"size-3.5\" />\n                    Description\n                  </TabsTrigger>\n                  <TabsTrigger value=\"checklist\" className=\"gap-1.5\">\n                    <CheckSquare className=\"size-3.5\" />\n                    Checklist\n                    {workItem.todos.length > 0 && (\n                      <Badge variant=\"secondary\" className=\"ml-1 text-xs px-1.5 py-0\">\n                        {workItem.todos.length}\n                      </Badge>\n                    )}\n                  </TabsTrigger>\n                  <TabsTrigger value=\"dependencies\" className=\"gap-1.5\">\n                    <GitBranch className=\"size-3.5\" />\n                    Dependencies\n                    {workItem.dependencies.length > 0 && (\n                      <Badge variant=\"secondary\" className=\"ml-1 text-xs px-1.5 py-0\">\n                        {workItem.dependencies.length}\n                      </Badge>\n                    )}\n                  </TabsTrigger>\n                  <TabsTrigger value=\"activity\" className=\"gap-1.5\">\n                    <Activity className=\"size-3.5\" />\n                    Activity\n                  </TabsTrigger>\n                </TabsList>\n\n                {/* Description Tab */}\n                <TabsContent value=\"description\" data-testid=\"tab-content-description\">\n                  <Card>\n                    <CardContent className=\"pt-4\">\n                      <DescriptionEditor\n                        description={workItem.description}\n                        onDescriptionChange={handleDescriptionChange}\n                      />\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n\n                {/* Checklist Tab */}\n                <TabsContent value=\"checklist\" data-testid=\"tab-content-checklist\">\n                  <Card>\n                    <CardContent className=\"pt-4\">\n                      <TodoList todos={workItem.todos} />\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n\n                {/* Dependencies Tab */}\n                <TabsContent value=\"dependencies\" data-testid=\"tab-content-dependencies\">\n                  <Card>\n                    <CardContent className=\"pt-4\">\n                      <DependenciesSection\n                        dependencies={workItem.dependencies}\n                        onDependencyClick={handleDependencyClick}\n                      />\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n\n                {/* Activity Tab */}\n                <TabsContent value=\"activity\" data-testid=\"tab-content-activity\">\n                  <Card>\n                    <CardContent className=\"pt-4\">\n                      {activityLoading ? (\n                        <SkeletonList count={3} variant=\"row\" />\n                      ) : itemActivity.length === 0 ? (\n                        <div className=\"py-8 text-center text-muted-foreground\">\n                          <Activity className=\"size-8 mx-auto mb-2 opacity-50\" />\n                          <p className=\"text-sm\">No activity recorded yet</p>\n                        </div>\n                      ) : (\n                        <div className=\"space-y-3\">\n                          {itemActivity.map((act) => (\n                            <div\n                              key={act.id}\n                              className=\"flex items-start gap-3 py-2 border-b border-border last:border-0\"\n                            >\n                              <div\n                                className={`size-7 rounded-full flex items-center justify-center shrink-0 ${\n                                  act.actor_email?.includes('agent')\n                                    ? 'bg-violet-500/10 text-violet-500 dark:bg-violet-500/20'\n                                    : 'bg-primary/10 text-primary dark:bg-primary/20'\n                                }`}\n                              >\n                                <span className=\"text-xs font-medium\">\n                                  {(act.actor_email ?? 'S').charAt(0).toUpperCase()}\n                                </span>\n                              </div>\n                              <div className=\"flex-1 min-w-0\">\n                                <p className=\"text-sm\">\n                                  <span className=\"font-medium text-foreground\">\n                                    {act.actor_email || 'System'}\n                                  </span>{' '}\n                                  <span className=\"text-muted-foreground\">{act.description}</span>\n                                </p>\n                                <p className=\"text-xs text-muted-foreground mt-0.5\">\n                                  {formatRelativeTime(new Date(act.created_at))}\n                                </p>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      )}\n                    </CardContent>\n                  </Card>\n                </TabsContent>\n              </Tabs>\n            </div>\n\n            {/* Right column - sidebar panels */}\n            <div className=\"space-y-6\">\n              {/* Memories panel */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                    <Brain className=\"size-4 text-muted-foreground\" />\n                    Memories\n                    {memories.length > 0 && (\n                      <Badge variant=\"secondary\" className=\"text-xs px-1.5 py-0\">\n                        {memories.length}\n                      </Badge>\n                    )}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {memoriesLoading ? (\n                    <Skeleton width=\"100%\" height={80} />\n                  ) : (\n                    <ItemMemories\n                      memories={memories}\n                      onAddMemory={handleAddMemory}\n                      onEditMemory={handleEditMemory}\n                      onDeleteMemory={handleDeleteMemory}\n                    />\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Communications panel */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                    <Mail className=\"size-4 text-muted-foreground\" />\n                    Communications\n                    {(emails.length + calendarEvents.length) > 0 && (\n                      <Badge variant=\"secondary\" className=\"text-xs px-1.5 py-0\">\n                        {emails.length + calendarEvents.length}\n                      </Badge>\n                    )}\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {communicationsLoading ? (\n                    <Skeleton width=\"100%\" height={80} />\n                  ) : (\n                    <ItemCommunications\n                      emails={emails}\n                      calendarEvents={calendarEvents}\n                      onUnlinkEmail={handleUnlinkEmail}\n                      onUnlinkEvent={handleUnlinkEvent}\n                    />\n                  )}\n                </CardContent>\n              </Card>\n\n              {/* Participants panel */}\n              <Card>\n                <CardHeader className=\"pb-3\">\n                  <CardTitle className=\"text-sm font-medium flex items-center gap-2\">\n                    <Users className=\"size-4 text-muted-foreground\" />\n                    Participants\n                  </CardTitle>\n                </CardHeader>\n                <CardContent>\n                  {participants.length === 0 ? (\n                    <p className=\"text-xs text-muted-foreground\">No participants assigned</p>\n                  ) : (\n                    <ul className=\"space-y-2\">\n                      {participants.map((p, idx) => (\n                        <li key={idx} className=\"flex items-center gap-2\">\n                          <div className=\"size-7 rounded-full bg-primary/10 dark:bg-primary/20 flex items-center justify-center\">\n                            <span className=\"text-xs font-medium text-primary\">\n                              {(p.participant ?? 'U')[0].toUpperCase()}\n                            </span>\n                          </div>\n                          <span className=\"text-sm\">{p.participant ?? 'Unknown'}</span>\n                          {p.role && (\n                            <Badge variant=\"outline\" className=\"text-xs\">\n                              {p.role}\n                            </Badge>\n                          )}\n                        </li>\n                      ))}\n                    </ul>\n                  )}\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </ScrollArea>\n\n      {/* Memory Editor Dialog */}\n      <MemoryEditor\n        memory={editingMemory || undefined}\n        open={memoryEditorOpen}\n        onOpenChange={setMemoryEditorOpen}\n        onSubmit={editingMemory ? handleUpdateMemory : handleCreateMemory}\n      />\n\n      {/* Delete Confirmation */}\n      <DeleteConfirmDialog\n        open={deleteDialogOpen}\n        onOpenChange={setDeleteDialogOpen}\n        item={\n          workItem\n            ? { id: workItem.id, title: workItem.title, kind: workItem.kind, childCount: 0 }\n            : undefined\n        }\n        onConfirm={handleConfirmDelete}\n        isDeleting={isDeleting}\n      />\n      {undoState && (\n        <UndoToast\n          visible={!!undoState}\n          itemTitle={undoState.itemTitle}\n          onUndo={undoState.onUndo}\n          onDismiss={dismissUndo}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":["MutationObserver","Subscribable","#client","#currentResult","#currentMutation","#mutateOptions","client","options","#updateResult","prevOptions","shallowEqualObjects","hashKey","action","#notify","variables","state","getDefaultState","notifyManager","onMutateResult","context","e","listener","useMutation","queryClient","useQueryClient","observer","React.useState","React.useEffect","result","React.useSyncExternalStore","React.useCallback","onStoreChange","mutate","mutateOptions","noop","shouldThrowError","__iconNode","Activity","createLucideIcon","ArrowLeft","ArrowRight","Bold","Brain","Code","GitBranch","Italic","ListOrdered","PenLine","Pen","SquareCheckBig","memoryKeys","workItemId","useWorkItemMemories","useQuery","signal","apiClient","communicationsKeys","useWorkItemCommunications","useUpdateWorkItem","id","body","workItemKeys","previousDetail","optimisticData","_error","_data","useCreateMemory","useUpdateMemory","getKindIcon","kind","jsx","Folder","Target","Layers","FileText","getKindLabel","getStatusVariant","status","getStatusLabel","c","ItemHeader","title","parentTitle","onTitleChange","onParentClick","onDelete","className","isEditing","setIsEditing","useState","editValue","setEditValue","handleStartEdit","handleSave","handleCancel","handleKeyDown","cn","jsxs","ChevronRight","Input","Button","Check","X","Pencil","Trash2","Badge","formatDate","date","formatMinutes","minutes","hours","mins","MetadataField","icon","label","value","editable","onEdit","editType","Select","SelectTrigger","SelectValue","SelectContent","opt","SelectItem","STATUS_OPTIONS","PRIORITY_OPTIONS","MetadataGrid","priority","assignee","dueDate","startDate","estimateMinutes","actualMinutes","onStatusChange","onPriorityChange","onAssigneeChange","onDueDateChange","onStartDateChange","onEstimateChange","onActualChange","getPriorityLabel","p","o","s","AlertCircle","User","Calendar","Clock","DescriptionEditor","description","onDescriptionChange","showPreview","setShowPreview","renderMarkdown","text","line","i","parseInline","remaining","keyIndex","codeMatch","boldMatch","italicMatch","nextSpecial","Edit2","Eye","Textarea","CHECKBOX_NAME","createCheckboxContext","createContextScope","CheckboxProviderImpl","useCheckboxContext","CheckboxProvider","props","__scopeCheckbox","checkedProp","children","defaultChecked","disabled","form","name","onCheckedChange","required","internal_do_not_use_render","checked","setChecked","useControllableState","control","setControl","bubbleInput","setBubbleInput","hasConsumerStoppedPropagationRef","React.useRef","isFormControl","isIndeterminate","isFunction","TRIGGER_NAME","CheckboxTrigger","React.forwardRef","onKeyDown","onClick","checkboxProps","forwardedRef","composedRefs","useComposedRefs","initialCheckedStateRef","reset","Primitive","getState","composeEventHandlers","event","prevChecked","Checkbox","Fragment","CheckboxBubbleInput","INDICATOR_NAME","CheckboxIndicator","forceMount","indicatorProps","Presence","BUBBLE_INPUT_NAME","usePrevious","controlSize","useSize","input","inputProto","bubbles","defaultCheckedRef","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","CheckIcon","TodoList","todos","onAdd","onToggle","newTodoText","setNewTodoText","handleAdd","completedCount","t","todo","GripVertical","Plus","DependenciesSection","dependencies","onDependencyClick","onAddDependency","blockedBy","d","blocks","renderDependency","dep","getLinkedItemIcon","MemoryCard","memory","preview","DropdownMenu","DropdownMenuTrigger","MoreVertical","DropdownMenuContent","DropdownMenuItem","tag","ItemMemories","memories","onMemoryClick","onAddMemory","onLinkMemory","onEditMemory","onDeleteMemory","Link2","MemoryEditor","open","onOpenChange","onSubmit","setTitle","content","setContent","tagInput","setTagInput","tags","setTags","activeTab","setActiveTab","textareaRef","insertMarkdown","useCallback","before","after","textarea","start","end","selected","newContent","newStart","newEnd","handleAddTag","handleRemoveTag","tagToRemove","handleSubmit","isValid","renderPreview","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","Tabs","v","List","TabsList","TabsTrigger","Edit3","TabsContent","DialogFooter","ItemCommunications","emails","calendarEvents","onEmailClick","onEventClick","onUnlinkEmail","onUnlinkEvent","onLinkEmail","onLinkEvent","totalCount","Mail","email","EmailCard","EmptyState","CalendarEventCard","message","formatRelativeTime","diffMs","diffMins","diffHours","diffDays","WorkItemDetailPage","useParams","itemId","participants","readBootstrap","apiDetail","isLoading","itemError","useWorkItem","memoriesData","memoriesLoading","commsData","communicationsLoading","activityData","activityLoading","useActivity","updateMutation","createMemoryMutation","updateMemoryMutation","memoryEditorOpen","setMemoryEditorOpen","editingMemory","setEditingMemory","deleteDialogOpen","setDeleteDialogOpen","performDelete","isDeleting","undoState","dismissUndo","useWorkItemDelete","workItem","deps","mapApiPriority","m","itemActivity","a","handleUpdate","handleTitleChange","handleDescriptionChange","handleStatusChange","handlePriorityChange","mapPriorityToApi","handleDueDateChange","handleStartDateChange","handleEstimateChange","handleActualChange","handleParentClick","handleDependencyClick","handleAddMemory","handleEditMemory","handleCreateMemory","data","handleUpdateMemory","handleDeleteMemory","handleUnlinkEmail","handleUnlinkEvent","handleDelete","handleConfirmDelete","Skeleton","SkeletonCard","ErrorState","Link","Network","ScrollArea","Card","CardContent","CheckSquare","SkeletonList","act","CardHeader","CardTitle","Users","idx","DeleteConfirmDialog","UndoToast"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,22]}