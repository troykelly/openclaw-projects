{"version":3,"file":"MemoryPage-kunKj1wG.js","sources":["../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/lightbulb.js","../../../../ui/pages/MemoryPage.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5\",\n      key: \"1gvzjb\"\n    }\n  ],\n  [\"path\", { d: \"M9 18h6\", key: \"x1upvd\" }],\n  [\"path\", { d: \"M10 22h4\", key: \"ceow96\" }]\n];\nconst Lightbulb = createLucideIcon(\"lightbulb\", __iconNode);\n\nexport { __iconNode, Lightbulb as default };\n//# sourceMappingURL=lightbulb.js.map\n","/**\n * Memory/Knowledge page.\n *\n * Displays a searchable, filterable list of memories with type badges,\n * content previews, tags, linked work item info, and dates. Supports:\n * - Searching memories by title and content\n * - Filtering by memory type (preference, fact, decision, context)\n * - Inline expansion for full content viewing\n * - Create/Edit memory via dialog with markdown editor\n * - Delete memory with confirmation\n * - Loading, error, and empty states\n * - Dark mode and mobile responsive\n *\n * Uses TanStack Query hooks for data fetching and mutations.\n */\nimport React, { useState, useMemo, useCallback } from 'react';\nimport {\n  Search,\n  Plus,\n  Brain,\n  FileText,\n  Lightbulb,\n  CheckCircle,\n  Layers,\n  MoreVertical,\n  Pencil,\n  Trash2,\n  ChevronDown,\n  ChevronUp,\n  Link2,\n  Calendar,\n  Tag,\n} from 'lucide-react';\nimport { apiClient } from '@/ui/lib/api-client';\nimport type {\n  Memory,\n  MemoryListResponse,\n  CreateMemoryBody,\n  UpdateMemoryBody,\n} from '@/ui/lib/api-types';\nimport {\n  Skeleton,\n  SkeletonList,\n  ErrorState,\n  EmptyState,\n} from '@/ui/components/feedback';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport { Textarea } from '@/ui/components/ui/textarea';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Card, CardContent } from '@/ui/components/ui/card';\nimport { ScrollArea } from '@/ui/components/ui/scroll-area';\nimport { Separator } from '@/ui/components/ui/separator';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/ui/components/ui/dialog';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/ui/components/ui/select';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/ui/components/ui/dropdown-menu';\nimport { useMemories } from '@/ui/hooks/queries/use-memories';\n\n/** Memory type for filtering. */\ntype MemoryType = 'preference' | 'fact' | 'decision' | 'context';\n\n/** All valid memory types. */\nconst MEMORY_TYPES: MemoryType[] = ['preference', 'fact', 'decision', 'context'];\n\n/** Get icon for a memory type. */\nfunction getTypeIcon(type: string | undefined): React.ReactNode {\n  switch (type) {\n    case 'preference':\n      return <Lightbulb className=\"size-4\" />;\n    case 'fact':\n      return <FileText className=\"size-4\" />;\n    case 'decision':\n      return <CheckCircle className=\"size-4\" />;\n    case 'context':\n      return <Layers className=\"size-4\" />;\n    default:\n      return <Brain className=\"size-4\" />;\n  }\n}\n\n/** Get display label for a memory type. */\nfunction getTypeLabel(type: string | undefined): string {\n  switch (type) {\n    case 'preference':\n      return 'Preference';\n    case 'fact':\n      return 'Fact';\n    case 'decision':\n      return 'Decision';\n    case 'context':\n      return 'Context';\n    default:\n      return 'Memory';\n  }\n}\n\n/** Get badge variant color for a memory type. */\nfunction getTypeBadgeClass(type: string | undefined): string {\n  switch (type) {\n    case 'preference':\n      return 'bg-blue-500/10 text-blue-700 dark:text-blue-300 border-blue-500/20';\n    case 'fact':\n      return 'bg-green-500/10 text-green-700 dark:text-green-300 border-green-500/20';\n    case 'decision':\n      return 'bg-purple-500/10 text-purple-700 dark:text-purple-300 border-purple-500/20';\n    case 'context':\n      return 'bg-orange-500/10 text-orange-700 dark:text-orange-300 border-orange-500/20';\n    default:\n      return '';\n  }\n}\n\n/** Format a date string for display. */\nfunction formatDate(dateStr: string): string {\n  return new Date(dateStr).toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n  });\n}\n\nexport function MemoryPage(): React.JSX.Element {\n  const [search, setSearch] = useState('');\n  const [typeFilter, setTypeFilter] = useState<string>('all');\n  const [expandedId, setExpandedId] = useState<string | null>(null);\n  const [formOpen, setFormOpen] = useState(false);\n  const [editingMemory, setEditingMemory] = useState<Memory | null>(null);\n  const [deleteTarget, setDeleteTarget] = useState<Memory | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const {\n    data,\n    isLoading,\n    isError,\n    error,\n    refetch,\n  } = useMemories();\n\n  /** Filter and search memories. */\n  const filteredMemories = useMemo(() => {\n    if (!data?.memories) return [];\n    let result = data.memories;\n\n    // Filter by type\n    if (typeFilter !== 'all') {\n      result = result.filter((m) => m.type === typeFilter);\n    }\n\n    // Search by title and content\n    if (search.trim()) {\n      const query = search.toLowerCase();\n      result = result.filter(\n        (m) =>\n          m.title.toLowerCase().includes(query) ||\n          m.content.toLowerCase().includes(query),\n      );\n    }\n\n    return result;\n  }, [data?.memories, typeFilter, search]);\n\n  const handleToggleExpand = useCallback((id: string) => {\n    setExpandedId((prev) => (prev === id ? null : id));\n  }, []);\n\n  const handleCreate = useCallback(\n    async (body: CreateMemoryBody) => {\n      setIsSubmitting(true);\n      try {\n        // Create as a standalone memory (not attached to a work item)\n        await apiClient.post('/api/memory', body);\n        setFormOpen(false);\n        setEditingMemory(null);\n        refetch();\n      } catch (err) {\n        console.error('Failed to create memory:', err);\n      } finally {\n        setIsSubmitting(false);\n      }\n    },\n    [refetch],\n  );\n\n  const handleUpdate = useCallback(\n    async (body: UpdateMemoryBody) => {\n      if (!editingMemory) return;\n      setIsSubmitting(true);\n      try {\n        await apiClient.patch(`/api/memories/${editingMemory.id}`, body);\n        setFormOpen(false);\n        setEditingMemory(null);\n        refetch();\n      } catch (err) {\n        console.error('Failed to update memory:', err);\n      } finally {\n        setIsSubmitting(false);\n      }\n    },\n    [editingMemory, refetch],\n  );\n\n  const handleDelete = useCallback(\n    async (memory: Memory) => {\n      try {\n        await apiClient.delete(`/api/memories/${memory.id}`);\n        setDeleteTarget(null);\n        if (expandedId === memory.id) {\n          setExpandedId(null);\n        }\n        refetch();\n      } catch (err) {\n        console.error('Failed to delete memory:', err);\n      }\n    },\n    [expandedId, refetch],\n  );\n\n  const handleEdit = useCallback((memory: Memory) => {\n    setEditingMemory(memory);\n    setFormOpen(true);\n  }, []);\n\n  const handleAddNew = useCallback(() => {\n    setEditingMemory(null);\n    setFormOpen(true);\n  }, []);\n\n  // Loading state\n  if (isLoading) {\n    return (\n      <div data-testid=\"page-memory\" className=\"p-6\">\n        <div className=\"mb-6 flex items-center justify-between\">\n          <Skeleton width={200} height={32} />\n          <Skeleton width={140} height={36} />\n        </div>\n        <div className=\"mb-4 flex gap-3\">\n          <Skeleton width=\"100%\" height={40} className=\"max-w-md\" />\n          <Skeleton width={150} height={40} />\n        </div>\n        <SkeletonList count={6} variant=\"card\" />\n      </div>\n    );\n  }\n\n  // Error state\n  if (isError) {\n    return (\n      <div data-testid=\"page-memory\" className=\"p-6\">\n        <ErrorState\n          type=\"generic\"\n          title=\"Failed to load memories\"\n          description={error instanceof Error ? error.message : 'Unknown error'}\n          onRetry={() => refetch()}\n        />\n      </div>\n    );\n  }\n\n  const total = data?.total ?? 0;\n\n  return (\n    <div data-testid=\"page-memory\" className=\"p-6 h-full flex flex-col\">\n      {/* Header */}\n      <div className=\"mb-6 flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between\">\n        <div>\n          <h1 className=\"text-2xl font-semibold text-foreground\">Memory</h1>\n          <p className=\"text-sm text-muted-foreground mt-1\">\n            {total} memor{total !== 1 ? 'ies' : 'y'}\n            {typeFilter !== 'all' && ` (${filteredMemories.length} shown)`}\n          </p>\n        </div>\n        <Button onClick={handleAddNew} data-testid=\"add-memory-button\">\n          <Plus className=\"mr-2 size-4\" />\n          Add Memory\n        </Button>\n      </div>\n\n      {/* Search and Filters */}\n      <div className=\"mb-4 flex flex-col gap-3 sm:flex-row sm:items-center\">\n        <div className=\"relative flex-1 max-w-md\">\n          <Search className=\"absolute left-3 top-1/2 size-4 -translate-y-1/2 text-muted-foreground\" />\n          <Input\n            type=\"text\"\n            placeholder=\"Search memories...\"\n            value={search}\n            onChange={(e) => setSearch(e.target.value)}\n            className=\"pl-9\"\n            data-testid=\"memory-search-input\"\n          />\n        </div>\n\n        <Select\n          value={typeFilter}\n          onValueChange={setTypeFilter}\n        >\n          <SelectTrigger className=\"w-[160px]\" data-testid=\"type-filter\">\n            <SelectValue placeholder=\"All types\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All types</SelectItem>\n            <SelectItem value=\"preference\">Preferences</SelectItem>\n            <SelectItem value=\"fact\">Facts</SelectItem>\n            <SelectItem value=\"decision\">Decisions</SelectItem>\n            <SelectItem value=\"context\">Context</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {/* Memory List */}\n      {filteredMemories.length === 0 ? (\n        <Card>\n          <CardContent className=\"p-8\">\n            <EmptyState\n              variant=\"documents\"\n              title={search || typeFilter !== 'all' ? 'No memories found' : 'No memories yet'}\n              description={\n                search || typeFilter !== 'all'\n                  ? 'Try adjusting your search or filter criteria.'\n                  : 'Store knowledge, preferences, decisions, and context for AI agents.'\n              }\n              onAction={!search && typeFilter === 'all' ? handleAddNew : undefined}\n              actionLabel=\"Create Memory\"\n            />\n          </CardContent>\n        </Card>\n      ) : (\n        <ScrollArea className=\"flex-1\">\n          <div className=\"space-y-3\" data-testid=\"memory-list\">\n            {filteredMemories.map((memory) => {\n              const isExpanded = expandedId === memory.id;\n              const preview =\n                memory.content.length > 200\n                  ? memory.content.slice(0, 200) + '...'\n                  : memory.content;\n\n              return (\n                <Card\n                  key={memory.id}\n                  data-testid=\"memory-card\"\n                  className=\"group transition-colors hover:bg-accent/30\"\n                >\n                  <CardContent className=\"p-4\">\n                    {/* Card Header */}\n                    <div className=\"flex items-start justify-between gap-2\">\n                      <div\n                        className=\"flex-1 min-w-0 cursor-pointer\"\n                        onClick={() => handleToggleExpand(memory.id)}\n                      >\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          {memory.type && (\n                            <Badge\n                              variant=\"outline\"\n                              className={`text-xs gap-1 ${getTypeBadgeClass(memory.type)}`}\n                              data-testid=\"memory-type-badge\"\n                            >\n                              {getTypeIcon(memory.type)}\n                              {getTypeLabel(memory.type)}\n                            </Badge>\n                          )}\n                        </div>\n                        <h3 className=\"font-medium text-foreground leading-tight\">\n                          {memory.title}\n                        </h3>\n                      </div>\n\n                      {/* Actions dropdown */}\n                      <DropdownMenu>\n                        <DropdownMenuTrigger asChild>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"icon\"\n                            className=\"size-7 opacity-0 group-hover:opacity-100 shrink-0\"\n                            data-testid=\"memory-actions\"\n                          >\n                            <MoreVertical className=\"size-4\" />\n                          </Button>\n                        </DropdownMenuTrigger>\n                        <DropdownMenuContent align=\"end\">\n                          <DropdownMenuItem onClick={() => handleEdit(memory)}>\n                            <Pencil className=\"mr-2 size-4\" />\n                            Edit\n                          </DropdownMenuItem>\n                          <DropdownMenuItem\n                            className=\"text-destructive focus:text-destructive\"\n                            onClick={() => setDeleteTarget(memory)}\n                          >\n                            <Trash2 className=\"mr-2 size-4\" />\n                            Delete\n                          </DropdownMenuItem>\n                        </DropdownMenuContent>\n                      </DropdownMenu>\n                    </div>\n\n                    {/* Content preview / expanded */}\n                    <div\n                      className=\"mt-2 cursor-pointer\"\n                      onClick={() => handleToggleExpand(memory.id)}\n                    >\n                      {isExpanded ? (\n                        <div className=\"text-sm text-foreground whitespace-pre-wrap\" data-testid=\"memory-full-content\">\n                          {memory.content}\n                        </div>\n                      ) : (\n                        <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                          {preview}\n                        </p>\n                      )}\n                    </div>\n\n                    {/* Footer */}\n                    <div className=\"mt-3 flex flex-wrap items-center justify-between gap-2 text-xs text-muted-foreground\">\n                      <div className=\"flex items-center gap-3\">\n                        {memory.work_item_id && (\n                          <span className=\"flex items-center gap-1\">\n                            <Link2 className=\"size-3\" />\n                            Linked\n                          </span>\n                        )}\n                        <span className=\"flex items-center gap-1\">\n                          <Calendar className=\"size-3\" />\n                          {formatDate(memory.updated_at)}\n                        </span>\n                      </div>\n\n                      <button\n                        className=\"flex items-center gap-1 text-xs text-muted-foreground hover:text-foreground transition-colors\"\n                        onClick={() => handleToggleExpand(memory.id)}\n                        data-testid=\"memory-expand-toggle\"\n                      >\n                        {isExpanded ? (\n                          <>\n                            Collapse <ChevronUp className=\"size-3\" />\n                          </>\n                        ) : (\n                          <>\n                            Expand <ChevronDown className=\"size-3\" />\n                          </>\n                        )}\n                      </button>\n                    </div>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        </ScrollArea>\n      )}\n\n      {/* Create/Edit Memory Dialog */}\n      <MemoryFormDialog\n        open={formOpen}\n        onOpenChange={(open) => {\n          setFormOpen(open);\n          if (!open) setEditingMemory(null);\n        }}\n        memory={editingMemory}\n        isSubmitting={isSubmitting}\n        onSubmit={(data) => {\n          if (editingMemory) {\n            handleUpdate(data);\n          } else {\n            handleCreate(data as CreateMemoryBody);\n          }\n        }}\n      />\n\n      {/* Delete Confirmation Dialog */}\n      <Dialog\n        open={!!deleteTarget}\n        onOpenChange={(open) => {\n          if (!open) setDeleteTarget(null);\n        }}\n      >\n        <DialogContent className=\"sm:max-w-sm\" data-testid=\"delete-confirm-dialog\">\n          <DialogHeader>\n            <DialogTitle>Delete Memory</DialogTitle>\n            <DialogDescription>\n              Are you sure you want to delete &quot;{deleteTarget?.title}&quot;?\n              This action cannot be undone.\n            </DialogDescription>\n          </DialogHeader>\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setDeleteTarget(null)}>\n              Cancel\n            </Button>\n            <Button\n              variant=\"destructive\"\n              onClick={() => deleteTarget && handleDelete(deleteTarget)}\n              data-testid=\"confirm-delete-button\"\n            >\n              Delete\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n\n// ---------------------------------------------------------------------------\n// MemoryFormDialog - extracted for readability\n// ---------------------------------------------------------------------------\n\ninterface MemoryFormDialogProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  memory: Memory | null;\n  isSubmitting: boolean;\n  onSubmit: (data: CreateMemoryBody | UpdateMemoryBody) => void;\n}\n\nfunction MemoryFormDialog({\n  open,\n  onOpenChange,\n  memory,\n  isSubmitting,\n  onSubmit,\n}: MemoryFormDialogProps) {\n  const [title, setTitle] = useState('');\n  const [content, setContent] = useState('');\n  const [type, setType] = useState<string>('fact');\n\n  // Reset form when dialog opens/closes or memory changes\n  React.useEffect(() => {\n    if (open) {\n      setTitle(memory?.title ?? '');\n      setContent(memory?.content ?? '');\n      setType(memory?.type ?? 'fact');\n    }\n  }, [open, memory]);\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (memory) {\n      // Update: only send changed fields\n      onSubmit({\n        title: title.trim(),\n        content: content.trim(),\n      });\n    } else {\n      // Create: send all fields\n      onSubmit({\n        title: title.trim(),\n        content: content.trim(),\n        type: type,\n      });\n    }\n  };\n\n  const isValid = title.trim().length > 0 && content.trim().length > 0;\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"sm:max-w-2xl\" data-testid=\"memory-form-dialog\">\n        <DialogHeader>\n          <DialogTitle>\n            {memory ? 'Edit Memory' : 'Create Memory'}\n          </DialogTitle>\n          <DialogDescription>\n            {memory\n              ? 'Update the memory details below.'\n              : 'Store knowledge, preferences, decisions, or context.'}\n          </DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <label htmlFor=\"memory-title\" className=\"text-sm font-medium\">\n              Title <span className=\"text-destructive\">*</span>\n            </label>\n            <Input\n              id=\"memory-title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"Memory title\"\n              required\n              data-testid=\"memory-title-input\"\n            />\n          </div>\n\n          {!memory && (\n            <div className=\"space-y-2\">\n              <label htmlFor=\"memory-type\" className=\"text-sm font-medium\">\n                Type\n              </label>\n              <Select value={type} onValueChange={setType}>\n                <SelectTrigger data-testid=\"memory-type-select\">\n                  <SelectValue placeholder=\"Select type\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"preference\">Preference</SelectItem>\n                  <SelectItem value=\"fact\">Fact</SelectItem>\n                  <SelectItem value=\"decision\">Decision</SelectItem>\n                  <SelectItem value=\"context\">Context</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          )}\n\n          <div className=\"space-y-2\">\n            <label htmlFor=\"memory-content\" className=\"text-sm font-medium\">\n              Content <span className=\"text-destructive\">*</span>\n            </label>\n            <Textarea\n              id=\"memory-content\"\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n              placeholder=\"Write memory content here... (Markdown supported)\"\n              className=\"min-h-[200px] font-mono text-sm\"\n              required\n              data-testid=\"memory-content-input\"\n            />\n          </div>\n\n          <DialogFooter>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={() => onOpenChange(false)}\n            >\n              Cancel\n            </Button>\n            <Button\n              type=\"submit\"\n              disabled={!isValid || isSubmitting}\n              data-testid=\"memory-form-submit\"\n            >\n              {memory ? 'Save Changes' : 'Create Memory'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n"],"names":["__iconNode","Lightbulb","createLucideIcon","getTypeIcon","type","jsx","FileText","CheckCircle","Layers","Brain","getTypeLabel","getTypeBadgeClass","formatDate","dateStr","MemoryPage","search","setSearch","useState","typeFilter","setTypeFilter","expandedId","setExpandedId","formOpen","setFormOpen","editingMemory","setEditingMemory","deleteTarget","setDeleteTarget","isSubmitting","setIsSubmitting","data","isLoading","isError","error","refetch","useMemories","filteredMemories","useMemo","result","m","query","handleToggleExpand","useCallback","id","prev","handleCreate","body","apiClient","err","handleUpdate","handleDelete","memory","handleEdit","handleAddNew","jsxs","Skeleton","SkeletonList","ErrorState","total","Button","Plus","Search","Input","e","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","Card","CardContent","EmptyState","ScrollArea","isExpanded","preview","Badge","DropdownMenu","DropdownMenuTrigger","MoreVertical","DropdownMenuContent","DropdownMenuItem","Pencil","Trash2","Link2","Calendar","Fragment","ChevronUp","ChevronDown","MemoryFormDialog","open","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","DialogFooter","onOpenChange","onSubmit","title","setTitle","content","setContent","setType","React","handleSubmit","isValid","Textarea"],"mappings":"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","x_google_ignoreList":[0]}