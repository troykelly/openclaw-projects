{"version":3,"file":"WorkItemDetailPage-BdZEb73z.js","sources":["../../../../../node_modules/.pnpm/@tanstack+query-core@5.90.20/node_modules/@tanstack/query-core/build/modern/mutationObserver.js","../../../../../node_modules/.pnpm/@tanstack+react-query@5.90.20_react@19.2.4/node_modules/@tanstack/react-query/build/modern/useMutation.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/arrow-right.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/bold.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/brain.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/code.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/ellipsis-vertical.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/external-link.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/italic.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/list-ordered.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/map-pin.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/paperclip.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/pen-line.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/pen.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/unlink.js","../../../../../node_modules/.pnpm/lucide-react@0.563.0_react@19.2.4/node_modules/lucide-react/dist/esm/icons/video.js","../../../../ui/hooks/queries/use-memories.ts","../../../../ui/hooks/queries/use-communications.ts","../../../../ui/hooks/mutations/use-update-work-item.ts","../../../../ui/hooks/mutations/use-create-memory.ts","../../../../ui/hooks/mutations/use-update-memory.ts","../../../../ui/components/detail/item-header.tsx","../../../../ui/components/detail/metadata-grid.tsx","../../../../ui/components/detail/description-editor.tsx","../../../../../node_modules/.pnpm/@radix-ui+react-checkbox@1.3.3_@types+react-dom@19.2.3_@types+react@19.2.10__@types+rea_5132bbb1edf049509ad81076406f08e7/node_modules/@radix-ui/react-checkbox/dist/index.mjs","../../../../ui/components/ui/checkbox.tsx","../../../../ui/components/detail/todo-list.tsx","../../../../ui/components/detail/attachments-section.tsx","../../../../ui/components/detail/dependencies-section.tsx","../../../../ui/components/detail/item-detail.tsx","../../../../ui/components/memory/memory-card.tsx","../../../../ui/components/memory/item-memories.tsx","../../../../ui/components/memory/memory-editor.tsx","../../../../ui/components/communications/email-card.tsx","../../../../ui/components/communications/calendar-event-card.tsx","../../../../ui/components/communications/item-communications.tsx","../../../../ui/pages/WorkItemDetailPage.tsx"],"sourcesContent":["// src/mutationObserver.ts\nimport { getDefaultState } from \"./mutation.js\";\nimport { notifyManager } from \"./notifyManager.js\";\nimport { Subscribable } from \"./subscribable.js\";\nimport { hashKey, shallowEqualObjects } from \"./utils.js\";\nvar MutationObserver = class extends Subscribable {\n  #client;\n  #currentResult = void 0;\n  #currentMutation;\n  #mutateOptions;\n  constructor(client, options) {\n    super();\n    this.#client = client;\n    this.setOptions(options);\n    this.bindMethods();\n    this.#updateResult();\n  }\n  bindMethods() {\n    this.mutate = this.mutate.bind(this);\n    this.reset = this.reset.bind(this);\n  }\n  setOptions(options) {\n    const prevOptions = this.options;\n    this.options = this.#client.defaultMutationOptions(options);\n    if (!shallowEqualObjects(this.options, prevOptions)) {\n      this.#client.getMutationCache().notify({\n        type: \"observerOptionsUpdated\",\n        mutation: this.#currentMutation,\n        observer: this\n      });\n    }\n    if (prevOptions?.mutationKey && this.options.mutationKey && hashKey(prevOptions.mutationKey) !== hashKey(this.options.mutationKey)) {\n      this.reset();\n    } else if (this.#currentMutation?.state.status === \"pending\") {\n      this.#currentMutation.setOptions(this.options);\n    }\n  }\n  onUnsubscribe() {\n    if (!this.hasListeners()) {\n      this.#currentMutation?.removeObserver(this);\n    }\n  }\n  onMutationUpdate(action) {\n    this.#updateResult();\n    this.#notify(action);\n  }\n  getCurrentResult() {\n    return this.#currentResult;\n  }\n  reset() {\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = void 0;\n    this.#updateResult();\n    this.#notify();\n  }\n  mutate(variables, options) {\n    this.#mutateOptions = options;\n    this.#currentMutation?.removeObserver(this);\n    this.#currentMutation = this.#client.getMutationCache().build(this.#client, this.options);\n    this.#currentMutation.addObserver(this);\n    return this.#currentMutation.execute(variables);\n  }\n  #updateResult() {\n    const state = this.#currentMutation?.state ?? getDefaultState();\n    this.#currentResult = {\n      ...state,\n      isPending: state.status === \"pending\",\n      isSuccess: state.status === \"success\",\n      isError: state.status === \"error\",\n      isIdle: state.status === \"idle\",\n      mutate: this.mutate,\n      reset: this.reset\n    };\n  }\n  #notify(action) {\n    notifyManager.batch(() => {\n      if (this.#mutateOptions && this.hasListeners()) {\n        const variables = this.#currentResult.variables;\n        const onMutateResult = this.#currentResult.context;\n        const context = {\n          client: this.#client,\n          meta: this.options.meta,\n          mutationKey: this.options.mutationKey\n        };\n        if (action?.type === \"success\") {\n          try {\n            this.#mutateOptions.onSuccess?.(\n              action.data,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n          try {\n            this.#mutateOptions.onSettled?.(\n              action.data,\n              null,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n        } else if (action?.type === \"error\") {\n          try {\n            this.#mutateOptions.onError?.(\n              action.error,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n          try {\n            this.#mutateOptions.onSettled?.(\n              void 0,\n              action.error,\n              variables,\n              onMutateResult,\n              context\n            );\n          } catch (e) {\n            void Promise.reject(e);\n          }\n        }\n      }\n      this.listeners.forEach((listener) => {\n        listener(this.#currentResult);\n      });\n    });\n  }\n};\nexport {\n  MutationObserver\n};\n//# sourceMappingURL=mutationObserver.js.map","\"use client\";\n\n// src/useMutation.ts\nimport * as React from \"react\";\nimport {\n  MutationObserver,\n  noop,\n  notifyManager,\n  shouldThrowError\n} from \"@tanstack/query-core\";\nimport { useQueryClient } from \"./QueryClientProvider.js\";\nfunction useMutation(options, queryClient) {\n  const client = useQueryClient(queryClient);\n  const [observer] = React.useState(\n    () => new MutationObserver(\n      client,\n      options\n    )\n  );\n  React.useEffect(() => {\n    observer.setOptions(options);\n  }, [observer, options]);\n  const result = React.useSyncExternalStore(\n    React.useCallback(\n      (onStoreChange) => observer.subscribe(notifyManager.batchCalls(onStoreChange)),\n      [observer]\n    ),\n    () => observer.getCurrentResult(),\n    () => observer.getCurrentResult()\n  );\n  const mutate = React.useCallback(\n    (variables, mutateOptions) => {\n      observer.mutate(variables, mutateOptions).catch(noop);\n    },\n    [observer]\n  );\n  if (result.error && shouldThrowError(observer.options.throwOnError, [result.error])) {\n    throw result.error;\n  }\n  return { ...result, mutate, mutateAsync: result.mutate };\n}\nexport {\n  useMutation\n};\n//# sourceMappingURL=useMutation.js.map","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"m12 5 7 7-7 7\", key: \"xquz4c\" }]\n];\nconst ArrowRight = createLucideIcon(\"arrow-right\", __iconNode);\n\nexport { __iconNode, ArrowRight as default };\n//# sourceMappingURL=arrow-right.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    { d: \"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8\", key: \"mg9rjx\" }\n  ]\n];\nconst Bold = createLucideIcon(\"bold\", __iconNode);\n\nexport { __iconNode, Bold as default };\n//# sourceMappingURL=bold.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 18V5\", key: \"adv99a\" }],\n  [\"path\", { d: \"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4\", key: \"1e3is1\" }],\n  [\"path\", { d: \"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5\", key: \"1gqd8o\" }],\n  [\"path\", { d: \"M17.997 5.125a4 4 0 0 1 2.526 5.77\", key: \"iwvgf7\" }],\n  [\"path\", { d: \"M18 18a4 4 0 0 0 2-7.464\", key: \"efp6ie\" }],\n  [\"path\", { d: \"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517\", key: \"1gq6am\" }],\n  [\"path\", { d: \"M6 18a4 4 0 0 1-2-7.464\", key: \"k1g0md\" }],\n  [\"path\", { d: \"M6.003 5.125a4 4 0 0 0-2.526 5.77\", key: \"q97ue3\" }]\n];\nconst Brain = createLucideIcon(\"brain\", __iconNode);\n\nexport { __iconNode, Brain as default };\n//# sourceMappingURL=brain.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m16 18 6-6-6-6\", key: \"eg8j8\" }],\n  [\"path\", { d: \"m8 6-6 6 6 6\", key: \"ppft3o\" }]\n];\nconst Code = createLucideIcon(\"code\", __iconNode);\n\nexport { __iconNode, Code as default };\n//# sourceMappingURL=code.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"1\", key: \"41hilf\" }],\n  [\"circle\", { cx: \"12\", cy: \"5\", r: \"1\", key: \"gxeob9\" }],\n  [\"circle\", { cx: \"12\", cy: \"19\", r: \"1\", key: \"lyex9k\" }]\n];\nconst EllipsisVertical = createLucideIcon(\"ellipsis-vertical\", __iconNode);\n\nexport { __iconNode, EllipsisVertical as default };\n//# sourceMappingURL=ellipsis-vertical.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M15 3h6v6\", key: \"1q9fwt\" }],\n  [\"path\", { d: \"M10 14 21 3\", key: \"gplh6r\" }],\n  [\"path\", { d: \"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6\", key: \"a6xqqp\" }]\n];\nconst ExternalLink = createLucideIcon(\"external-link\", __iconNode);\n\nexport { __iconNode, ExternalLink as default };\n//# sourceMappingURL=external-link.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"line\", { x1: \"19\", x2: \"10\", y1: \"4\", y2: \"4\", key: \"15jd3p\" }],\n  [\"line\", { x1: \"14\", x2: \"5\", y1: \"20\", y2: \"20\", key: \"bu0au3\" }],\n  [\"line\", { x1: \"15\", x2: \"9\", y1: \"4\", y2: \"20\", key: \"uljnxc\" }]\n];\nconst Italic = createLucideIcon(\"italic\", __iconNode);\n\nexport { __iconNode, Italic as default };\n//# sourceMappingURL=italic.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M11 5h10\", key: \"1cz7ny\" }],\n  [\"path\", { d: \"M11 12h10\", key: \"1438ji\" }],\n  [\"path\", { d: \"M11 19h10\", key: \"11t30w\" }],\n  [\"path\", { d: \"M4 4h1v5\", key: \"10yrso\" }],\n  [\"path\", { d: \"M4 9h2\", key: \"r1h2o0\" }],\n  [\"path\", { d: \"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02\", key: \"xtkcd5\" }]\n];\nconst ListOrdered = createLucideIcon(\"list-ordered\", __iconNode);\n\nexport { __iconNode, ListOrdered as default };\n//# sourceMappingURL=list-ordered.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0\",\n      key: \"1r0f0z\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"10\", r: \"3\", key: \"ilqhr7\" }]\n];\nconst MapPin = createLucideIcon(\"map-pin\", __iconNode);\n\nexport { __iconNode, MapPin as default };\n//# sourceMappingURL=map-pin.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551\",\n      key: \"1miecu\"\n    }\n  ]\n];\nconst Paperclip = createLucideIcon(\"paperclip\", __iconNode);\n\nexport { __iconNode, Paperclip as default };\n//# sourceMappingURL=paperclip.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M13 21h8\", key: \"1jsn5i\" }],\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst PenLine = createLucideIcon(\"pen-line\", __iconNode);\n\nexport { __iconNode, PenLine as default };\n//# sourceMappingURL=pen-line.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z\",\n      key: \"1a8usu\"\n    }\n  ]\n];\nconst Pen = createLucideIcon(\"pen\", __iconNode);\n\nexport { __iconNode, Pen as default };\n//# sourceMappingURL=pen.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71\",\n      key: \"yqzxt4\"\n    }\n  ],\n  [\n    \"path\",\n    {\n      d: \"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71\",\n      key: \"4qinb0\"\n    }\n  ],\n  [\"line\", { x1: \"8\", x2: \"8\", y1: \"2\", y2: \"5\", key: \"1041cp\" }],\n  [\"line\", { x1: \"2\", x2: \"5\", y1: \"8\", y2: \"8\", key: \"14m1p5\" }],\n  [\"line\", { x1: \"16\", x2: \"16\", y1: \"19\", y2: \"22\", key: \"rzdirn\" }],\n  [\"line\", { x1: \"19\", x2: \"22\", y1: \"16\", y2: \"16\", key: \"ox905f\" }]\n];\nconst Unlink = createLucideIcon(\"unlink\", __iconNode);\n\nexport { __iconNode, Unlink as default };\n//# sourceMappingURL=unlink.js.map\n","/**\n * @license lucide-react v0.563.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5\",\n      key: \"ftymec\"\n    }\n  ],\n  [\"rect\", { x: \"2\", y: \"6\", width: \"14\", height: \"12\", rx: \"2\", key: \"158x01\" }]\n];\nconst Video = createLucideIcon(\"video\", __iconNode);\n\nexport { __iconNode, Video as default };\n//# sourceMappingURL=video.js.map\n","/**\n * TanStack Query hooks for memories.\n *\n * Provides queries for work-item-scoped memories and global memory lists.\n */\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type {\n  WorkItemMemoriesResponse,\n  MemoryListResponse,\n} from '@/ui/lib/api-types.ts';\n\n/** Query key factory for memories. */\nexport const memoryKeys = {\n  all: ['memories'] as const,\n  lists: () => [...memoryKeys.all, 'list'] as const,\n  list: () => [...memoryKeys.lists()] as const,\n  forWorkItem: (workItemId: string) => [...memoryKeys.all, 'work-item', workItemId] as const,\n};\n\n/**\n * Fetch memories attached to a specific work item.\n *\n * @param workItemId - The work item UUID\n * @returns TanStack Query result with `WorkItemMemoriesResponse`\n */\nexport function useWorkItemMemories(workItemId: string) {\n  return useQuery({\n    queryKey: memoryKeys.forWorkItem(workItemId),\n    queryFn: ({ signal }) =>\n      apiClient.get<WorkItemMemoriesResponse>(\n        `/api/work-items/${workItemId}/memories`,\n        { signal },\n      ),\n    enabled: !!workItemId,\n  });\n}\n\n/**\n * Fetch the global memory list.\n *\n * @returns TanStack Query result with `MemoryListResponse`\n */\nexport function useMemories() {\n  return useQuery({\n    queryKey: memoryKeys.list(),\n    queryFn: ({ signal }) =>\n      apiClient.get<MemoryListResponse>('/api/memory', { signal }),\n  });\n}\n","/**\n * TanStack Query hook for work item communications.\n *\n * Fetches linked emails and calendar events for a specific work item.\n */\nimport { useQuery } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { CommunicationsResponse } from '@/ui/lib/api-types.ts';\n\n/** Query key factory for communications. */\nexport const communicationsKeys = {\n  all: ['communications'] as const,\n  forWorkItem: (workItemId: string) =>\n    [...communicationsKeys.all, 'work-item', workItemId] as const,\n};\n\n/**\n * Fetch communications linked to a work item.\n *\n * @param workItemId - The work item UUID\n * @returns TanStack Query result with `CommunicationsResponse`\n */\nexport function useWorkItemCommunications(workItemId: string) {\n  return useQuery({\n    queryKey: communicationsKeys.forWorkItem(workItemId),\n    queryFn: ({ signal }) =>\n      apiClient.get<CommunicationsResponse>(\n        `/api/work-items/${workItemId}/communications`,\n        { signal },\n      ),\n    enabled: !!workItemId,\n  });\n}\n","/**\n * TanStack Query mutation hook for updating work items.\n *\n * Supports optimistic updates for status and title changes to provide\n * instant UI feedback while the server request is in flight.\n */\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { UpdateWorkItemBody, WorkItemDetail } from '@/ui/lib/api-types.ts';\nimport { workItemKeys } from '@/ui/hooks/queries/use-work-items.ts';\n\n/** Variables required by the update mutation. */\nexport interface UpdateWorkItemVariables {\n  /** The work item ID to update. */\n  id: string;\n  /** Partial update body. */\n  body: UpdateWorkItemBody;\n}\n\n/**\n * Update an existing work item via PUT.\n *\n * Optimistic updates are applied to the detail cache for `status` and `title`\n * changes. On error, the cache is rolled back to the previous value.\n *\n * @returns TanStack mutation\n *\n * @example\n * ```ts\n * const { mutate } = useUpdateWorkItem();\n * mutate({ id: 'abc', body: { status: 'in_progress' } });\n * ```\n */\nexport function useUpdateWorkItem() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ id, body }: UpdateWorkItemVariables) =>\n      apiClient.put<WorkItemDetail>(`/api/work-items/${id}`, body),\n\n    onMutate: async ({ id, body }) => {\n      // Cancel in-flight queries for this work item\n      await queryClient.cancelQueries({ queryKey: workItemKeys.detail(id) });\n\n      // Snapshot the previous value\n      const previousDetail = queryClient.getQueryData<WorkItemDetail>(\n        workItemKeys.detail(id),\n      );\n\n      // Optimistically update the detail cache\n      if (previousDetail) {\n        const optimisticData: WorkItemDetail = {\n          ...previousDetail,\n          ...(body.title !== undefined ? { title: body.title } : {}),\n          ...(body.status !== undefined ? { status: body.status } : {}),\n          ...(body.priority !== undefined ? { priority: body.priority } : {}),\n          ...(body.description !== undefined ? { description: body.description } : {}),\n        };\n        queryClient.setQueryData(workItemKeys.detail(id), optimisticData);\n      }\n\n      return { previousDetail };\n    },\n\n    onError: (_error, { id }, context) => {\n      // Roll back on error\n      if (context?.previousDetail) {\n        queryClient.setQueryData(workItemKeys.detail(id), context.previousDetail);\n      }\n    },\n\n    onSettled: (_data, _error, { id }) => {\n      // Always refetch to ensure server state is accurate\n      queryClient.invalidateQueries({ queryKey: workItemKeys.detail(id) });\n      queryClient.invalidateQueries({ queryKey: workItemKeys.lists() });\n      queryClient.invalidateQueries({ queryKey: workItemKeys.tree() });\n    },\n  });\n}\n","/**\n * TanStack Query mutation hook for creating memories.\n *\n * Creates a memory attached to a specific work item and invalidates\n * the related memory queries.\n */\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { CreateMemoryBody, Memory } from '@/ui/lib/api-types.ts';\nimport { memoryKeys } from '@/ui/hooks/queries/use-memories.ts';\n\n/** Variables for the create memory mutation. */\nexport interface CreateMemoryVariables {\n  /** The work item ID to attach the memory to. */\n  workItemId: string;\n  /** Memory data. */\n  body: CreateMemoryBody;\n}\n\n/**\n * Create a new memory attached to a work item.\n *\n * @returns TanStack mutation\n *\n * @example\n * ```ts\n * const { mutate } = useCreateMemory();\n * mutate({ workItemId: 'abc', body: { title: 'Note', content: 'Details' } });\n * ```\n */\nexport function useCreateMemory() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ workItemId, body }: CreateMemoryVariables) =>\n      apiClient.post<Memory>(`/api/work-items/${workItemId}/memories`, body),\n\n    onSuccess: (_data, { workItemId }) => {\n      // Invalidate the work item's memories list and global memories\n      queryClient.invalidateQueries({ queryKey: memoryKeys.forWorkItem(workItemId) });\n      queryClient.invalidateQueries({ queryKey: memoryKeys.lists() });\n    },\n  });\n}\n","/**\n * TanStack Query mutation hook for updating memories.\n *\n * Updates a memory by ID and invalidates related queries.\n */\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client.ts';\nimport type { UpdateMemoryBody, Memory } from '@/ui/lib/api-types.ts';\nimport { memoryKeys } from '@/ui/hooks/queries/use-memories.ts';\n\n/** Variables for the update memory mutation. */\nexport interface UpdateMemoryVariables {\n  /** The memory ID to update. */\n  id: string;\n  /** Partial update body. */\n  body: UpdateMemoryBody;\n  /** Optional work item ID for targeted cache invalidation. */\n  workItemId?: string;\n}\n\n/**\n * Update an existing memory.\n *\n * @returns TanStack mutation\n *\n * @example\n * ```ts\n * const { mutate } = useUpdateMemory();\n * mutate({ id: 'mem-1', body: { title: 'Updated' }, workItemId: 'wi-1' });\n * ```\n */\nexport function useUpdateMemory() {\n  const queryClient = useQueryClient();\n\n  return useMutation({\n    mutationFn: ({ id, body }: UpdateMemoryVariables) =>\n      apiClient.patch<Memory>(`/api/memories/${id}`, body),\n\n    onSuccess: (_data, { workItemId }) => {\n      // Invalidate global memories list\n      queryClient.invalidateQueries({ queryKey: memoryKeys.lists() });\n      // If we know the work item, invalidate its specific memory list\n      if (workItemId) {\n        queryClient.invalidateQueries({ queryKey: memoryKeys.forWorkItem(workItemId) });\n      }\n    },\n  });\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport {\n  Folder,\n  Target,\n  Layers,\n  FileText,\n  ChevronRight,\n  Pencil,\n  Check,\n  X,\n  Trash2,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport type { WorkItemKind, WorkItemStatus } from './types';\n\nfunction getKindIcon(kind: WorkItemKind) {\n  switch (kind) {\n    case 'project':\n      return <Folder className=\"size-5\" />;\n    case 'initiative':\n      return <Target className=\"size-5\" />;\n    case 'epic':\n      return <Layers className=\"size-5\" />;\n    case 'issue':\n      return <FileText className=\"size-5\" />;\n  }\n}\n\nfunction getKindLabel(kind: WorkItemKind): string {\n  return kind.charAt(0).toUpperCase() + kind.slice(1);\n}\n\nfunction getStatusVariant(status: WorkItemStatus): 'default' | 'secondary' | 'destructive' | 'outline' {\n  switch (status) {\n    case 'in_progress':\n      return 'default';\n    case 'done':\n      return 'secondary';\n    case 'blocked':\n      return 'destructive';\n    default:\n      return 'outline';\n  }\n}\n\nfunction getStatusLabel(status: WorkItemStatus): string {\n  return status.replace('_', ' ').replace(/\\b\\w/g, c => c.toUpperCase());\n}\n\nexport interface ItemHeaderProps {\n  title: string;\n  kind: WorkItemKind;\n  status: WorkItemStatus;\n  parentTitle?: string;\n  onTitleChange?: (title: string) => void;\n  onParentClick?: () => void;\n  onDelete?: () => void;\n  className?: string;\n}\n\nexport function ItemHeader({\n  title,\n  kind,\n  status,\n  parentTitle,\n  onTitleChange,\n  onParentClick,\n  onDelete,\n  className,\n}: ItemHeaderProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(title);\n\n  const handleStartEdit = () => {\n    setEditValue(title);\n    setIsEditing(true);\n  };\n\n  const handleSave = () => {\n    if (editValue.trim() && editValue !== title) {\n      onTitleChange?.(editValue.trim());\n    }\n    setIsEditing(false);\n  };\n\n  const handleCancel = () => {\n    setEditValue(title);\n    setIsEditing(false);\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleSave();\n    } else if (e.key === 'Escape') {\n      handleCancel();\n    }\n  };\n\n  return (\n    <div className={cn('space-y-2', className)}>\n      {/* Breadcrumb */}\n      {parentTitle && (\n        <div className=\"flex items-center gap-1 text-sm text-muted-foreground\">\n          <button\n            className=\"hover:text-foreground hover:underline\"\n            onClick={onParentClick}\n          >\n            {parentTitle}\n          </button>\n          <ChevronRight className=\"size-4\" />\n        </div>\n      )}\n\n      {/* Title row */}\n      <div className=\"flex items-start gap-3\">\n        <span className=\"mt-1 text-muted-foreground\">{getKindIcon(kind)}</span>\n\n        <div className=\"min-w-0 flex-1 space-y-2\">\n          {isEditing ? (\n            <div className=\"flex items-center gap-2\">\n              <Input\n                value={editValue}\n                onChange={(e) => setEditValue(e.target.value)}\n                onKeyDown={handleKeyDown}\n                autoFocus\n                className=\"text-xl font-semibold\"\n              />\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleSave}>\n                <Check className=\"size-4\" />\n                <span className=\"sr-only\">Save</span>\n              </Button>\n              <Button variant=\"ghost\" size=\"icon\" onClick={handleCancel}>\n                <X className=\"size-4\" />\n                <span className=\"sr-only\">Cancel</span>\n              </Button>\n            </div>\n          ) : (\n            <div className=\"group flex items-start gap-2\">\n              <h1 className=\"text-xl font-semibold\">{title}</h1>\n              {onTitleChange && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"mt-0.5 size-6 opacity-0 group-hover:opacity-100\"\n                  onClick={handleStartEdit}\n                >\n                  <Pencil className=\"size-3\" />\n                  <span className=\"sr-only\">Edit title</span>\n                </Button>\n              )}\n              {onDelete && (\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"mt-0.5 size-6 opacity-0 text-destructive hover:text-destructive group-hover:opacity-100\"\n                  onClick={onDelete}\n                >\n                  <Trash2 className=\"size-3\" />\n                  <span className=\"sr-only\">Delete</span>\n                </Button>\n              )}\n            </div>\n          )}\n\n          {/* Badges */}\n          <div className=\"flex flex-wrap items-center gap-2\">\n            <Badge variant=\"outline\">{getKindLabel(kind)}</Badge>\n            <Badge variant={getStatusVariant(status)}>{getStatusLabel(status)}</Badge>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport {\n  Calendar,\n  Clock,\n  User,\n  AlertCircle,\n  Pencil,\n  Check,\n  X,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from '@/ui/components/ui/select';\nimport type { WorkItemStatus, WorkItemPriority } from './types';\n\nfunction formatDate(date: Date | undefined): string {\n  if (!date) return 'Not set';\n  return date.toLocaleDateString(undefined, {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric',\n  });\n}\n\nfunction formatMinutes(minutes: number | undefined): string {\n  if (!minutes) return 'Not set';\n  if (minutes < 60) return `${minutes}m`;\n  const hours = Math.floor(minutes / 60);\n  const mins = minutes % 60;\n  return mins > 0 ? `${hours}h ${mins}m` : `${hours}h`;\n}\n\ninterface MetadataFieldProps {\n  icon: React.ReactNode;\n  label: string;\n  value: string;\n  editable?: boolean;\n  onEdit?: (value: string) => void;\n  editType?: 'text' | 'select' | 'date' | 'number';\n  options?: Array<{ value: string; label: string }>;\n}\n\nfunction MetadataField({\n  icon,\n  label,\n  value,\n  editable,\n  onEdit,\n  editType = 'text',\n  options,\n}: MetadataFieldProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(value);\n\n  const handleSave = () => {\n    onEdit?.(editValue);\n    setIsEditing(false);\n  };\n\n  const handleCancel = () => {\n    setEditValue(value);\n    setIsEditing(false);\n  };\n\n  return (\n    <div className=\"flex items-start gap-3 rounded-md p-2 hover:bg-muted/50\">\n      <span className=\"mt-0.5 text-muted-foreground\">{icon}</span>\n      <div className=\"min-w-0 flex-1\">\n        <p className=\"text-xs font-medium text-muted-foreground\">{label}</p>\n        {isEditing ? (\n          <div className=\"mt-1 flex items-center gap-1\">\n            {editType === 'select' && options ? (\n              <Select value={editValue} onValueChange={setEditValue}>\n                <SelectTrigger className=\"h-8 text-sm\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  {options.map((opt) => (\n                    <SelectItem key={opt.value} value={opt.value}>\n                      {opt.label}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n            ) : editType === 'date' ? (\n              <Input\n                type=\"date\"\n                value={editValue}\n                onChange={(e) => setEditValue(e.target.value)}\n                className=\"h-8 text-sm\"\n              />\n            ) : (\n              <Input\n                type={editType === 'number' ? 'number' : 'text'}\n                value={editValue}\n                onChange={(e) => setEditValue(e.target.value)}\n                className=\"h-8 text-sm\"\n              />\n            )}\n            <Button variant=\"ghost\" size=\"icon\" className=\"size-6\" onClick={handleSave}>\n              <Check className=\"size-3\" />\n            </Button>\n            <Button variant=\"ghost\" size=\"icon\" className=\"size-6\" onClick={handleCancel}>\n              <X className=\"size-3\" />\n            </Button>\n          </div>\n        ) : (\n          <div className=\"group flex items-center gap-1\">\n            <p className=\"text-sm\">{value}</p>\n            {editable && onEdit && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"size-5 opacity-0 group-hover:opacity-100\"\n                onClick={() => setIsEditing(true)}\n              >\n                <Pencil className=\"size-3\" />\n              </Button>\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nconst STATUS_OPTIONS: Array<{ value: WorkItemStatus; label: string }> = [\n  { value: 'not_started', label: 'Not Started' },\n  { value: 'in_progress', label: 'In Progress' },\n  { value: 'blocked', label: 'Blocked' },\n  { value: 'done', label: 'Done' },\n  { value: 'cancelled', label: 'Cancelled' },\n];\n\nconst PRIORITY_OPTIONS: Array<{ value: WorkItemPriority; label: string }> = [\n  { value: 'urgent', label: 'Urgent' },\n  { value: 'high', label: 'High' },\n  { value: 'medium', label: 'Medium' },\n  { value: 'low', label: 'Low' },\n];\n\nexport interface MetadataGridProps {\n  status: WorkItemStatus;\n  priority: WorkItemPriority;\n  assignee?: string;\n  dueDate?: Date;\n  startDate?: Date;\n  estimateMinutes?: number;\n  actualMinutes?: number;\n  onStatusChange?: (status: WorkItemStatus) => void;\n  onPriorityChange?: (priority: WorkItemPriority) => void;\n  onAssigneeChange?: (assignee: string) => void;\n  onDueDateChange?: (date: string) => void;\n  onStartDateChange?: (date: string) => void;\n  onEstimateChange?: (minutes: string) => void;\n  onActualChange?: (minutes: string) => void;\n  className?: string;\n}\n\nexport function MetadataGrid({\n  status,\n  priority,\n  assignee,\n  dueDate,\n  startDate,\n  estimateMinutes,\n  actualMinutes,\n  onStatusChange,\n  onPriorityChange,\n  onAssigneeChange,\n  onDueDateChange,\n  onStartDateChange,\n  onEstimateChange,\n  onActualChange,\n  className,\n}: MetadataGridProps) {\n  const getPriorityLabel = (p: WorkItemPriority) =>\n    PRIORITY_OPTIONS.find(o => o.value === p)?.label ?? p;\n  const getStatusLabel = (s: WorkItemStatus) =>\n    STATUS_OPTIONS.find(o => o.value === s)?.label ?? s;\n\n  return (\n    <div className={cn('grid gap-1 sm:grid-cols-2', className)}>\n      <MetadataField\n        icon={<AlertCircle className=\"size-4\" />}\n        label=\"Status\"\n        value={getStatusLabel(status)}\n        editable={!!onStatusChange}\n        onEdit={(v) => onStatusChange?.(v as WorkItemStatus)}\n        editType=\"select\"\n        options={STATUS_OPTIONS}\n      />\n      <MetadataField\n        icon={<AlertCircle className=\"size-4\" />}\n        label=\"Priority\"\n        value={getPriorityLabel(priority)}\n        editable={!!onPriorityChange}\n        onEdit={(v) => onPriorityChange?.(v as WorkItemPriority)}\n        editType=\"select\"\n        options={PRIORITY_OPTIONS}\n      />\n      <MetadataField\n        icon={<User className=\"size-4\" />}\n        label=\"Assignee\"\n        value={assignee || 'Unassigned'}\n        editable={!!onAssigneeChange}\n        onEdit={onAssigneeChange}\n      />\n      <MetadataField\n        icon={<Calendar className=\"size-4\" />}\n        label=\"Due Date\"\n        value={formatDate(dueDate)}\n        editable={!!onDueDateChange}\n        onEdit={onDueDateChange}\n        editType=\"date\"\n      />\n      <MetadataField\n        icon={<Calendar className=\"size-4\" />}\n        label=\"Start Date\"\n        value={formatDate(startDate)}\n        editable={!!onStartDateChange}\n        onEdit={onStartDateChange}\n        editType=\"date\"\n      />\n      <MetadataField\n        icon={<Clock className=\"size-4\" />}\n        label=\"Estimate\"\n        value={formatMinutes(estimateMinutes)}\n        editable={!!onEstimateChange}\n        onEdit={onEstimateChange}\n        editType=\"number\"\n      />\n      <MetadataField\n        icon={<Clock className=\"size-4\" />}\n        label=\"Actual\"\n        value={formatMinutes(actualMinutes)}\n        editable={!!onActualChange}\n        onEdit={onActualChange}\n        editType=\"number\"\n      />\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Pencil, Check, X, Eye, Edit2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Textarea } from '@/ui/components/ui/textarea';\n\nexport interface DescriptionEditorProps {\n  description?: string;\n  onDescriptionChange?: (description: string) => void;\n  className?: string;\n}\n\nexport function DescriptionEditor({\n  description,\n  onDescriptionChange,\n  className,\n}: DescriptionEditorProps) {\n  const [isEditing, setIsEditing] = useState(false);\n  const [editValue, setEditValue] = useState(description || '');\n  const [showPreview, setShowPreview] = useState(false);\n\n  const handleStartEdit = () => {\n    setEditValue(description || '');\n    setIsEditing(true);\n    setShowPreview(false);\n  };\n\n  const handleSave = () => {\n    onDescriptionChange?.(editValue);\n    setIsEditing(false);\n  };\n\n  const handleCancel = () => {\n    setEditValue(description || '');\n    setIsEditing(false);\n    setShowPreview(false);\n  };\n\n  // Simple markdown to React elements (safe - no dangerouslySetInnerHTML)\n  const renderMarkdown = (text: string): React.ReactNode => {\n    if (!text) return null;\n\n    const lines = text.split('\\n');\n    return lines.map((line, i) => {\n      // Headers\n      if (line.startsWith('### ')) {\n        return <h4 key={i} className=\"mt-4 mb-2 text-sm font-semibold\">{line.slice(4)}</h4>;\n      }\n      if (line.startsWith('## ')) {\n        return <h3 key={i} className=\"mt-4 mb-2 font-semibold\">{line.slice(3)}</h3>;\n      }\n      if (line.startsWith('# ')) {\n        return <h2 key={i} className=\"mt-4 mb-2 text-lg font-semibold\">{line.slice(2)}</h2>;\n      }\n      // Lists\n      if (line.startsWith('- ') || line.startsWith('* ')) {\n        return <li key={i} className=\"ml-4\">{line.slice(2)}</li>;\n      }\n      // Empty line\n      if (!line.trim()) {\n        return <br key={i} />;\n      }\n\n      // Parse inline formatting into React elements\n      const parseInline = (text: string): React.ReactNode[] => {\n        const result: React.ReactNode[] = [];\n        let remaining = text;\n        let keyIndex = 0;\n\n        while (remaining.length > 0) {\n          // Check for code\n          const codeMatch = remaining.match(/^`([^`]+)`/);\n          if (codeMatch) {\n            result.push(\n              <code key={keyIndex++} className=\"rounded bg-muted px-1 text-sm\">\n                {codeMatch[1]}\n              </code>\n            );\n            remaining = remaining.slice(codeMatch[0].length);\n            continue;\n          }\n\n          // Check for bold\n          const boldMatch = remaining.match(/^\\*\\*([^*]+)\\*\\*/);\n          if (boldMatch) {\n            result.push(<strong key={keyIndex++}>{boldMatch[1]}</strong>);\n            remaining = remaining.slice(boldMatch[0].length);\n            continue;\n          }\n\n          // Check for italic\n          const italicMatch = remaining.match(/^\\*([^*]+)\\*/);\n          if (italicMatch) {\n            result.push(<em key={keyIndex++}>{italicMatch[1]}</em>);\n            remaining = remaining.slice(italicMatch[0].length);\n            continue;\n          }\n\n          // Take next character as plain text\n          const nextSpecial = remaining.search(/[`*]/);\n          if (nextSpecial === -1) {\n            result.push(remaining);\n            break;\n          } else if (nextSpecial === 0) {\n            // Special char but didn't match pattern, take as literal\n            result.push(remaining[0]);\n            remaining = remaining.slice(1);\n          } else {\n            result.push(remaining.slice(0, nextSpecial));\n            remaining = remaining.slice(nextSpecial);\n          }\n        }\n\n        return result;\n      };\n\n      return (\n        <p key={i} className=\"my-1\">\n          {parseInline(line)}\n        </p>\n      );\n    });\n  };\n\n  return (\n    <div className={cn('space-y-3', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-sm font-medium\">Description</h3>\n        {!isEditing && onDescriptionChange && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"h-7 gap-1\"\n            onClick={handleStartEdit}\n          >\n            <Pencil className=\"size-3\" />\n            Edit\n          </Button>\n        )}\n        {isEditing && (\n          <div className=\"flex items-center gap-1\">\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className={cn('h-7 gap-1', !showPreview && 'bg-muted')}\n              onClick={() => setShowPreview(false)}\n            >\n              <Edit2 className=\"size-3\" />\n              Edit\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className={cn('h-7 gap-1', showPreview && 'bg-muted')}\n              onClick={() => setShowPreview(true)}\n            >\n              <Eye className=\"size-3\" />\n              Preview\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {/* Content */}\n      {isEditing ? (\n        <div className=\"space-y-3\">\n          {showPreview ? (\n            <div className=\"min-h-32 rounded-md border bg-muted/30 p-3 text-sm\">\n              {editValue ? (\n                renderMarkdown(editValue)\n              ) : (\n                <p className=\"text-muted-foreground\">Nothing to preview</p>\n              )}\n            </div>\n          ) : (\n            <Textarea\n              value={editValue}\n              onChange={(e) => setEditValue(e.target.value)}\n              placeholder=\"Add a description... (Markdown supported)\"\n              className=\"min-h-32 font-mono text-sm\"\n            />\n          )}\n          <div className=\"flex justify-end gap-2\">\n            <Button variant=\"ghost\" size=\"sm\" onClick={handleCancel}>\n              <X className=\"mr-1 size-3\" />\n              Cancel\n            </Button>\n            <Button size=\"sm\" onClick={handleSave}>\n              <Check className=\"mr-1 size-3\" />\n              Save\n            </Button>\n          </div>\n        </div>\n      ) : description ? (\n        <div className=\"prose prose-sm max-w-none rounded-md bg-muted/30 p-3\">\n          {renderMarkdown(description)}\n        </div>\n      ) : (\n        <p className=\"py-4 text-center text-sm text-muted-foreground\">\n          No description\n        </p>\n      )}\n    </div>\n  );\n}\n","\"use client\";\n\n// src/checkbox.tsx\nimport * as React from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar CHECKBOX_NAME = \"Checkbox\";\nvar [createCheckboxContext, createCheckboxScope] = createContextScope(CHECKBOX_NAME);\nvar [CheckboxProviderImpl, useCheckboxContext] = createCheckboxContext(CHECKBOX_NAME);\nfunction CheckboxProvider(props) {\n  const {\n    __scopeCheckbox,\n    checked: checkedProp,\n    children,\n    defaultChecked,\n    disabled,\n    form,\n    name,\n    onCheckedChange,\n    required,\n    value = \"on\",\n    // @ts-expect-error\n    internal_do_not_use_render\n  } = props;\n  const [checked, setChecked] = useControllableState({\n    prop: checkedProp,\n    defaultProp: defaultChecked ?? false,\n    onChange: onCheckedChange,\n    caller: CHECKBOX_NAME\n  });\n  const [control, setControl] = React.useState(null);\n  const [bubbleInput, setBubbleInput] = React.useState(null);\n  const hasConsumerStoppedPropagationRef = React.useRef(false);\n  const isFormControl = control ? !!form || !!control.closest(\"form\") : (\n    // We set this to true by default so that events bubble to forms without JS (SSR)\n    true\n  );\n  const context = {\n    checked,\n    disabled,\n    setChecked,\n    control,\n    setControl,\n    name,\n    form,\n    value,\n    hasConsumerStoppedPropagationRef,\n    required,\n    defaultChecked: isIndeterminate(defaultChecked) ? false : defaultChecked,\n    isFormControl,\n    bubbleInput,\n    setBubbleInput\n  };\n  return /* @__PURE__ */ jsx(\n    CheckboxProviderImpl,\n    {\n      scope: __scopeCheckbox,\n      ...context,\n      children: isFunction(internal_do_not_use_render) ? internal_do_not_use_render(context) : children\n    }\n  );\n}\nvar TRIGGER_NAME = \"CheckboxTrigger\";\nvar CheckboxTrigger = React.forwardRef(\n  ({ __scopeCheckbox, onKeyDown, onClick, ...checkboxProps }, forwardedRef) => {\n    const {\n      control,\n      value,\n      disabled,\n      checked,\n      required,\n      setControl,\n      setChecked,\n      hasConsumerStoppedPropagationRef,\n      isFormControl,\n      bubbleInput\n    } = useCheckboxContext(TRIGGER_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setControl);\n    const initialCheckedStateRef = React.useRef(checked);\n    React.useEffect(() => {\n      const form = control?.form;\n      if (form) {\n        const reset = () => setChecked(initialCheckedStateRef.current);\n        form.addEventListener(\"reset\", reset);\n        return () => form.removeEventListener(\"reset\", reset);\n      }\n    }, [control, setChecked]);\n    return /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        role: \"checkbox\",\n        \"aria-checked\": isIndeterminate(checked) ? \"mixed\" : checked,\n        \"aria-required\": required,\n        \"data-state\": getState(checked),\n        \"data-disabled\": disabled ? \"\" : void 0,\n        disabled,\n        value,\n        ...checkboxProps,\n        ref: composedRefs,\n        onKeyDown: composeEventHandlers(onKeyDown, (event) => {\n          if (event.key === \"Enter\") event.preventDefault();\n        }),\n        onClick: composeEventHandlers(onClick, (event) => {\n          setChecked((prevChecked) => isIndeterminate(prevChecked) ? true : !prevChecked);\n          if (bubbleInput && isFormControl) {\n            hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n            if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n          }\n        })\n      }\n    );\n  }\n);\nCheckboxTrigger.displayName = TRIGGER_NAME;\nvar Checkbox = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeCheckbox,\n      name,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      value,\n      onCheckedChange,\n      form,\n      ...checkboxProps\n    } = props;\n    return /* @__PURE__ */ jsx(\n      CheckboxProvider,\n      {\n        __scopeCheckbox,\n        checked,\n        defaultChecked,\n        disabled,\n        required,\n        onCheckedChange,\n        name,\n        form,\n        value,\n        internal_do_not_use_render: ({ isFormControl }) => /* @__PURE__ */ jsxs(Fragment, { children: [\n          /* @__PURE__ */ jsx(\n            CheckboxTrigger,\n            {\n              ...checkboxProps,\n              ref: forwardedRef,\n              __scopeCheckbox\n            }\n          ),\n          isFormControl && /* @__PURE__ */ jsx(\n            CheckboxBubbleInput,\n            {\n              __scopeCheckbox\n            }\n          )\n        ] })\n      }\n    );\n  }\n);\nCheckbox.displayName = CHECKBOX_NAME;\nvar INDICATOR_NAME = \"CheckboxIndicator\";\nvar CheckboxIndicator = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeCheckbox, forceMount, ...indicatorProps } = props;\n    const context = useCheckboxContext(INDICATOR_NAME, __scopeCheckbox);\n    return /* @__PURE__ */ jsx(\n      Presence,\n      {\n        present: forceMount || isIndeterminate(context.checked) || context.checked === true,\n        children: /* @__PURE__ */ jsx(\n          Primitive.span,\n          {\n            \"data-state\": getState(context.checked),\n            \"data-disabled\": context.disabled ? \"\" : void 0,\n            ...indicatorProps,\n            ref: forwardedRef,\n            style: { pointerEvents: \"none\", ...props.style }\n          }\n        )\n      }\n    );\n  }\n);\nCheckboxIndicator.displayName = INDICATOR_NAME;\nvar BUBBLE_INPUT_NAME = \"CheckboxBubbleInput\";\nvar CheckboxBubbleInput = React.forwardRef(\n  ({ __scopeCheckbox, ...props }, forwardedRef) => {\n    const {\n      control,\n      hasConsumerStoppedPropagationRef,\n      checked,\n      defaultChecked,\n      required,\n      disabled,\n      name,\n      value,\n      form,\n      bubbleInput,\n      setBubbleInput\n    } = useCheckboxContext(BUBBLE_INPUT_NAME, __scopeCheckbox);\n    const composedRefs = useComposedRefs(forwardedRef, setBubbleInput);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = bubbleInput;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      const bubbles = !hasConsumerStoppedPropagationRef.current;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        input.indeterminate = isIndeterminate(checked);\n        setChecked.call(input, isIndeterminate(checked) ? false : checked);\n        input.dispatchEvent(event);\n      }\n    }, [bubbleInput, prevChecked, checked, hasConsumerStoppedPropagationRef]);\n    const defaultCheckedRef = React.useRef(isIndeterminate(checked) ? false : checked);\n    return /* @__PURE__ */ jsx(\n      Primitive.input,\n      {\n        type: \"checkbox\",\n        \"aria-hidden\": true,\n        defaultChecked: defaultChecked ?? defaultCheckedRef.current,\n        required,\n        disabled,\n        name,\n        value,\n        form,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0,\n          // We transform because the input is absolutely positioned but we have\n          // rendered it **after** the button. This pulls it back to sit on top\n          // of the button.\n          transform: \"translateX(-100%)\"\n        }\n      }\n    );\n  }\n);\nCheckboxBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction isFunction(value) {\n  return typeof value === \"function\";\n}\nfunction isIndeterminate(checked) {\n  return checked === \"indeterminate\";\n}\nfunction getState(checked) {\n  return isIndeterminate(checked) ? \"indeterminate\" : checked ? \"checked\" : \"unchecked\";\n}\nexport {\n  Checkbox,\n  CheckboxIndicator,\n  CheckboxIndicator as Indicator,\n  Checkbox as Root,\n  createCheckboxScope,\n  CheckboxBubbleInput as unstable_BubbleInput,\n  CheckboxBubbleInput as unstable_CheckboxBubbleInput,\n  CheckboxProvider as unstable_CheckboxProvider,\n  CheckboxTrigger as unstable_CheckboxTrigger,\n  CheckboxProvider as unstable_Provider,\n  CheckboxTrigger as unstable_Trigger\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\"\n\nimport * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { CheckIcon } from \"lucide-react\"\n\nimport { cn } from \"@/ui/lib/utils\"\n\nfunction Checkbox({\n  className,\n  ...props\n}: React.ComponentProps<typeof CheckboxPrimitive.Root>) {\n  return (\n    <CheckboxPrimitive.Root\n      data-slot=\"checkbox\"\n      className={cn(\n        \"peer border-input dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <CheckboxPrimitive.Indicator\n        data-slot=\"checkbox-indicator\"\n        className=\"grid place-content-center text-current transition-none\"\n      >\n        <CheckIcon className=\"size-3.5\" />\n      </CheckboxPrimitive.Indicator>\n    </CheckboxPrimitive.Root>\n  )\n}\n\nexport { Checkbox }\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Plus, Trash2, GripVertical } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport { Checkbox } from '@/ui/components/ui/checkbox';\nimport type { WorkItemTodo } from './types';\n\nexport interface TodoListProps {\n  todos: WorkItemTodo[];\n  onAdd?: (text: string) => void;\n  onToggle?: (id: string, completed: boolean) => void;\n  onDelete?: (id: string) => void;\n  onReorder?: (todos: WorkItemTodo[]) => void;\n  className?: string;\n}\n\nexport function TodoList({\n  todos,\n  onAdd,\n  onToggle,\n  onDelete,\n  className,\n}: TodoListProps) {\n  const [newTodoText, setNewTodoText] = useState('');\n\n  const handleAdd = () => {\n    if (newTodoText.trim() && onAdd) {\n      onAdd(newTodoText.trim());\n      setNewTodoText('');\n    }\n  };\n\n  const handleKeyDown = (e: React.KeyboardEvent) => {\n    if (e.key === 'Enter') {\n      handleAdd();\n    }\n  };\n\n  const completedCount = todos.filter((t) => t.completed).length;\n\n  return (\n    <div className={cn('space-y-3', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-sm font-medium\">Checklist</h3>\n        {todos.length > 0 && (\n          <span className=\"text-xs text-muted-foreground\">\n            {completedCount}/{todos.length} completed\n          </span>\n        )}\n      </div>\n\n      {/* Progress bar */}\n      {todos.length > 0 && (\n        <div className=\"h-1.5 overflow-hidden rounded-full bg-muted\">\n          <div\n            className=\"h-full bg-primary transition-all\"\n            style={{ width: `${(completedCount / todos.length) * 100}%` }}\n          />\n        </div>\n      )}\n\n      {/* Todo items */}\n      <div className=\"space-y-1\">\n        {todos.map((todo) => (\n          <div\n            key={todo.id}\n            data-testid=\"todo-item\"\n            className={cn(\n              'group flex items-center gap-2 rounded-md px-2 py-1.5',\n              'hover:bg-muted/50'\n            )}\n          >\n            <GripVertical className=\"size-4 cursor-grab text-muted-foreground opacity-0 group-hover:opacity-100\" />\n            <Checkbox\n              checked={todo.completed}\n              onCheckedChange={(checked) => onToggle?.(todo.id, checked === true)}\n              aria-label={`Mark \"${todo.text}\" as ${todo.completed ? 'incomplete' : 'complete'}`}\n            />\n            <span\n              className={cn(\n                'flex-1 text-sm',\n                todo.completed && 'text-muted-foreground line-through'\n              )}\n            >\n              {todo.text}\n            </span>\n            {onDelete && (\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"size-6 opacity-0 group-hover:opacity-100\"\n                onClick={() => onDelete(todo.id)}\n              >\n                <Trash2 className=\"size-3\" />\n                <span className=\"sr-only\">Delete</span>\n              </Button>\n            )}\n          </div>\n        ))}\n      </div>\n\n      {/* Add new todo */}\n      {onAdd && (\n        <div className=\"flex items-center gap-2\">\n          <Plus className=\"size-4 text-muted-foreground\" />\n          <Input\n            value={newTodoText}\n            onChange={(e) => setNewTodoText(e.target.value)}\n            onKeyDown={handleKeyDown}\n            placeholder=\"Add a task...\"\n            className=\"h-8 flex-1\"\n          />\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={handleAdd}\n            disabled={!newTodoText.trim()}\n          >\n            Add\n          </Button>\n        </div>\n      )}\n\n      {/* Empty state */}\n      {todos.length === 0 && !onAdd && (\n        <p className=\"py-4 text-center text-sm text-muted-foreground\">\n          No tasks yet\n        </p>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport {\n  Brain,\n  User,\n  Mail,\n  Calendar,\n  Link2,\n  ExternalLink,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport type { WorkItemAttachment } from './types';\n\nfunction getAttachmentIcon(type: WorkItemAttachment['type']) {\n  switch (type) {\n    case 'memory':\n      return <Brain className=\"size-4\" />;\n    case 'contact':\n      return <User className=\"size-4\" />;\n    case 'email':\n      return <Mail className=\"size-4\" />;\n    case 'calendar':\n      return <Calendar className=\"size-4\" />;\n  }\n}\n\nfunction getAttachmentTypeLabel(type: WorkItemAttachment['type']): string {\n  switch (type) {\n    case 'memory':\n      return 'Memory';\n    case 'contact':\n      return 'Contact';\n    case 'email':\n      return 'Email';\n    case 'calendar':\n      return 'Event';\n  }\n}\n\nexport interface AttachmentsSectionProps {\n  attachments: WorkItemAttachment[];\n  onAttachmentClick?: (attachment: WorkItemAttachment) => void;\n  onLinkNew?: () => void;\n  className?: string;\n}\n\nexport function AttachmentsSection({\n  attachments,\n  onAttachmentClick,\n  onLinkNew,\n  className,\n}: AttachmentsSectionProps) {\n  const groupedAttachments = React.useMemo(() => {\n    const groups: Record<WorkItemAttachment['type'], WorkItemAttachment[]> = {\n      memory: [],\n      contact: [],\n      email: [],\n      calendar: [],\n    };\n    for (const attachment of attachments) {\n      groups[attachment.type].push(attachment);\n    }\n    return groups;\n  }, [attachments]);\n\n  const hasAny = attachments.length > 0;\n\n  return (\n    <div className={cn('space-y-4', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-sm font-medium\">Linked Items</h3>\n        {onLinkNew && (\n          <Button variant=\"ghost\" size=\"sm\" className=\"h-7 gap-1\" onClick={onLinkNew}>\n            <Link2 className=\"size-3\" />\n            Link\n          </Button>\n        )}\n      </div>\n\n      {hasAny ? (\n        <div className=\"space-y-4\">\n          {(Object.entries(groupedAttachments) as [WorkItemAttachment['type'], WorkItemAttachment[]][])\n            .filter(([_, items]) => items.length > 0)\n            .map(([type, items]) => (\n              <div key={type}>\n                <h4 className=\"mb-2 flex items-center gap-2 text-xs font-medium text-muted-foreground\">\n                  {getAttachmentIcon(type)}\n                  {getAttachmentTypeLabel(type)}s ({items.length})\n                </h4>\n                <div className=\"space-y-1\">\n                  {items.map((attachment) => (\n                    <button\n                      key={attachment.id}\n                      data-testid=\"attachment-item\"\n                      className={cn(\n                        'flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-left',\n                        'hover:bg-muted/50',\n                        onAttachmentClick && 'cursor-pointer'\n                      )}\n                      onClick={() => onAttachmentClick?.(attachment)}\n                    >\n                      <span className=\"min-w-0 flex-1\">\n                        <span className=\"block truncate text-sm\">{attachment.title}</span>\n                        {attachment.subtitle && (\n                          <span className=\"block truncate text-xs text-muted-foreground\">\n                            {attachment.subtitle}\n                          </span>\n                        )}\n                      </span>\n                      {onAttachmentClick && (\n                        <ExternalLink className=\"size-3 shrink-0 text-muted-foreground\" />\n                      )}\n                    </button>\n                  ))}\n                </div>\n              </div>\n            ))}\n        </div>\n      ) : (\n        <p className=\"py-4 text-center text-sm text-muted-foreground\">\n          No linked items\n        </p>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport {\n  ArrowLeft,\n  ArrowRight,\n  Folder,\n  Target,\n  Layers,\n  FileText,\n  Plus,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Button } from '@/ui/components/ui/button';\nimport type { WorkItemDependency, WorkItemKind, WorkItemStatus } from './types';\n\nfunction getKindIcon(kind: WorkItemKind) {\n  switch (kind) {\n    case 'project':\n      return <Folder className=\"size-4\" />;\n    case 'initiative':\n      return <Target className=\"size-4\" />;\n    case 'epic':\n      return <Layers className=\"size-4\" />;\n    case 'issue':\n      return <FileText className=\"size-4\" />;\n  }\n}\n\nfunction getStatusVariant(status: WorkItemStatus): 'default' | 'secondary' | 'destructive' | 'outline' {\n  switch (status) {\n    case 'in_progress':\n      return 'default';\n    case 'done':\n      return 'secondary';\n    case 'blocked':\n      return 'destructive';\n    default:\n      return 'outline';\n  }\n}\n\nfunction getStatusLabel(status: WorkItemStatus): string {\n  return status.replace('_', ' ').replace(/\\b\\w/g, c => c.toUpperCase());\n}\n\nexport interface DependenciesSectionProps {\n  dependencies: WorkItemDependency[];\n  onDependencyClick?: (dependency: WorkItemDependency) => void;\n  onAddDependency?: (direction: 'blocks' | 'blocked_by') => void;\n  className?: string;\n}\n\nexport function DependenciesSection({\n  dependencies,\n  onDependencyClick,\n  onAddDependency,\n  className,\n}: DependenciesSectionProps) {\n  const blockedBy = dependencies.filter((d) => d.direction === 'blocked_by');\n  const blocks = dependencies.filter((d) => d.direction === 'blocks');\n\n  const renderDependency = (dep: WorkItemDependency) => (\n    <button\n      key={dep.id}\n      data-testid=\"dependency-item\"\n      className={cn(\n        'flex w-full items-center gap-2 rounded-md px-2 py-1.5 text-left',\n        'hover:bg-muted/50',\n        onDependencyClick && 'cursor-pointer'\n      )}\n      onClick={() => onDependencyClick?.(dep)}\n    >\n      <span className=\"text-muted-foreground\">{getKindIcon(dep.kind)}</span>\n      <span className=\"min-w-0 flex-1 truncate text-sm\">{dep.title}</span>\n      <Badge variant={getStatusVariant(dep.status)} className=\"shrink-0 text-xs\">\n        {getStatusLabel(dep.status)}\n      </Badge>\n    </button>\n  );\n\n  return (\n    <div className={cn('space-y-4', className)}>\n      {/* Blocked by */}\n      <div>\n        <div className=\"mb-2 flex items-center justify-between\">\n          <h4 className=\"flex items-center gap-2 text-xs font-medium text-muted-foreground\">\n            <ArrowLeft className=\"size-4\" />\n            Blocked by ({blockedBy.length})\n          </h4>\n          {onAddDependency && (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"size-6\"\n              onClick={() => onAddDependency('blocked_by')}\n            >\n              <Plus className=\"size-3\" />\n              <span className=\"sr-only\">Add blocker</span>\n            </Button>\n          )}\n        </div>\n        {blockedBy.length > 0 ? (\n          <div className=\"space-y-1\">{blockedBy.map(renderDependency)}</div>\n        ) : (\n          <p className=\"py-2 text-center text-xs text-muted-foreground\">\n            No blockers\n          </p>\n        )}\n      </div>\n\n      {/* Blocks */}\n      <div>\n        <div className=\"mb-2 flex items-center justify-between\">\n          <h4 className=\"flex items-center gap-2 text-xs font-medium text-muted-foreground\">\n            <ArrowRight className=\"size-4\" />\n            Blocks ({blocks.length})\n          </h4>\n          {onAddDependency && (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"size-6\"\n              onClick={() => onAddDependency('blocks')}\n            >\n              <Plus className=\"size-3\" />\n              <span className=\"sr-only\">Add dependent</span>\n            </Button>\n          )}\n        </div>\n        {blocks.length > 0 ? (\n          <div className=\"space-y-1\">{blocks.map(renderDependency)}</div>\n        ) : (\n          <p className=\"py-2 text-center text-xs text-muted-foreground\">\n            No dependents\n          </p>\n        )}\n      </div>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { cn } from '@/ui/lib/utils';\nimport { ScrollArea } from '@/ui/components/ui/scroll-area';\nimport { Separator } from '@/ui/components/ui/separator';\nimport { Card, CardContent } from '@/ui/components/ui/card';\nimport { ItemHeader } from './item-header';\nimport { MetadataGrid } from './metadata-grid';\nimport { DescriptionEditor } from './description-editor';\nimport { TodoList } from './todo-list';\nimport { AttachmentsSection } from './attachments-section';\nimport { DependenciesSection } from './dependencies-section';\nimport type {\n  WorkItemDetail,\n  WorkItemStatus,\n  WorkItemPriority,\n  WorkItemTodo,\n  WorkItemAttachment,\n  WorkItemDependency,\n} from './types';\n\nexport interface ItemDetailProps {\n  item: WorkItemDetail;\n  onTitleChange?: (title: string) => void;\n  onDescriptionChange?: (description: string) => void;\n  onStatusChange?: (status: WorkItemStatus) => void;\n  onPriorityChange?: (priority: WorkItemPriority) => void;\n  onAssigneeChange?: (assignee: string) => void;\n  onDueDateChange?: (date: string) => void;\n  onStartDateChange?: (date: string) => void;\n  onEstimateChange?: (minutes: string) => void;\n  onActualChange?: (minutes: string) => void;\n  onTodoAdd?: (text: string) => void;\n  onTodoToggle?: (id: string, completed: boolean) => void;\n  onTodoDelete?: (id: string) => void;\n  onAttachmentClick?: (attachment: WorkItemAttachment) => void;\n  onLinkAttachment?: () => void;\n  onDependencyClick?: (dependency: WorkItemDependency) => void;\n  onAddDependency?: (direction: 'blocks' | 'blocked_by') => void;\n  onParentClick?: () => void;\n  onDelete?: () => void;\n  className?: string;\n}\n\nexport function ItemDetail({\n  item,\n  onTitleChange,\n  onDescriptionChange,\n  onStatusChange,\n  onPriorityChange,\n  onAssigneeChange,\n  onDueDateChange,\n  onStartDateChange,\n  onEstimateChange,\n  onActualChange,\n  onTodoAdd,\n  onTodoToggle,\n  onTodoDelete,\n  onAttachmentClick,\n  onLinkAttachment,\n  onDependencyClick,\n  onAddDependency,\n  onParentClick,\n  onDelete,\n  className,\n}: ItemDetailProps) {\n  return (\n    <div className={cn('flex h-full flex-col', className)}>\n      <ScrollArea className=\"flex-1\">\n        <div className=\"mx-auto max-w-4xl space-y-6 p-6\">\n          {/* Header */}\n          <ItemHeader\n            title={item.title}\n            kind={item.kind}\n            status={item.status}\n            parentTitle={item.parentTitle}\n            onTitleChange={onTitleChange}\n            onParentClick={onParentClick}\n            onDelete={onDelete}\n          />\n\n          {/* Main content grid */}\n          <div className=\"grid gap-6 lg:grid-cols-3\">\n            {/* Left column - main content */}\n            <div className=\"space-y-6 lg:col-span-2\">\n              {/* Metadata */}\n              <Card>\n                <CardContent className=\"pt-4\">\n                  <MetadataGrid\n                    status={item.status}\n                    priority={item.priority}\n                    assignee={item.assignee}\n                    dueDate={item.dueDate}\n                    startDate={item.startDate}\n                    estimateMinutes={item.estimateMinutes}\n                    actualMinutes={item.actualMinutes}\n                    onStatusChange={onStatusChange}\n                    onPriorityChange={onPriorityChange}\n                    onAssigneeChange={onAssigneeChange}\n                    onDueDateChange={onDueDateChange}\n                    onStartDateChange={onStartDateChange}\n                    onEstimateChange={onEstimateChange}\n                    onActualChange={onActualChange}\n                  />\n                </CardContent>\n              </Card>\n\n              {/* Description */}\n              <Card>\n                <CardContent className=\"pt-4\">\n                  <DescriptionEditor\n                    description={item.description}\n                    onDescriptionChange={onDescriptionChange}\n                  />\n                </CardContent>\n              </Card>\n\n              {/* Checklist */}\n              <Card>\n                <CardContent className=\"pt-4\">\n                  <TodoList\n                    todos={item.todos}\n                    onAdd={onTodoAdd}\n                    onToggle={onTodoToggle}\n                    onDelete={onTodoDelete}\n                  />\n                </CardContent>\n              </Card>\n            </div>\n\n            {/* Right column - sidebar */}\n            <div className=\"space-y-6\">\n              {/* Attachments */}\n              <Card>\n                <CardContent className=\"pt-4\">\n                  <AttachmentsSection\n                    attachments={item.attachments}\n                    onAttachmentClick={onAttachmentClick}\n                    onLinkNew={onLinkAttachment}\n                  />\n                </CardContent>\n              </Card>\n\n              {/* Dependencies */}\n              <Card>\n                <CardContent className=\"pt-4\">\n                  <DependenciesSection\n                    dependencies={item.dependencies}\n                    onDependencyClick={onDependencyClick}\n                    onAddDependency={onAddDependency}\n                  />\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        </div>\n      </ScrollArea>\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { FileText, Folder, Target, Layers, MoreVertical, Pencil, Trash2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Button } from '@/ui/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/ui/components/ui/dropdown-menu';\nimport type { MemoryItem } from './types';\n\nfunction getLinkedItemIcon(kind: MemoryItem['linkedItemKind']) {\n  switch (kind) {\n    case 'project':\n      return <Folder className=\"size-3\" />;\n    case 'initiative':\n      return <Target className=\"size-3\" />;\n    case 'epic':\n      return <Layers className=\"size-3\" />;\n    case 'issue':\n      return <FileText className=\"size-3\" />;\n    default:\n      return null;\n  }\n}\n\nexport interface MemoryCardProps {\n  memory: MemoryItem;\n  onClick?: (memory: MemoryItem) => void;\n  onEdit?: (memory: MemoryItem) => void;\n  onDelete?: (memory: MemoryItem) => void;\n  className?: string;\n}\n\nexport function MemoryCard({\n  memory,\n  onClick,\n  onEdit,\n  onDelete,\n  className,\n}: MemoryCardProps) {\n  const preview = memory.content.slice(0, 150) + (memory.content.length > 150 ? '...' : '');\n\n  return (\n    <div\n      data-testid=\"memory-card\"\n      className={cn(\n        'group relative rounded-lg border bg-card p-4 transition-colors hover:bg-accent/50',\n        onClick && 'cursor-pointer',\n        className\n      )}\n      onClick={() => onClick?.(memory)}\n    >\n      {/* Header */}\n      <div className=\"flex items-start justify-between gap-2\">\n        <h3 className=\"font-medium leading-tight\">{memory.title}</h3>\n\n        {(onEdit || onDelete) && (\n          <DropdownMenu>\n            <DropdownMenuTrigger asChild>\n              <Button\n                variant=\"ghost\"\n                size=\"icon\"\n                className=\"size-6 opacity-0 group-hover:opacity-100\"\n                onClick={(e) => e.stopPropagation()}\n              >\n                <MoreVertical className=\"size-4\" />\n              </Button>\n            </DropdownMenuTrigger>\n            <DropdownMenuContent align=\"end\">\n              {onEdit && (\n                <DropdownMenuItem\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onEdit(memory);\n                  }}\n                >\n                  <Pencil className=\"mr-2 size-4\" />\n                  Edit\n                </DropdownMenuItem>\n              )}\n              {onDelete && (\n                <DropdownMenuItem\n                  className=\"text-destructive focus:text-destructive\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onDelete(memory);\n                  }}\n                >\n                  <Trash2 className=\"mr-2 size-4\" />\n                  Delete\n                </DropdownMenuItem>\n              )}\n            </DropdownMenuContent>\n          </DropdownMenu>\n        )}\n      </div>\n\n      {/* Preview */}\n      <p className=\"mt-2 text-sm text-muted-foreground line-clamp-2\">{preview}</p>\n\n      {/* Footer */}\n      <div className=\"mt-3 flex items-center justify-between text-xs text-muted-foreground\">\n        <div className=\"flex items-center gap-2\">\n          {memory.linkedItemKind && memory.linkedItemTitle && (\n            <span className=\"flex items-center gap-1\">\n              {getLinkedItemIcon(memory.linkedItemKind)}\n              <span className=\"truncate max-w-[120px]\">{memory.linkedItemTitle}</span>\n            </span>\n          )}\n        </div>\n\n        <span>{memory.updatedAt.toLocaleDateString()}</span>\n      </div>\n\n      {/* Tags */}\n      {memory.tags && memory.tags.length > 0 && (\n        <div className=\"mt-2 flex flex-wrap gap-1\">\n          {memory.tags.map((tag) => (\n            <Badge key={tag} variant=\"secondary\" className=\"text-xs\">\n              {tag}\n            </Badge>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { Plus, FileText, Link2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { MemoryCard } from './memory-card';\nimport type { MemoryItem } from './types';\n\nexport interface ItemMemoriesProps {\n  memories: MemoryItem[];\n  onMemoryClick?: (memory: MemoryItem) => void;\n  onAddMemory?: () => void;\n  onLinkMemory?: () => void;\n  onEditMemory?: (memory: MemoryItem) => void;\n  onDeleteMemory?: (memory: MemoryItem) => void;\n  className?: string;\n}\n\nexport function ItemMemories({\n  memories,\n  onMemoryClick,\n  onAddMemory,\n  onLinkMemory,\n  onEditMemory,\n  onDeleteMemory,\n  className,\n}: ItemMemoriesProps) {\n  return (\n    <div className={cn('space-y-4', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <h3 className=\"text-sm font-medium\">Memories</h3>\n          <Badge variant=\"secondary\" className=\"text-xs\">\n            {memories.length}\n          </Badge>\n        </div>\n\n        <div className=\"flex gap-1\">\n          {onLinkMemory && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onLinkMemory}>\n              <Link2 className=\"mr-1 size-3\" />\n              Link\n            </Button>\n          )}\n          {onAddMemory && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onAddMemory}>\n              <Plus className=\"mr-1 size-3\" />\n              Add\n            </Button>\n          )}\n        </div>\n      </div>\n\n      {/* Memory list */}\n      {memories.length > 0 ? (\n        <div className=\"grid gap-2 sm:grid-cols-2\">\n          {memories.map((memory) => (\n            <MemoryCard\n              key={memory.id}\n              memory={memory}\n              onClick={onMemoryClick}\n              onEdit={onEditMemory}\n              onDelete={onDeleteMemory}\n            />\n          ))}\n        </div>\n      ) : (\n        <div className=\"rounded-lg border border-dashed p-6 text-center\">\n          <FileText className=\"mx-auto size-8 text-muted-foreground/50\" />\n          <p className=\"mt-2 text-sm text-muted-foreground\">No memories attached</p>\n          {(onAddMemory || onLinkMemory) && (\n            <div className=\"mt-3 flex justify-center gap-2\">\n              {onAddMemory && (\n                <Button variant=\"outline\" size=\"sm\" onClick={onAddMemory}>\n                  <Plus className=\"mr-1 size-3\" />\n                  Create new\n                </Button>\n              )}\n              {onLinkMemory && (\n                <Button variant=\"outline\" size=\"sm\" onClick={onLinkMemory}>\n                  <Link2 className=\"mr-1 size-3\" />\n                  Link existing\n                </Button>\n              )}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n","import * as React from 'react';\nimport { useState, useCallback } from 'react';\nimport { Bold, Italic, List, ListOrdered, Link2, Code, Eye, Edit3 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Input } from '@/ui/components/ui/input';\nimport { Textarea } from '@/ui/components/ui/textarea';\nimport { Badge } from '@/ui/components/ui/badge';\nimport {\n  Dialog,\n  DialogContent,\n  DialogDescription,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/ui/components/ui/dialog';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/ui/components/ui/tabs';\nimport type { MemoryItem, MemoryFormData } from './types';\n\nexport interface MemoryEditorProps {\n  memory?: MemoryItem;\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  onSubmit: (data: MemoryFormData) => void;\n  className?: string;\n}\n\nexport function MemoryEditor({\n  memory,\n  open,\n  onOpenChange,\n  onSubmit,\n  className,\n}: MemoryEditorProps) {\n  const [title, setTitle] = useState(memory?.title ?? '');\n  const [content, setContent] = useState(memory?.content ?? '');\n  const [tagInput, setTagInput] = useState('');\n  const [tags, setTags] = useState<string[]>(memory?.tags ?? []);\n  const [activeTab, setActiveTab] = useState<'edit' | 'preview'>('edit');\n\n  const textareaRef = React.useRef<HTMLTextAreaElement>(null);\n\n  const insertMarkdown = useCallback((before: string, after: string = '') => {\n    const textarea = textareaRef.current;\n    if (!textarea) return;\n\n    const start = textarea.selectionStart;\n    const end = textarea.selectionEnd;\n    const selected = content.slice(start, end);\n\n    const newContent =\n      content.slice(0, start) +\n      before +\n      (selected || 'text') +\n      after +\n      content.slice(end);\n\n    setContent(newContent);\n\n    // Restore focus and selection\n    setTimeout(() => {\n      textarea.focus();\n      const newStart = start + before.length;\n      const newEnd = newStart + (selected || 'text').length;\n      textarea.setSelectionRange(newStart, newEnd);\n    }, 0);\n  }, [content]);\n\n  const handleAddTag = () => {\n    const tag = tagInput.trim();\n    if (tag && !tags.includes(tag)) {\n      setTags([...tags, tag]);\n      setTagInput('');\n    }\n  };\n\n  const handleRemoveTag = (tagToRemove: string) => {\n    setTags(tags.filter((t) => t !== tagToRemove));\n  };\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    onSubmit({\n      title: title.trim(),\n      content: content.trim(),\n      tags: tags.length > 0 ? tags : undefined,\n    });\n  };\n\n  const isValid = title.trim() && content.trim();\n\n  // Simple markdown to HTML conversion for preview\n  const renderPreview = (text: string) => {\n    return text\n      .split('\\n')\n      .map((line, i) => {\n        // Headers\n        if (line.startsWith('### ')) {\n          return <h3 key={i} className=\"text-lg font-semibold mt-4 mb-2\">{line.slice(4)}</h3>;\n        }\n        if (line.startsWith('## ')) {\n          return <h2 key={i} className=\"text-xl font-semibold mt-4 mb-2\">{line.slice(3)}</h2>;\n        }\n        if (line.startsWith('# ')) {\n          return <h1 key={i} className=\"text-2xl font-bold mt-4 mb-2\">{line.slice(2)}</h1>;\n        }\n\n        // List items\n        if (line.startsWith('- ') || line.startsWith('* ')) {\n          return <li key={i} className=\"ml-4\">{line.slice(2)}</li>;\n        }\n\n        // Numbered list\n        if (/^\\d+\\. /.test(line)) {\n          return <li key={i} className=\"ml-4 list-decimal\">{line.replace(/^\\d+\\. /, '')}</li>;\n        }\n\n        // Empty line\n        if (!line.trim()) {\n          return <br key={i} />;\n        }\n\n        // Regular paragraph\n        return <p key={i} className=\"my-1\">{line}</p>;\n      });\n  };\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className={cn('sm:max-w-2xl', className)}>\n        <DialogHeader>\n          <DialogTitle>{memory ? 'Edit Memory' : 'Create Memory'}</DialogTitle>\n          <DialogDescription className=\"sr-only\">{memory ? 'Edit memory details' : 'Create a new memory entry'}</DialogDescription>\n        </DialogHeader>\n\n        <form onSubmit={handleSubmit} className=\"space-y-4\">\n          {/* Title */}\n          <div className=\"space-y-2\">\n            <label htmlFor=\"memory-title\" className=\"text-sm font-medium\">\n              Title <span className=\"text-destructive\">*</span>\n            </label>\n            <Input\n              id=\"memory-title\"\n              value={title}\n              onChange={(e) => setTitle(e.target.value)}\n              placeholder=\"Memory title\"\n              required\n            />\n          </div>\n\n          {/* Content with tabs */}\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <label className=\"text-sm font-medium\">\n                Content <span className=\"text-destructive\">*</span>\n              </label>\n            </div>\n\n            <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as 'edit' | 'preview')}>\n              <div className=\"flex items-center justify-between\">\n                {/* Toolbar */}\n                <div className=\"flex gap-1\">\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('**', '**')}\n                    title=\"Bold\"\n                  >\n                    <Bold className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('*', '*')}\n                    title=\"Italic\"\n                  >\n                    <Italic className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('- ')}\n                    title=\"Bullet list\"\n                  >\n                    <List className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('1. ')}\n                    title=\"Numbered list\"\n                  >\n                    <ListOrdered className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('[', '](url)')}\n                    title=\"Link\"\n                  >\n                    <Link2 className=\"size-4\" />\n                  </Button>\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-8\"\n                    onClick={() => insertMarkdown('`', '`')}\n                    title=\"Code\"\n                  >\n                    <Code className=\"size-4\" />\n                  </Button>\n                </div>\n\n                <TabsList>\n                  <TabsTrigger value=\"edit\" className=\"gap-1\">\n                    <Edit3 className=\"size-3\" />\n                    Edit\n                  </TabsTrigger>\n                  <TabsTrigger value=\"preview\" className=\"gap-1\">\n                    <Eye className=\"size-3\" />\n                    Preview\n                  </TabsTrigger>\n                </TabsList>\n              </div>\n\n              <TabsContent value=\"edit\" className=\"mt-2\">\n                <Textarea\n                  ref={textareaRef}\n                  value={content}\n                  onChange={(e) => setContent(e.target.value)}\n                  placeholder=\"Write your memory content here... (Markdown supported)\"\n                  className=\"min-h-[200px] font-mono text-sm\"\n                  required\n                />\n              </TabsContent>\n\n              <TabsContent value=\"preview\" className=\"mt-2\">\n                <div className=\"min-h-[200px] rounded-md border bg-muted/30 p-4 text-sm\">\n                  {content ? (\n                    <div className=\"prose prose-sm dark:prose-invert max-w-none\">\n                      {renderPreview(content)}\n                    </div>\n                  ) : (\n                    <p className=\"text-muted-foreground\">Nothing to preview</p>\n                  )}\n                </div>\n              </TabsContent>\n            </Tabs>\n          </div>\n\n          {/* Tags */}\n          <div className=\"space-y-2\">\n            <label htmlFor=\"memory-tags\" className=\"text-sm font-medium\">\n              Tags\n            </label>\n            <div className=\"flex gap-2\">\n              <Input\n                id=\"memory-tags\"\n                value={tagInput}\n                onChange={(e) => setTagInput(e.target.value)}\n                placeholder=\"Add a tag\"\n                onKeyDown={(e) => {\n                  if (e.key === 'Enter') {\n                    e.preventDefault();\n                    handleAddTag();\n                  }\n                }}\n              />\n              <Button type=\"button\" variant=\"outline\" onClick={handleAddTag}>\n                Add\n              </Button>\n            </div>\n            {tags.length > 0 && (\n              <div className=\"flex flex-wrap gap-1 mt-2\">\n                {tags.map((tag) => (\n                  <Badge\n                    key={tag}\n                    variant=\"secondary\"\n                    className=\"cursor-pointer\"\n                    onClick={() => handleRemoveTag(tag)}\n                  >\n                    {tag} \n                  </Badge>\n                ))}\n              </div>\n            )}\n          </div>\n\n          <DialogFooter>\n            <Button type=\"button\" variant=\"outline\" onClick={() => onOpenChange(false)}>\n              Cancel\n            </Button>\n            <Button type=\"submit\" disabled={!isValid}>\n              {memory ? 'Save Changes' : 'Create Memory'}\n            </Button>\n          </DialogFooter>\n        </form>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import * as React from 'react';\nimport { Mail, Paperclip, MoreVertical, Unlink, ExternalLink } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/ui/components/ui/dropdown-menu';\nimport type { LinkedEmail } from './types';\n\nexport interface EmailCardProps {\n  email: LinkedEmail;\n  onClick?: (email: LinkedEmail) => void;\n  onUnlink?: (email: LinkedEmail) => void;\n  className?: string;\n}\n\nexport function EmailCard({\n  email,\n  onClick,\n  onUnlink,\n  className,\n}: EmailCardProps) {\n  return (\n    <div\n      data-testid=\"email-card\"\n      className={cn(\n        'group flex items-start gap-3 rounded-lg border bg-card p-3 transition-colors hover:bg-accent/50',\n        onClick && 'cursor-pointer',\n        !email.isRead && 'border-l-2 border-l-primary',\n        className\n      )}\n      onClick={() => onClick?.(email)}\n    >\n      {/* Icon */}\n      <div className=\"mt-0.5 flex size-8 shrink-0 items-center justify-center rounded-full bg-primary/10\">\n        <Mail className=\"size-4 text-primary\" />\n      </div>\n\n      {/* Content */}\n      <div className=\"min-w-0 flex-1\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <div className=\"min-w-0\">\n            <p className={cn('truncate text-sm', !email.isRead && 'font-semibold')}>\n              {email.subject}\n            </p>\n            <p className=\"text-xs text-muted-foreground\">\n              {email.from.name || email.from.email}\n            </p>\n          </div>\n\n          <div className=\"flex shrink-0 items-center gap-1\">\n            {email.hasAttachments && (\n              <Paperclip className=\"size-3 text-muted-foreground\" />\n            )}\n            <span className=\"text-xs text-muted-foreground\">\n              {formatEmailDate(email.date)}\n            </span>\n\n            {onUnlink && (\n              <DropdownMenu>\n                <DropdownMenuTrigger asChild>\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    className=\"size-6 opacity-0 group-hover:opacity-100\"\n                    onClick={(e) => e.stopPropagation()}\n                  >\n                    <MoreVertical className=\"size-4\" />\n                  </Button>\n                </DropdownMenuTrigger>\n                <DropdownMenuContent align=\"end\">\n                  <DropdownMenuItem\n                    className=\"text-destructive focus:text-destructive\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onUnlink(email);\n                    }}\n                  >\n                    <Unlink className=\"mr-2 size-4\" />\n                    Unlink\n                  </DropdownMenuItem>\n                </DropdownMenuContent>\n              </DropdownMenu>\n            )}\n          </div>\n        </div>\n\n        <p className=\"mt-1 line-clamp-2 text-xs text-muted-foreground\">\n          {email.snippet}\n        </p>\n      </div>\n    </div>\n  );\n}\n\nfunction formatEmailDate(date: Date): string {\n  const now = new Date();\n  const diff = now.getTime() - date.getTime();\n  const days = Math.floor(diff / (1000 * 60 * 60 * 24));\n\n  if (days === 0) {\n    return date.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n  }\n  if (days === 1) {\n    return 'Yesterday';\n  }\n  if (days < 7) {\n    return date.toLocaleDateString([], { weekday: 'short' });\n  }\n  return date.toLocaleDateString([], { month: 'short', day: 'numeric' });\n}\n","import * as React from 'react';\nimport {\n  Calendar,\n  Clock,\n  MapPin,\n  Users,\n  Video,\n  MoreVertical,\n  Unlink,\n} from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Badge } from '@/ui/components/ui/badge';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from '@/ui/components/ui/dropdown-menu';\nimport type { LinkedCalendarEvent } from './types';\n\nexport interface CalendarEventCardProps {\n  event: LinkedCalendarEvent;\n  onClick?: (event: LinkedCalendarEvent) => void;\n  onUnlink?: (event: LinkedCalendarEvent) => void;\n  className?: string;\n}\n\nexport function CalendarEventCard({\n  event,\n  onClick,\n  onUnlink,\n  className,\n}: CalendarEventCardProps) {\n  const isPast = event.endTime < new Date();\n  const isToday = isSameDay(event.startTime, new Date());\n\n  return (\n    <div\n      data-testid=\"calendar-event-card\"\n      className={cn(\n        'group flex items-start gap-3 rounded-lg border bg-card p-3 transition-colors hover:bg-accent/50',\n        onClick && 'cursor-pointer',\n        isPast && 'opacity-60',\n        className\n      )}\n      onClick={() => onClick?.(event)}\n    >\n      {/* Date box */}\n      <div\n        className={cn(\n          'flex size-12 shrink-0 flex-col items-center justify-center rounded-lg',\n          isToday ? 'bg-primary text-primary-foreground' : 'bg-muted'\n        )}\n      >\n        <span className=\"text-[10px] font-medium uppercase\">\n          {event.startTime.toLocaleDateString([], { weekday: 'short' })}\n        </span>\n        <span className=\"text-lg font-bold\">{event.startTime.getDate()}</span>\n      </div>\n\n      {/* Content */}\n      <div className=\"min-w-0 flex-1\">\n        <div className=\"flex items-start justify-between gap-2\">\n          <h4 className=\"font-medium leading-tight\">{event.title}</h4>\n\n          {onUnlink && (\n            <DropdownMenu>\n              <DropdownMenuTrigger asChild>\n                <Button\n                  variant=\"ghost\"\n                  size=\"icon\"\n                  className=\"size-6 opacity-0 group-hover:opacity-100\"\n                  onClick={(e) => e.stopPropagation()}\n                >\n                  <MoreVertical className=\"size-4\" />\n                </Button>\n              </DropdownMenuTrigger>\n              <DropdownMenuContent align=\"end\">\n                <DropdownMenuItem\n                  className=\"text-destructive focus:text-destructive\"\n                  onClick={(e) => {\n                    e.stopPropagation();\n                    onUnlink(event);\n                  }}\n                >\n                  <Unlink className=\"mr-2 size-4\" />\n                  Unlink\n                </DropdownMenuItem>\n              </DropdownMenuContent>\n            </DropdownMenu>\n          )}\n        </div>\n\n        {/* Time */}\n        <div className=\"mt-1 flex items-center gap-1 text-xs text-muted-foreground\">\n          <Clock className=\"size-3\" />\n          <span>\n            {event.isAllDay\n              ? 'All day'\n              : `${formatTime(event.startTime)} - ${formatTime(event.endTime)}`}\n          </span>\n        </div>\n\n        {/* Location */}\n        {event.location && (\n          <div className=\"mt-1 flex items-center gap-1 text-xs text-muted-foreground\">\n            <MapPin className=\"size-3\" />\n            <span className=\"truncate\">{event.location}</span>\n          </div>\n        )}\n\n        {/* Meeting link */}\n        {event.meetingLink && (\n          <div className=\"mt-1 flex items-center gap-1 text-xs text-primary\">\n            <Video className=\"size-3\" />\n            <span>Video meeting</span>\n          </div>\n        )}\n\n        {/* Attendees */}\n        {event.attendees.length > 0 && (\n          <div className=\"mt-2 flex items-center gap-2\">\n            <Users className=\"size-3 text-muted-foreground\" />\n            <div className=\"flex items-center gap-1\">\n              {event.attendees.slice(0, 3).map((attendee, i) => (\n                <Badge\n                  key={attendee.email}\n                  variant={\n                    attendee.status === 'accepted'\n                      ? 'default'\n                      : attendee.status === 'declined'\n                        ? 'destructive'\n                        : 'secondary'\n                  }\n                  className=\"text-[10px] px-1.5 py-0\"\n                >\n                  {attendee.name.split(' ')[0]}\n                </Badge>\n              ))}\n              {event.attendees.length > 3 && (\n                <span className=\"text-xs text-muted-foreground\">\n                  +{event.attendees.length - 3}\n                </span>\n              )}\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction formatTime(date: Date): string {\n  return date.toLocaleTimeString([], { hour: 'numeric', minute: '2-digit' });\n}\n\nfunction isSameDay(d1: Date, d2: Date): boolean {\n  return (\n    d1.getFullYear() === d2.getFullYear() &&\n    d1.getMonth() === d2.getMonth() &&\n    d1.getDate() === d2.getDate()\n  );\n}\n","import * as React from 'react';\nimport { useState } from 'react';\nimport { Mail, Calendar, Plus, Link2 } from 'lucide-react';\nimport { cn } from '@/ui/lib/utils';\nimport { Button } from '@/ui/components/ui/button';\nimport { Badge } from '@/ui/components/ui/badge';\nimport {\n  Tabs,\n  TabsContent,\n  TabsList,\n  TabsTrigger,\n} from '@/ui/components/ui/tabs';\nimport { EmailCard } from './email-card';\nimport { CalendarEventCard } from './calendar-event-card';\nimport type { LinkedEmail, LinkedCalendarEvent } from './types';\n\nexport interface ItemCommunicationsProps {\n  emails: LinkedEmail[];\n  calendarEvents: LinkedCalendarEvent[];\n  onEmailClick?: (email: LinkedEmail) => void;\n  onEventClick?: (event: LinkedCalendarEvent) => void;\n  onUnlinkEmail?: (email: LinkedEmail) => void;\n  onUnlinkEvent?: (event: LinkedCalendarEvent) => void;\n  onLinkEmail?: () => void;\n  onLinkEvent?: () => void;\n  className?: string;\n}\n\nexport function ItemCommunications({\n  emails,\n  calendarEvents,\n  onEmailClick,\n  onEventClick,\n  onUnlinkEmail,\n  onUnlinkEvent,\n  onLinkEmail,\n  onLinkEvent,\n  className,\n}: ItemCommunicationsProps) {\n  const [activeTab, setActiveTab] = useState<'emails' | 'calendar'>('emails');\n\n  const totalCount = emails.length + calendarEvents.length;\n\n  return (\n    <div className={cn('space-y-4', className)}>\n      {/* Header */}\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center gap-2\">\n          <h3 className=\"text-sm font-medium\">Communications</h3>\n          <Badge variant=\"secondary\" className=\"text-xs\">\n            {totalCount}\n          </Badge>\n        </div>\n      </div>\n\n      <Tabs value={activeTab} onValueChange={(v) => setActiveTab(v as 'emails' | 'calendar')}>\n        <div className=\"flex items-center justify-between\">\n          <TabsList>\n            <TabsTrigger value=\"emails\" className=\"gap-1\">\n              <Mail className=\"size-3\" />\n              Emails\n              {emails.length > 0 && (\n                <Badge variant=\"secondary\" className=\"ml-1 text-[10px] px-1\">\n                  {emails.length}\n                </Badge>\n              )}\n            </TabsTrigger>\n            <TabsTrigger value=\"calendar\" className=\"gap-1\">\n              <Calendar className=\"size-3\" />\n              Calendar\n              {calendarEvents.length > 0 && (\n                <Badge variant=\"secondary\" className=\"ml-1 text-[10px] px-1\">\n                  {calendarEvents.length}\n                </Badge>\n              )}\n            </TabsTrigger>\n          </TabsList>\n\n          {activeTab === 'emails' && onLinkEmail && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onLinkEmail}>\n              <Link2 className=\"mr-1 size-3\" />\n              Link Email\n            </Button>\n          )}\n          {activeTab === 'calendar' && onLinkEvent && (\n            <Button variant=\"ghost\" size=\"sm\" onClick={onLinkEvent}>\n              <Link2 className=\"mr-1 size-3\" />\n              Link Event\n            </Button>\n          )}\n        </div>\n\n        <TabsContent value=\"emails\" className=\"mt-4\">\n          {emails.length > 0 ? (\n            <div className=\"space-y-2\">\n              {emails.map((email) => (\n                <EmailCard\n                  key={email.id}\n                  email={email}\n                  onClick={onEmailClick}\n                  onUnlink={onUnlinkEmail}\n                />\n              ))}\n            </div>\n          ) : (\n            <EmptyState\n              icon={<Mail className=\"size-8\" />}\n              message=\"No linked emails\"\n              action={\n                onLinkEmail && (\n                  <Button variant=\"outline\" size=\"sm\" onClick={onLinkEmail}>\n                    <Link2 className=\"mr-1 size-3\" />\n                    Link an email\n                  </Button>\n                )\n              }\n            />\n          )}\n        </TabsContent>\n\n        <TabsContent value=\"calendar\" className=\"mt-4\">\n          {calendarEvents.length > 0 ? (\n            <div className=\"space-y-2\">\n              {calendarEvents.map((event) => (\n                <CalendarEventCard\n                  key={event.id}\n                  event={event}\n                  onClick={onEventClick}\n                  onUnlink={onUnlinkEvent}\n                />\n              ))}\n            </div>\n          ) : (\n            <EmptyState\n              icon={<Calendar className=\"size-8\" />}\n              message=\"No linked calendar events\"\n              action={\n                onLinkEvent && (\n                  <Button variant=\"outline\" size=\"sm\" onClick={onLinkEvent}>\n                    <Link2 className=\"mr-1 size-3\" />\n                    Link an event\n                  </Button>\n                )\n              }\n            />\n          )}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n\nfunction EmptyState({\n  icon,\n  message,\n  action,\n}: {\n  icon: React.ReactNode;\n  message: string;\n  action?: React.ReactNode;\n}) {\n  return (\n    <div className=\"rounded-lg border border-dashed p-6 text-center\">\n      <div className=\"mx-auto text-muted-foreground/50\">{icon}</div>\n      <p className=\"mt-2 text-sm text-muted-foreground\">{message}</p>\n      {action && <div className=\"mt-3\">{action}</div>}\n    </div>\n  );\n}\n","/**\n * Work item detail page.\n *\n * Displays full details for a single work item including description,\n * status, priority, dates, memories, communications, and participants.\n * Uses TanStack Query hooks for data fetching and mutations.\n */\nimport React, { useState, useCallback } from 'react';\nimport { useParams, Link } from 'react-router';\nimport { useWorkItem, workItemKeys } from '@/ui/hooks/queries/use-work-items';\nimport { useWorkItemMemories, memoryKeys } from '@/ui/hooks/queries/use-memories';\nimport { useWorkItemCommunications, communicationsKeys } from '@/ui/hooks/queries/use-communications';\nimport { useUpdateWorkItem } from '@/ui/hooks/mutations/use-update-work-item';\nimport { useCreateMemory } from '@/ui/hooks/mutations/use-create-memory';\nimport { useUpdateMemory } from '@/ui/hooks/mutations/use-update-memory';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { apiClient } from '@/ui/lib/api-client';\nimport type { AppBootstrap } from '@/ui/lib/api-types';\nimport { mapApiPriority, mapPriorityToApi, readBootstrap } from '@/ui/lib/work-item-utils';\nimport { SkeletonCard, ErrorState, Skeleton } from '@/ui/components/feedback';\nimport { Button } from '@/ui/components/ui/button';\nimport { Badge } from '@/ui/components/ui/badge';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/ui/components/ui/card';\nimport { ItemDetail } from '@/ui/components/detail/item-detail';\nimport type {\n  WorkItemDetail as DetailComponentType,\n  WorkItemStatus,\n  WorkItemPriority,\n  WorkItemKind,\n  WorkItemDependency,\n} from '@/ui/components/detail/types';\nimport { ItemMemories } from '@/ui/components/memory/item-memories';\nimport { MemoryEditor } from '@/ui/components/memory/memory-editor';\nimport type { MemoryItem, MemoryFormData } from '@/ui/components/memory/types';\nimport { ItemCommunications } from '@/ui/components/communications/item-communications';\nimport type { LinkedEmail, LinkedCalendarEvent } from '@/ui/components/communications/types';\nimport {\n  DeleteConfirmDialog,\n  UndoToast,\n  useWorkItemDelete,\n} from '@/ui/components/work-item-delete';\nimport { ChevronRight, Calendar, Network } from 'lucide-react';\n\nexport function WorkItemDetailPage(): React.JSX.Element {\n  const { id } = useParams<{ id: string }>();\n  const itemId = id ?? '';\n  const queryClient = useQueryClient();\n  const bootstrap = readBootstrap<AppBootstrap>();\n  const participants = bootstrap?.participants ?? [];\n\n  // Data queries\n  const { data: apiDetail, isLoading, error: itemError } = useWorkItem(itemId);\n  const { data: memoriesData, isLoading: memoriesLoading } = useWorkItemMemories(itemId);\n  const { data: commsData, isLoading: communicationsLoading } = useWorkItemCommunications(itemId);\n\n  // Mutations\n  const updateMutation = useUpdateWorkItem();\n  const createMemoryMutation = useCreateMemory();\n  const updateMemoryMutation = useUpdateMemory();\n\n  // Memory editor state\n  const [memoryEditorOpen, setMemoryEditorOpen] = useState(false);\n  const [editingMemory, setEditingMemory] = useState<MemoryItem | null>(null);\n\n  // Delete state\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\n  const {\n    deleteItem: performDelete,\n    isDeleting,\n    undoState,\n    dismissUndo,\n  } = useWorkItemDelete({\n    onDeleted: () => {\n      window.location.href = '/app/work-items';\n    },\n  });\n\n  // Map API detail to component format\n  const workItem: DetailComponentType | null = apiDetail\n    ? (() => {\n        const deps: WorkItemDependency[] = [];\n        if (apiDetail.dependencies?.blocks) {\n          deps.push(\n            ...apiDetail.dependencies.blocks.map((d) => ({\n              id: d.id,\n              title: d.title,\n              kind: 'issue' as WorkItemKind,\n              status: 'not_started' as WorkItemStatus,\n              direction: 'blocks' as const,\n            })),\n          );\n        }\n        if (apiDetail.dependencies?.blocked_by) {\n          deps.push(\n            ...apiDetail.dependencies.blocked_by.map((d) => ({\n              id: d.id,\n              title: d.title,\n              kind: 'issue' as WorkItemKind,\n              status: 'not_started' as WorkItemStatus,\n              direction: 'blocked_by' as const,\n            })),\n          );\n        }\n        return {\n          id: apiDetail.id,\n          title: apiDetail.title,\n          kind: (apiDetail.kind as WorkItemKind) || 'issue',\n          status: (apiDetail.status as WorkItemStatus) || 'not_started',\n          priority: mapApiPriority(apiDetail.priority),\n          description: apiDetail.description || undefined,\n          parentId: apiDetail.parent_id || undefined,\n          parentTitle: apiDetail.parent?.title,\n          estimateMinutes: apiDetail.estimate_minutes || undefined,\n          actualMinutes: apiDetail.actual_minutes || undefined,\n          dueDate: apiDetail.not_after ? new Date(apiDetail.not_after) : undefined,\n          startDate: apiDetail.not_before ? new Date(apiDetail.not_before) : undefined,\n          createdAt: new Date(apiDetail.created_at),\n          updatedAt: new Date(apiDetail.updated_at),\n          todos: [],\n          attachments: [],\n          dependencies: deps,\n        };\n      })()\n    : null;\n\n  // Map memories\n  const memories: MemoryItem[] = (memoriesData?.memories ?? []).map((m) => ({\n    id: m.id,\n    title: m.title,\n    content: m.content,\n    linkedItemId: itemId,\n    linkedItemTitle: workItem?.title || undefined,\n    linkedItemKind: (workItem?.kind || 'issue') as 'issue',\n    createdAt: new Date(m.created_at),\n    updatedAt: new Date(m.updated_at),\n  }));\n\n  // Map communications\n  const emails: LinkedEmail[] = (commsData?.emails ?? []).map((e) => ({\n    id: e.id,\n    subject: 'Email',\n    from: { name: 'Unknown', email: '' },\n    to: [],\n    date: e.received_at ? new Date(e.received_at) : new Date(),\n    snippet: e.body?.substring(0, 100) || '',\n    body: e.body || undefined,\n  }));\n\n  const calendarEvents: LinkedCalendarEvent[] = (commsData?.calendar_events ?? []).map(\n    (e) => ({\n      id: e.id,\n      title: 'Calendar Event',\n      startTime: e.received_at ? new Date(e.received_at) : new Date(),\n      endTime: e.received_at ? new Date(e.received_at) : new Date(),\n      attendees: [],\n    }),\n  );\n\n  // Handlers\n  const handleUpdate = useCallback(\n    (body: Record<string, unknown>) => {\n      updateMutation.mutate({ id: itemId, body: body as Parameters<typeof updateMutation.mutate>[0]['body'] });\n    },\n    [itemId, updateMutation],\n  );\n\n  const handleTitleChange = (title: string) => handleUpdate({ title });\n  const handleDescriptionChange = (description: string) => handleUpdate({ description });\n  const handleStatusChange = (status: WorkItemStatus) => handleUpdate({ status });\n  const handlePriorityChange = (priority: WorkItemPriority) =>\n    handleUpdate({ priority: mapPriorityToApi(priority) });\n  const handleDueDateChange = (date: string) => handleUpdate({ notAfter: date || null });\n  const handleStartDateChange = (date: string) => handleUpdate({ notBefore: date || null });\n  const handleEstimateChange = (minutes: string) => {\n    const value = parseInt(minutes, 10);\n    handleUpdate({ estimateMinutes: isNaN(value) ? null : value });\n  };\n  const handleActualChange = (minutes: string) => {\n    const value = parseInt(minutes, 10);\n    handleUpdate({ actualMinutes: isNaN(value) ? null : value });\n  };\n  const handleParentClick = () => {\n    if (workItem?.parentId) {\n      window.location.href = `/app/work-items/${workItem.parentId}`;\n    }\n  };\n  const handleDependencyClick = (dep: WorkItemDependency) => {\n    window.location.href = `/app/work-items/${dep.id}`;\n  };\n\n  // Memory handlers\n  const handleAddMemory = () => {\n    setEditingMemory(null);\n    setMemoryEditorOpen(true);\n  };\n  const handleEditMemory = (memory: MemoryItem) => {\n    setEditingMemory(memory);\n    setMemoryEditorOpen(true);\n  };\n  const handleCreateMemory = (data: MemoryFormData) => {\n    createMemoryMutation.mutate(\n      { workItemId: itemId, body: { title: data.title, content: data.content, type: 'note' } },\n      { onSuccess: () => setMemoryEditorOpen(false) },\n    );\n  };\n  const handleUpdateMemory = (data: MemoryFormData) => {\n    if (!editingMemory) return;\n    updateMemoryMutation.mutate(\n      { id: editingMemory.id, body: { title: data.title, content: data.content }, workItemId: itemId },\n      {\n        onSuccess: () => {\n          setMemoryEditorOpen(false);\n          setEditingMemory(null);\n        },\n      },\n    );\n  };\n  const handleDeleteMemory = async (memory: MemoryItem) => {\n    if (!confirm(`Delete memory \"${memory.title}\"?`)) return;\n    try {\n      await apiClient.delete(`/api/memories/${memory.id}`);\n      queryClient.invalidateQueries({ queryKey: memoryKeys.forWorkItem(itemId) });\n    } catch {\n      // Silently fail\n    }\n  };\n\n  // Communication handlers\n  const handleUnlinkEmail = async (email: LinkedEmail) => {\n    if (!confirm('Unlink this email from the work item?')) return;\n    try {\n      await apiClient.delete(`/api/work-items/${itemId}/communications/${email.id}`);\n      queryClient.invalidateQueries({ queryKey: communicationsKeys.forWorkItem(itemId) });\n    } catch {\n      // Silently fail\n    }\n  };\n  const handleUnlinkEvent = async (event: LinkedCalendarEvent) => {\n    if (!confirm('Unlink this event from the work item?')) return;\n    try {\n      await apiClient.delete(`/api/work-items/${itemId}/communications/${event.id}`);\n      queryClient.invalidateQueries({ queryKey: communicationsKeys.forWorkItem(itemId) });\n    } catch {\n      // Silently fail\n    }\n  };\n\n  // Delete handler\n  const handleDelete = () => setDeleteDialogOpen(true);\n  const handleConfirmDelete = async () => {\n    if (!workItem) return;\n    await performDelete({ id: workItem.id, title: workItem.title });\n    setDeleteDialogOpen(false);\n  };\n\n  if (isLoading) {\n    return (\n      <div data-testid=\"page-work-item-detail\" className=\"p-6\">\n        <SkeletonCard />\n      </div>\n    );\n  }\n\n  if (itemError || !workItem) {\n    return (\n      <div data-testid=\"page-work-item-detail\" className=\"p-6\">\n        <ErrorState\n          title=\"Work Item Not Found\"\n          message={itemError instanceof Error ? itemError.message : 'The requested work item could not be loaded.'}\n          action={\n            <Button variant=\"outline\" asChild>\n              <Link to=\"/work-items\">Back to Work Items</Link>\n            </Button>\n          }\n        />\n      </div>\n    );\n  }\n\n  return (\n    <div data-testid=\"page-work-item-detail\" className=\"flex flex-col h-full\">\n      {/* Navigation bar */}\n      <div className=\"p-4 border-b flex items-center gap-4\">\n        <Button variant=\"ghost\" size=\"sm\" asChild>\n          <Link to=\"/work-items\">\n            <ChevronRight className=\"mr-1 size-4 rotate-180\" />\n            Back\n          </Link>\n        </Button>\n        <div className=\"flex gap-2\">\n          <Button variant=\"outline\" size=\"sm\" asChild>\n            <Link to={`/work-items/${itemId}/timeline`}>\n              <Calendar className=\"mr-2 size-4\" />\n              Timeline\n            </Link>\n          </Button>\n          <Button variant=\"outline\" size=\"sm\" asChild>\n            <Link to={`/work-items/${itemId}/graph`}>\n              <Network className=\"mr-2 size-4\" />\n              Dependencies\n            </Link>\n          </Button>\n        </div>\n      </div>\n\n      <ItemDetail\n        item={workItem}\n        onTitleChange={handleTitleChange}\n        onDescriptionChange={handleDescriptionChange}\n        onStatusChange={handleStatusChange}\n        onPriorityChange={handlePriorityChange}\n        onDueDateChange={handleDueDateChange}\n        onStartDateChange={handleStartDateChange}\n        onEstimateChange={handleEstimateChange}\n        onActualChange={handleActualChange}\n        onParentClick={handleParentClick}\n        onDependencyClick={handleDependencyClick}\n        onDelete={handleDelete}\n        className=\"flex-1\"\n      />\n\n      <div className=\"p-6 space-y-6 border-t\">\n        {/* Memories Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">Memories</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {memoriesLoading ? (\n              <Skeleton width=\"100%\" height={100} />\n            ) : (\n              <ItemMemories\n                memories={memories}\n                onAddMemory={handleAddMemory}\n                onEditMemory={handleEditMemory}\n                onDeleteMemory={handleDeleteMemory}\n              />\n            )}\n          </CardContent>\n        </Card>\n\n        <MemoryEditor\n          memory={editingMemory || undefined}\n          open={memoryEditorOpen}\n          onOpenChange={setMemoryEditorOpen}\n          onSubmit={editingMemory ? handleUpdateMemory : handleCreateMemory}\n        />\n\n        {/* Communications Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">Communications</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {communicationsLoading ? (\n              <Skeleton width=\"100%\" height={100} />\n            ) : (\n              <ItemCommunications\n                emails={emails}\n                calendarEvents={calendarEvents}\n                onUnlinkEmail={handleUnlinkEmail}\n                onUnlinkEvent={handleUnlinkEvent}\n              />\n            )}\n          </CardContent>\n        </Card>\n\n        {/* Participants Section */}\n        <Card>\n          <CardHeader>\n            <CardTitle className=\"text-lg\">Participants</CardTitle>\n          </CardHeader>\n          <CardContent>\n            {participants.length === 0 ? (\n              <p className=\"text-muted-foreground\">No participants assigned</p>\n            ) : (\n              <ul className=\"space-y-2\">\n                {participants.map((p, idx) => (\n                  <li key={idx} className=\"flex items-center gap-2\">\n                    <div className=\"size-8 rounded-full bg-primary/10 flex items-center justify-center\">\n                      <span className=\"text-xs font-medium text-primary\">\n                        {(p.participant ?? 'U')[0].toUpperCase()}\n                      </span>\n                    </div>\n                    <span className=\"text-sm\">{p.participant ?? 'Unknown'}</span>\n                    {p.role && (\n                      <Badge variant=\"outline\" className=\"text-xs\">\n                        {p.role}\n                      </Badge>\n                    )}\n                  </li>\n                ))}\n              </ul>\n            )}\n          </CardContent>\n        </Card>\n      </div>\n\n      <DeleteConfirmDialog\n        open={deleteDialogOpen}\n        onOpenChange={setDeleteDialogOpen}\n        item={\n          workItem\n            ? { id: workItem.id, title: workItem.title, kind: workItem.kind, childCount: 0 }\n            : undefined\n        }\n        onConfirm={handleConfirmDelete}\n        isDeleting={isDeleting}\n      />\n      {undoState && (\n        <UndoToast\n          visible={!!undoState}\n          itemTitle={undoState.itemTitle}\n          onUndo={undoState.onUndo}\n          onDismiss={dismissUndo}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":["MutationObserver","Subscribable","#client","#currentResult","#currentMutation","#mutateOptions","client","options","#updateResult","prevOptions","shallowEqualObjects","hashKey","action","#notify","variables","state","getDefaultState","notifyManager","onMutateResult","context","e","listener","useMutation","queryClient","useQueryClient","observer","React.useState","React.useEffect","result","React.useSyncExternalStore","React.useCallback","onStoreChange","mutate","mutateOptions","noop","shouldThrowError","__iconNode","ArrowRight","createLucideIcon","Bold","Brain","Code","EllipsisVertical","ExternalLink","Italic","ListOrdered","MapPin","Paperclip","PenLine","Pen","Unlink","Video","memoryKeys","workItemId","useWorkItemMemories","useQuery","signal","apiClient","communicationsKeys","useWorkItemCommunications","useUpdateWorkItem","id","body","workItemKeys","previousDetail","optimisticData","_error","_data","useCreateMemory","useUpdateMemory","getKindIcon","kind","jsx","Folder","Target","Layers","FileText","getKindLabel","getStatusVariant","status","getStatusLabel","c","ItemHeader","title","parentTitle","onTitleChange","onParentClick","onDelete","className","isEditing","setIsEditing","useState","editValue","setEditValue","handleStartEdit","handleSave","handleCancel","handleKeyDown","cn","jsxs","ChevronRight","Input","Button","Check","X","Pencil","Trash2","Badge","formatDate","date","formatMinutes","minutes","hours","mins","MetadataField","icon","label","value","editable","onEdit","editType","Select","SelectTrigger","SelectValue","SelectContent","opt","SelectItem","STATUS_OPTIONS","PRIORITY_OPTIONS","MetadataGrid","priority","assignee","dueDate","startDate","estimateMinutes","actualMinutes","onStatusChange","onPriorityChange","onAssigneeChange","onDueDateChange","onStartDateChange","onEstimateChange","onActualChange","getPriorityLabel","p","o","s","AlertCircle","v","User","Calendar","Clock","DescriptionEditor","description","onDescriptionChange","showPreview","setShowPreview","renderMarkdown","text","line","i","parseInline","remaining","keyIndex","codeMatch","boldMatch","italicMatch","nextSpecial","Edit2","Eye","Textarea","CHECKBOX_NAME","createCheckboxContext","createContextScope","CheckboxProviderImpl","useCheckboxContext","CheckboxProvider","props","__scopeCheckbox","checkedProp","children","defaultChecked","disabled","form","name","onCheckedChange","required","internal_do_not_use_render","checked","setChecked","useControllableState","control","setControl","bubbleInput","setBubbleInput","hasConsumerStoppedPropagationRef","React.useRef","isFormControl","isIndeterminate","isFunction","TRIGGER_NAME","CheckboxTrigger","React.forwardRef","onKeyDown","onClick","checkboxProps","forwardedRef","composedRefs","useComposedRefs","initialCheckedStateRef","reset","Primitive","getState","composeEventHandlers","event","prevChecked","Checkbox","Fragment","CheckboxBubbleInput","INDICATOR_NAME","CheckboxIndicator","forceMount","indicatorProps","Presence","BUBBLE_INPUT_NAME","usePrevious","controlSize","useSize","input","inputProto","bubbles","defaultCheckedRef","CheckboxPrimitive.Root","CheckboxPrimitive.Indicator","CheckIcon","TodoList","todos","onAdd","onToggle","newTodoText","setNewTodoText","handleAdd","completedCount","t","todo","GripVertical","Plus","getAttachmentIcon","type","Mail","getAttachmentTypeLabel","AttachmentsSection","attachments","onAttachmentClick","onLinkNew","groupedAttachments","React.useMemo","groups","attachment","hasAny","Link2","_","items","DependenciesSection","dependencies","onDependencyClick","onAddDependency","blockedBy","d","blocks","renderDependency","dep","ArrowLeft","ItemDetail","item","onTodoAdd","onTodoToggle","onTodoDelete","onLinkAttachment","ScrollArea","Card","CardContent","getLinkedItemIcon","MemoryCard","memory","preview","DropdownMenu","DropdownMenuTrigger","MoreVertical","DropdownMenuContent","DropdownMenuItem","tag","ItemMemories","memories","onMemoryClick","onAddMemory","onLinkMemory","onEditMemory","onDeleteMemory","MemoryEditor","open","onOpenChange","onSubmit","setTitle","content","setContent","tagInput","setTagInput","tags","setTags","activeTab","setActiveTab","textareaRef","insertMarkdown","useCallback","before","after","textarea","start","end","selected","newContent","newStart","newEnd","handleAddTag","handleRemoveTag","tagToRemove","handleSubmit","isValid","renderPreview","Dialog","DialogContent","DialogHeader","DialogTitle","DialogDescription","Tabs","List","TabsList","TabsTrigger","Edit3","TabsContent","DialogFooter","EmailCard","email","onUnlink","formatEmailDate","diff","days","CalendarEventCard","isPast","isToday","isSameDay","formatTime","Users","attendee","d1","d2","ItemCommunications","emails","calendarEvents","onEmailClick","onEventClick","onUnlinkEmail","onUnlinkEvent","onLinkEmail","onLinkEvent","totalCount","EmptyState","message","WorkItemDetailPage","useParams","itemId","participants","readBootstrap","apiDetail","isLoading","itemError","useWorkItem","memoriesData","memoriesLoading","commsData","communicationsLoading","updateMutation","createMemoryMutation","updateMemoryMutation","memoryEditorOpen","setMemoryEditorOpen","editingMemory","setEditingMemory","deleteDialogOpen","setDeleteDialogOpen","performDelete","isDeleting","undoState","dismissUndo","useWorkItemDelete","workItem","deps","mapApiPriority","m","handleUpdate","handleTitleChange","handleDescriptionChange","handleStatusChange","handlePriorityChange","mapPriorityToApi","handleDueDateChange","handleStartDateChange","handleEstimateChange","handleActualChange","handleParentClick","handleDependencyClick","handleAddMemory","handleEditMemory","handleCreateMemory","data","handleUpdateMemory","handleDeleteMemory","handleUnlinkEmail","handleUnlinkEvent","handleDelete","handleConfirmDelete","SkeletonCard","ErrorState","Link","Network","CardHeader","CardTitle","Skeleton","idx","DeleteConfirmDialog","UndoToast"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,24]}