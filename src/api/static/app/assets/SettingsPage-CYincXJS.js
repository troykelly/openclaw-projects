import{r as d,j as e}from"./index-BBE7598u.js";import{C as b,d as N,e as v,f as w,b as k,S as y}from"./card-GDq2Qr4b.js";import{P as Q,c as xe,a as ue}from"./index-D6aJl7-K.js";import{c as _,u as X,a as S,B as Z}from"./button-BzBQrMtc.js";import{a as he}from"./index-DE5iJkJZ.js";import{u as pe,S as R,a as D,b as L,c as B,d as P}from"./select-C2f-d75W.js";import{u as fe}from"./index-ijKsfUNh.js";import{B as q}from"./badge-BvguM0n5.js";import{S as F}from"./separator-ChdDJxG0.js";import{I as ge}from"./input-aGA4pO87.js";import{T as je}from"./triangle-alert-CO66lDQ3.js";import{L as ye}from"./loader-circle-DoCPjB6l.js";import{C as H}from"./circle-x-U-Bhiks5.js";import{C as K}from"./circle-check-big-SdKbMGGK.js";import{U as ee}from"./user-bCNaEmcO.js";import{S as G,M as be}from"./sun-DDzr7SqB.js";import{B as se}from"./bell-8BD9YrS2.js";import{E as Ne}from"./eye-CNCedQ84.js";import{C as ve}from"./clock-CwV_Zhc7.js";import"./index-BdQq_4o_.js";import"./chevron-down-DvtQhMss.js";const ke=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],O=_("cpu",ke);const we=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Se=_("dollar-sign",we);const Ce=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],te=_("info",Ce);const Pe=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],ae=_("keyboard",Pe);const _e=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Te=_("monitor",_e);const Me=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Ee=_("panels-top-left",Me);const Ae=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],ze=_("smartphone",Ae);const Ie=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Re=_("zap",Ie);var U="Switch",[De]=ue(U),[Le,Be]=De(U),ie=d.forwardRef((s,t)=>{const{__scopeSwitch:a,name:n,checked:o,defaultChecked:x,required:h,disabled:r,value:u="on",onCheckedChange:f,form:l,...c}=s,[m,p]=d.useState(null),C=X(t,j=>p(j)),E=d.useRef(!1),z=m?l||!!m.closest("form"):!0,[g,i]=he({prop:o,defaultProp:x??!1,onChange:f,caller:U});return e.jsxs(Le,{scope:a,checked:g,disabled:r,children:[e.jsx(Q.button,{type:"button",role:"switch","aria-checked":g,"aria-required":h,"data-state":ce(g),"data-disabled":r?"":void 0,disabled:r,value:u,...c,ref:C,onClick:xe(s.onClick,j=>{i(A=>!A),z&&(E.current=j.isPropagationStopped(),E.current||j.stopPropagation())})}),z&&e.jsx(de,{control:m,bubbles:!E.current,name:n,value:u,checked:g,required:h,disabled:r,form:l,style:{transform:"translateX(-100%)"}})]})});ie.displayName=U;var ne="SwitchThumb",re=d.forwardRef((s,t)=>{const{__scopeSwitch:a,...n}=s,o=Be(ne,a);return e.jsx(Q.span,{"data-state":ce(o.checked),"data-disabled":o.disabled?"":void 0,...n,ref:t})});re.displayName=ne;var Fe="SwitchBubbleInput",de=d.forwardRef(({__scopeSwitch:s,control:t,checked:a,bubbles:n=!0,...o},x)=>{const h=d.useRef(null),r=X(h,x),u=pe(a),f=fe(t);return d.useEffect(()=>{const l=h.current;if(!l)return;const c=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(c,"checked").set;if(u!==a&&p){const C=new Event("click",{bubbles:n});p.call(l,a),l.dispatchEvent(C)}},[u,a,n]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...o,tabIndex:-1,ref:r,style:{...o.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});de.displayName=Fe;function ce(s){return s?"checked":"unchecked"}var Oe=ie,$e=re;function $({className:s,...t}){return e.jsx(Oe,{"data-slot":"switch",className:S("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-5 w-9 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",s),...t,children:e.jsx($e,{"data-slot":"switch-thumb",className:S("bg-background pointer-events-none block size-4 rounded-full ring-0 shadow-sm transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})})}function Ue(){const[s,t]=d.useState({kind:"loading"}),[a,n]=d.useState(!1);d.useEffect(()=>{let x=!0;async function h(){try{const r=await fetch("/api/settings");if(!r.ok){if(!x)return;t({kind:"error",message:r.status===401?"Please sign in to view settings":`Failed to load settings: ${r.status}`,status:r.status});return}const u=await r.json();if(!x)return;t({kind:"loaded",data:u})}catch(r){if(!x)return;t({kind:"error",message:r instanceof Error?r.message:"Failed to load settings"})}}return h(),()=>{x=!1}},[]);const o=d.useCallback(async x=>{if(s.kind!=="loaded")return!1;const h=s.data;t({kind:"loaded",data:{...h,...x,updated_at:new Date().toISOString()}}),n(!0);try{const r=await fetch("/api/settings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)});if(!r.ok)return t({kind:"loaded",data:h}),!1;const u=await r.json();return t({kind:"loaded",data:u}),!0}catch{return t({kind:"loaded",data:h}),!1}finally{n(!1)}},[s]);return{state:s,isSaving:a,updateSettings:o}}function Ve(){const[s,t]=d.useState({kind:"loading"}),[a,n]=d.useState(!1),[o,x]=d.useState(!1),[h,r]=d.useState(null);d.useEffect(()=>{let c=!0;async function m(){try{const p=await fetch("/api/settings/embeddings");if(!p.ok){if(!c)return;t({kind:"error",message:p.status===401?"Please sign in to view embedding settings":`Failed to load embedding settings: ${p.status}`,status:p.status});return}const C=await p.json();if(!c)return;t({kind:"loaded",data:C})}catch(p){if(!c)return;t({kind:"error",message:p instanceof Error?p.message:"Failed to load embedding settings"})}}return m(),()=>{c=!1}},[]);const u=d.useCallback(async c=>{if(s.kind!=="loaded")return!1;const m=s.data;t({kind:"loaded",data:{...m,budget:{...m.budget,...c}}}),n(!0);try{const p=await fetch("/api/settings/embeddings",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!p.ok)return t({kind:"loaded",data:m}),!1;const C=await p.json();return t({kind:"loaded",data:C}),!0}catch{return t({kind:"loaded",data:m}),!1}finally{n(!1)}},[s]),f=d.useCallback(async()=>{x(!0),r(null);try{const c=await fetch("/api/settings/embeddings/test",{method:"POST"});if(!c.ok){const p={success:!1,provider:null,error:`Request failed: ${c.status}`};return r(p),p}const m=await c.json();return r(m),m}catch(c){const m={success:!1,provider:null,error:c instanceof Error?c.message:"Connection test failed"};return r(m),m}finally{x(!1)}},[]),l=d.useCallback(()=>{r(null)},[]);return{state:s,isSaving:a,isTesting:o,testResult:h,updateBudget:u,testConnection:f,clearTestResult:l}}function le({label:s,description:t,children:a,htmlFor:n}){return e.jsxs("div",{className:"flex items-center justify-between gap-4 py-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:n,className:"text-sm font-medium",children:s}),t&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),e.jsx("div",{className:"shrink-0",children:a})]})}function oe(s){return{voyageai:"Voyage AI",openai:"OpenAI",gemini:"Gemini"}[s]||s}function Ge(s){return s?{environment:"Environment variable",file:"File",command:"Command"}[s]||s:"Not configured"}function M(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${(s/1e3).toFixed(1)}K`:s.toString()}function Y(s){return`$${s.toFixed(2)}`}function qe(s,t){return t<=0?0:Math.min(s/t*100,100)}function He(s){return s>=100?"text-destructive":s>=80?"text-yellow-600 dark:text-yellow-500":"text-green-600 dark:text-green-500"}function Ke({provider:s}){return s?e.jsxs("div",{className:"flex items-center justify-between rounded-lg border bg-muted/30 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex size-10 items-center justify-center rounded-full bg-primary/10",children:e.jsx(O,{className:"size-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium",children:oe(s.name)}),e.jsx(q,{variant:"outline",className:"text-xs",children:"Active"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[s.model," (",s.dimensions,"d)"]})]})]}),e.jsxs("div",{className:"text-right text-xs text-muted-foreground",children:[e.jsx("p",{children:"Key source"}),e.jsx("p",{className:"font-medium",children:Ge(s.keySource)})]})]}):e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-dashed p-4",children:[e.jsx(H,{className:"size-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"No provider configured"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Set an API key for VoyageAI, OpenAI, or Gemini"})]})]})}function Ye({providers:s}){return e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Provider Priority"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.map(t=>e.jsxs(q,{variant:t.configured?"default":"outline",className:S("gap-1.5",!t.configured&&"text-muted-foreground"),children:[e.jsxs("span",{className:"text-xs opacity-60",children:["#",t.priority]}),oe(t.name),t.configured?e.jsx(K,{className:"size-3"}):e.jsx(H,{className:"size-3 opacity-50"})]},t.name))}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"First configured provider will be used"})]})}function Je({result:s,onDismiss:t}){return e.jsxs("div",{className:S("flex items-center justify-between rounded-lg border p-3",s.success?"border-green-200 bg-green-50 dark:border-green-900 dark:bg-green-950":"border-red-200 bg-red-50 dark:border-red-900 dark:bg-red-950"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[s.success?e.jsx(K,{className:"size-4 text-green-600 dark:text-green-400"}):e.jsx(H,{className:"size-4 text-red-600 dark:text-red-400"}),e.jsx("span",{className:"text-sm",children:s.success?e.jsxs(e.Fragment,{children:["Connection successful",s.latencyMs&&e.jsxs("span",{className:"ml-1 text-muted-foreground",children:["(",s.latencyMs,"ms)"]})]}):s.error||"Connection failed"})]}),e.jsx(Z,{variant:"ghost",size:"xs",onClick:t,children:"Dismiss"})]})}function J({label:s,spent:t,limit:a}){const n=qe(t,a),o=He(n);return e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:s}),e.jsxs("span",{className:S("font-medium",o),children:[Y(t)," / ",Y(a)]})]}),e.jsx("div",{className:"h-2 overflow-hidden rounded-full bg-muted",children:e.jsx("div",{className:S("h-full transition-all",n>=100?"bg-destructive":n>=80?"bg-yellow-500":"bg-green-500"),style:{width:`${n}%`}})})]})}function We({usage:s}){return e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-1 rounded-lg border bg-muted/30 p-3 text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Today"}),e.jsx("p",{className:"text-lg font-semibold",children:M(s.today.count)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[M(s.today.tokens)," tokens"]})]}),e.jsxs("div",{className:"space-y-1 rounded-lg border bg-muted/30 p-3 text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"This Month"}),e.jsx("p",{className:"text-lg font-semibold",children:M(s.month.count)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[M(s.month.tokens)," tokens"]})]}),e.jsxs("div",{className:"space-y-1 rounded-lg border bg-muted/30 p-3 text-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"All Time"}),e.jsx("p",{className:"text-lg font-semibold",children:M(s.total.count)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[M(s.total.tokens)," tokens"]})]})]})}function W({label:s,description:t,value:a,onChange:n,min:o=0,max:x=1e4,disabled:h}){const[r,u]=d.useState(a.toString()),f=d.useCallback(()=>{const l=parseFloat(r);if(Number.isNaN(l)){u(a.toString());return}const c=Math.max(o,Math.min(x,l));u(c.toString()),c!==a&&n(c)},[r,a,o,x,n]);return d.useEffect(()=>{u(a.toString())},[a]),e.jsx(le,{label:s,description:t,children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"$"}),e.jsx(ge,{type:"number",value:r,onChange:l=>u(l.target.value),onBlur:f,min:o,max:x,step:"0.01",disabled:h,className:"w-24 text-right"})]})})}function Qe(){const{state:s,isSaving:t,isTesting:a,testResult:n,updateBudget:o,testConnection:x,clearTestResult:h}=Ve();if(s.kind==="loading")return e.jsxs(b,{"data-testid":"embedding-settings-card",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"Embeddings"})]}),e.jsx(w,{children:"Loading embedding settings..."})]}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(y,{className:"h-20"}),e.jsx(y,{className:"h-32"}),e.jsx(y,{className:"h-24"})]})})]});if(s.kind==="error")return e.jsxs(b,{"data-testid":"embedding-settings-card",children:[e.jsx(N,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"Embeddings"})]})}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-2 rounded-lg border border-destructive/50 bg-destructive/10 p-4",children:[e.jsx(je,{className:"size-5 text-destructive"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-destructive",children:"Failed to load settings"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.message})]})]})})]});const{provider:r,availableProviders:u,budget:f,usage:l}=s.data;return e.jsxs(e.Fragment,{children:[e.jsxs(b,{"data-testid":"embedding-settings-card",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(O,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"Embedding Provider"})]}),e.jsx(w,{children:"Configure the AI provider for semantic search and memory embeddings"})]}),e.jsxs(k,{className:"space-y-4",children:[e.jsx(Ke,{provider:r}),n&&e.jsx(Je,{result:n,onDismiss:h}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ye,{providers:u}),e.jsx(Z,{variant:"outline",size:"sm",onClick:x,disabled:!r||a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(ye,{className:"size-4 animate-spin"}),"Testing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"size-4"}),"Test Connection"]})})]})]})]}),e.jsxs(b,{"data-testid":"embedding-budget-card",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"Budget & Usage"})]}),t&&e.jsx("span",{className:"text-sm text-muted-foreground",children:"Saving..."})]}),e.jsx(w,{children:"Control embedding costs and monitor usage"})]}),e.jsxs(k,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(J,{label:"Today",spent:f.todaySpendUsd,limit:f.dailyLimitUsd}),e.jsx(J,{label:"This Month",spent:f.monthSpendUsd,limit:f.monthlyLimitUsd})]}),e.jsxs("div",{className:"space-y-1 divide-y",children:[e.jsx(W,{label:"Daily Limit",description:"Maximum spend per day",value:f.dailyLimitUsd,onChange:c=>o({dailyLimitUsd:c}),max:1e4}),e.jsx(W,{label:"Monthly Limit",description:"Maximum spend per month",value:f.monthlyLimitUsd,onChange:c=>o({monthlyLimitUsd:c}),max:1e5}),e.jsx(le,{label:"Pause on Limit",description:"Stop generating embeddings when budget is exceeded",htmlFor:"pause-on-limit",children:e.jsx($,{id:"pause-on-limit",checked:f.pauseOnLimit,onCheckedChange:c=>o({pauseOnLimit:c}),"aria-label":"Pause on limit"})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"mb-3 text-sm font-medium",children:"Embeddings Generated"}),e.jsx(We,{usage:l})]})]})]})]})}const Xe=["UTC","America/New_York","America/Chicago","America/Denver","America/Los_Angeles","America/Anchorage","Pacific/Honolulu","Europe/London","Europe/Paris","Europe/Berlin","Asia/Tokyo","Asia/Shanghai","Asia/Singapore","Australia/Sydney","Australia/Melbourne"],Ze=[10,25,50,75,100],es=[{id:"profile",label:"Profile",icon:ee},{id:"appearance",label:"Appearance",icon:G},{id:"notifications",label:"Notifications",icon:se},{id:"shortcuts",label:"Keyboard Shortcuts",icon:ae},{id:"about",label:"About",icon:te}],V=[{group:"Global",shortcuts:[{keys:["Cmd/Ctrl","K"],description:"Open command palette"},{keys:["Cmd/Ctrl","/"],description:"Show keyboard shortcuts"},{keys:["Esc"],description:"Close modal / cancel"}]},{group:"Navigation",shortcuts:[{keys:["G","then","A"],description:"Go to Activity"},{keys:["G","then","P"],description:"Go to Projects"},{keys:["G","then","T"],description:"Go to Timeline"},{keys:["G","then","C"],description:"Go to Contacts"},{keys:["G","then","S"],description:"Go to Settings"}]},{group:"Work Items",shortcuts:[{keys:["N"],description:"Quick add new item"},{keys:["Shift","N"],description:"Full create form"},{keys:["J"],description:"Next item in list"},{keys:["K"],description:"Previous item in list"}]}];function I({value:s,label:t,icon:a,isSelected:n,onChange:o,description:x}){return e.jsxs("label",{"data-testid":`theme-option-${s}`,className:S("flex cursor-pointer flex-col items-center gap-2 rounded-lg border-2 p-4 transition-all",n?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-muted/50"),children:[e.jsx("input",{type:"radio",name:"theme",value:s,checked:n,onChange:()=>o(s),className:"sr-only","aria-label":t}),e.jsx(a,{className:S("size-6",n?"text-primary":"text-muted-foreground")}),e.jsx("span",{className:S("text-sm font-medium",n?"text-foreground":"text-muted-foreground"),children:t}),x&&e.jsx("span",{className:"text-[10px] text-muted-foreground text-center",children:x})]})}function T({label:s,description:t,children:a,htmlFor:n}){return e.jsxs("div",{className:"flex items-center justify-between gap-4 py-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{htmlFor:n,className:"text-sm font-medium",children:s}),t&&e.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),e.jsx("div",{className:"shrink-0",children:a})]})}function ss({visible:s}){return e.jsxs("div",{"data-testid":"save-confirmation",className:S("fixed bottom-4 right-4 z-50 flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 text-sm font-medium text-white shadow-lg transition-all duration-300",s?"translate-y-0 opacity-100":"translate-y-4 opacity-0 pointer-events-none"),children:[e.jsx(K,{className:"size-4"}),"Saved"]})}function ts({keys:s}){return e.jsx("div",{className:"flex items-center gap-1",children:s.map((t,a)=>e.jsx(d.Fragment,{children:t==="then"?e.jsx("span",{className:"text-xs text-muted-foreground",children:"then"}):e.jsx("kbd",{className:"inline-flex h-6 min-w-6 items-center justify-center rounded border bg-muted px-1.5 text-[11px] font-medium text-muted-foreground",children:t})},a))})}function as({email:s,id:t}){const a=s.split("@")[0].split(/[._-]/).slice(0,2).map(n=>n[0]?.toUpperCase()??"").join("");return e.jsxs(b,{"data-testid":"settings-card",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"Profile"})]}),e.jsx(w,{children:"Your account information"})]}),e.jsx(k,{children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex size-16 shrink-0 items-center justify-center rounded-full bg-primary/10 text-xl font-semibold text-primary",children:a||"?"}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:s}),e.jsxs("p",{className:"mt-0.5 text-xs text-muted-foreground truncate",children:["ID: ",t]})]})]})})]})}function is({theme:s,defaultView:t,sidebarCollapsed:a,showCompleted:n,itemsPerPage:o,timezone:x,onThemeChange:h,onDefaultViewChange:r,onSidebarCollapsedChange:u,onShowCompletedChange:f,onItemsPerPageChange:l,onTimezoneChange:c}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(b,{"data-testid":"settings-card",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"Appearance"})]}),e.jsx(w,{children:"Customize how the application looks"})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"mb-3 block text-sm font-medium",children:"Theme"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:[e.jsx(I,{value:"light",label:"Light",icon:G,isSelected:s==="light",onChange:h}),e.jsx(I,{value:"dark",label:"Dark",icon:be,isSelected:s==="dark",onChange:h}),e.jsx(I,{value:"oled",label:"OLED",icon:ze,isSelected:s==="oled",onChange:h,description:"True black"}),e.jsx(I,{value:"system",label:"System",icon:Te,isSelected:s==="system",onChange:h})]})]})})})]}),e.jsxs(b,{"data-testid":"settings-card",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ee,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"Navigation"})]}),e.jsx(w,{children:"Configure your default views and layout"})]}),e.jsxs(k,{className:"space-y-1 divide-y",children:[e.jsx(T,{label:"Default View",description:"The page to show when you open the app",children:e.jsxs(R,{value:t,onValueChange:m=>r(m),children:[e.jsx(D,{className:"w-[140px]","aria-label":"Default view",children:e.jsx(L,{})}),e.jsxs(B,{children:[e.jsx(P,{value:"activity",children:"Activity"}),e.jsx(P,{value:"projects",children:"Projects"}),e.jsx(P,{value:"timeline",children:"Timeline"}),e.jsx(P,{value:"contacts",children:"People"})]})]})}),e.jsx(T,{label:"Sidebar Collapsed",description:"Start with the sidebar collapsed",htmlFor:"sidebar-collapsed",children:e.jsx($,{id:"sidebar-collapsed",checked:a,onCheckedChange:u,"aria-label":"Sidebar collapsed"})})]})]}),e.jsxs(b,{"data-testid":"settings-card",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ne,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"Display"})]}),e.jsx(w,{children:"Control what items are shown"})]}),e.jsxs(k,{className:"space-y-1 divide-y",children:[e.jsx(T,{label:"Show Completed Items",description:"Show completed items in lists",htmlFor:"show-completed",children:e.jsx($,{id:"show-completed",checked:n,onCheckedChange:f,"aria-label":"Show completed items"})}),e.jsx(T,{label:"Items Per Page",description:"Number of items to show in lists",children:e.jsxs(R,{value:String(o),onValueChange:l,children:[e.jsx(D,{className:"w-[100px]",children:e.jsx(L,{})}),e.jsx(B,{children:Ze.map(m=>e.jsx(P,{value:String(m),children:m},m))})]})})]})]}),e.jsxs(b,{"data-testid":"settings-card",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"Regional"})]}),e.jsx(w,{children:"Configure regional preferences"})]}),e.jsx(k,{children:e.jsx(T,{label:"Timezone",description:"Your timezone for displaying dates and times",children:e.jsxs(R,{value:x,onValueChange:c,children:[e.jsx(D,{className:"w-[180px]",children:e.jsx(L,{})}),e.jsx(B,{children:Xe.map(m=>e.jsx(P,{value:m,children:m.replace(/_/g," ")},m))})]})})})]}),e.jsx(Qe,{})]})}function ns({emailNotifications:s,emailDigestFrequency:t,onEmailNotificationsChange:a,onDigestFrequencyChange:n}){return e.jsxs(b,{"data-testid":"settings-card",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"Notifications"})]}),e.jsx(w,{children:"Configure how you receive notifications"})]}),e.jsxs(k,{className:"space-y-1 divide-y",children:[e.jsx(T,{label:"Email Notifications",description:"Receive email notifications for updates",htmlFor:"email-notifications",children:e.jsx($,{id:"email-notifications",checked:s,onCheckedChange:a,"aria-label":"Email notifications"})}),e.jsx(T,{label:"Email Digest",description:"How often to receive digest emails",children:e.jsxs(R,{value:t,onValueChange:o=>n(o),disabled:!s,children:[e.jsx(D,{className:"w-[120px]",children:e.jsx(L,{})}),e.jsxs(B,{children:[e.jsx(P,{value:"never",children:"Never"}),e.jsx(P,{value:"daily",children:"Daily"}),e.jsx(P,{value:"weekly",children:"Weekly"})]})]})})]})]})}function rs(){return e.jsxs(b,{"data-testid":"settings-card",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"Keyboard Shortcuts"})]}),e.jsx(w,{children:"Speed up your workflow with keyboard shortcuts"})]}),e.jsx(k,{children:e.jsx("div",{className:"space-y-6",children:V.map(s=>e.jsxs("div",{children:[e.jsx("h4",{className:"mb-3 text-sm font-medium text-foreground",children:s.group}),e.jsx("div",{className:"space-y-2",children:s.shortcuts.map((t,a)=>e.jsxs("div",{className:"flex items-center justify-between rounded-md bg-muted/30 px-3 py-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:t.description}),e.jsx(ts,{keys:t.keys})]},a))}),s!==V[V.length-1]&&e.jsx(F,{className:"mt-4"})]},s.group))})})]})}function ds(){return e.jsxs(b,{"data-testid":"settings-card",children:[e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"size-5 text-muted-foreground"}),e.jsx(v,{children:"About"})]}),e.jsx(w,{children:"Application information"})]}),e.jsx(k,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Application"}),e.jsx("span",{className:"text-sm font-medium",children:"OpenClaw Projects"})]}),e.jsx(F,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Version"}),e.jsx(q,{variant:"outline",children:"1.0.0"})]}),e.jsx(F,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"License"}),e.jsx("span",{className:"text-sm font-medium",children:"ISC"})]}),e.jsx(F,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Documentation"}),e.jsx("a",{href:"https://docs.openclaw.ai/",target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"docs.openclaw.ai"})]})]}),e.jsx("div",{className:"rounded-lg border border-dashed bg-muted/20 p-4 text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Built for integration with the OpenClaw AI agent gateway."})})]})})]})}function cs(){const{state:s,isSaving:t,updateSettings:a}=Ue(),[n,o]=d.useState("profile"),[x,h]=d.useState(!1),r=d.useRef(null),u=d.useRef({profile:null,appearance:null,notifications:null,shortcuts:null,about:null}),f=d.useCallback(()=>{h(!0),r.current&&clearTimeout(r.current),r.current=setTimeout(()=>h(!1),2e3)},[]),l=d.useCallback(async i=>{const j=await a(i);return j&&f(),j},[a,f]),c=d.useCallback(i=>{l({theme:i});const j=document.documentElement,A=window.matchMedia("(prefers-color-scheme: dark)"),me=i==="dark"||i==="oled"||i==="system"&&A.matches;j.classList.toggle("dark",me),j.classList.toggle("oled",i==="oled"),localStorage.setItem("theme",i)},[l]),m=d.useCallback(i=>{l({default_view:i})},[l]),p=d.useCallback(i=>{l({timezone:i})},[l]),C=d.useCallback(i=>{l({items_per_page:parseInt(i,10)})},[l]),E=d.useCallback(i=>{l({email_digest_frequency:i})},[l]),z=d.useCallback(i=>{o(i);const j=u.current[i];j&&j.scrollIntoView({behavior:"smooth",block:"start"})},[]);if(d.useEffect(()=>()=>{r.current&&clearTimeout(r.current)},[]),s.kind==="loading")return e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"mx-auto max-w-4xl space-y-6",children:[e.jsx(y,{className:"h-8 w-32"}),e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"hidden w-48 shrink-0 space-y-2 md:block",children:[e.jsx(y,{className:"h-8"}),e.jsx(y,{className:"h-8"}),e.jsx(y,{className:"h-8"}),e.jsx(y,{className:"h-8"}),e.jsx(y,{className:"h-8"})]}),e.jsxs("div",{className:"flex-1 space-y-4",children:[e.jsx(y,{className:"h-48"}),e.jsx(y,{className:"h-48"}),e.jsx(y,{className:"h-48"})]})]})]})});if(s.kind==="error")return e.jsx("div",{className:"flex flex-col items-center justify-center p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-destructive",children:"Error"}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:s.message}),s.status===401&&e.jsx("a",{href:"/app/auth",className:"mt-4 inline-block text-primary hover:underline",children:"Sign in"})]})});const g=s.data;return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mx-auto max-w-4xl",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Settings"}),e.jsx("div",{className:"flex items-center gap-2",children:t&&e.jsx("span",{className:"text-sm text-muted-foreground","data-testid":"saving-indicator",children:"Saving..."})})]}),e.jsxs("div",{className:"flex flex-col gap-8 md:flex-row",children:[e.jsx("nav",{"data-testid":"settings-sidebar",className:"w-full shrink-0 md:w-48 md:sticky md:top-6 md:self-start",children:e.jsx("ul",{className:"flex flex-row gap-1 overflow-x-auto pb-2 md:flex-col md:gap-0.5 md:pb-0",children:es.map(({id:i,label:j,icon:A})=>e.jsx("li",{children:e.jsxs("button",{type:"button",onClick:()=>z(i),"data-testid":`settings-nav-${i}`,className:S("flex w-full items-center gap-2 whitespace-nowrap rounded-md px-3 py-2 text-sm font-medium transition-colors",n===i?"bg-primary/10 text-primary":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[e.jsx(A,{className:"size-4 shrink-0"}),j]})},i))})}),e.jsxs("div",{className:"min-w-0 flex-1 space-y-8",children:[e.jsx("div",{ref:i=>{u.current.profile=i},children:e.jsx(as,{email:g.email,id:g.id})}),e.jsx("div",{ref:i=>{u.current.appearance=i},children:e.jsx(is,{theme:g.theme,defaultView:g.default_view,sidebarCollapsed:g.sidebar_collapsed,showCompleted:g.show_completed_items,itemsPerPage:g.items_per_page,timezone:g.timezone,onThemeChange:c,onDefaultViewChange:m,onSidebarCollapsedChange:i=>l({sidebar_collapsed:i}),onShowCompletedChange:i=>l({show_completed_items:i}),onItemsPerPageChange:C,onTimezoneChange:p})}),e.jsx("div",{ref:i=>{u.current.notifications=i},children:e.jsx(ns,{emailNotifications:g.email_notifications,emailDigestFrequency:g.email_digest_frequency,onEmailNotificationsChange:i=>l({email_notifications:i}),onDigestFrequencyChange:E})}),e.jsx("div",{ref:i=>{u.current.shortcuts=i},children:e.jsx(rs,{})}),e.jsx("div",{ref:i=>{u.current.about=i},children:e.jsx(ds,{})})]})]})]}),e.jsx(ss,{visible:x})]})}function Ms(){return e.jsx("div",{"data-testid":"page-settings",children:e.jsx(cs,{})})}export{Ms as SettingsPage};
//# sourceMappingURL=SettingsPage-CYincXJS.js.map
