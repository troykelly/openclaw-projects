import{r as t,j as p}from"./index-BBE7598u.js";import{a as C}from"./button-BzBQrMtc.js";import{I as R}from"./input-aGA4pO87.js";import{T as N}from"./textarea-6y2OzEZR.js";function M({value:e,onSave:m,validate:u,saveOnBlur:x=!0,selectOnFocus:k=!0,placeholder:h,className:b,editClassName:D,disabled:d=!1,multiline:c=!1,doubleClick:E=!1}){const[r,o]=t.useState(!1),[a,f]=t.useState(e),[I,g]=t.useState(!1),s=t.useRef(null);t.useEffect(()=>{r||f(e)},[e,r]);const l=t.useCallback(()=>{d||(f(e),o(!0))},[e,d]),j=t.useCallback(()=>{E||l()},[E,l]),S=t.useCallback(()=>{l()},[l]),i=t.useCallback(async()=>{if(a===e){o(!1);return}if(!(u&&!u(a))){g(!0);try{await m(a),o(!1)}catch{}finally{g(!1)}}},[a,e,u,m]),y=t.useCallback(()=>{f(e),o(!1)},[e]),K=t.useCallback(n=>{n.key==="Enter"&&!c||n.key==="Enter"&&c&&(n.metaKey||n.ctrlKey)?(n.preventDefault(),i()):n.key==="Escape"&&(n.preventDefault(),y())},[i,y,c]),T=t.useCallback(()=>{x&&i()},[x,i]);if(t.useEffect(()=>{r&&s.current&&(s.current.focus(),k&&s.current instanceof HTMLInputElement&&s.current.select())},[r,k]),r){const n={value:a,onChange:w=>f(w.target.value),onKeyDown:K,onBlur:T,disabled:I,className:C("ring-2 ring-primary",D)};return c?p.jsx(N,{ref:s,...n,"data-testid":"inline-edit-textarea"}):p.jsx(R,{ref:s,...n,"data-testid":"inline-edit-input"})}return p.jsx("span",{onClick:j,onDoubleClick:S,className:C("cursor-text rounded px-1 -mx-1 hover:bg-muted/50 transition-colors",d&&"cursor-default hover:bg-transparent",!e&&"text-muted-foreground italic",b),"data-testid":"inline-edit-display",children:e||h||"Â "})}export{M as I};
//# sourceMappingURL=inline-editable-text-DYQsept1.js.map
