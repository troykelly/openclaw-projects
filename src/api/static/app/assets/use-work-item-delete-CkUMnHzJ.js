import{c as y,u as j,a as D,d as E,B as M}from"./button-BzBQrMtc.js";import{j as r,r as n}from"./index-BBE7598u.js";import{c as L,b as z,a as F}from"./index-D6aJl7-K.js";import{R as G,W as Y,C as B,T as W,f as V,g as N,h as w,P as H,O as q,i as J}from"./dialog-BK5-jUdo.js";const K=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],Re=y("grip-vertical",K);const Q=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Se=y("target",Q);var C="AlertDialog",[X]=F(C,[w]),m=w(),b=e=>{const{__scopeAlertDialog:t,...a}=e,o=m(t);return r.jsx(G,{...o,...a,modal:!0})};b.displayName=C;var Z="AlertDialogTrigger",ee=n.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...o}=e,l=m(a);return r.jsx(J,{...l,...o,ref:t})});ee.displayName=Z;var te="AlertDialogPortal",T=e=>{const{__scopeAlertDialog:t,...a}=e,o=m(t);return r.jsx(H,{...o,...a})};T.displayName=te;var re="AlertDialogOverlay",_=n.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...o}=e,l=m(a);return r.jsx(q,{...l,...o,ref:t})});_.displayName=re;var h="AlertDialogContent",[oe,ae]=X(h),le=z("AlertDialogContent"),k=n.forwardRef((e,t)=>{const{__scopeAlertDialog:a,children:o,...l}=e,c=m(a),d=n.useRef(null),u=j(t,d),g=n.useRef(null);return r.jsx(Y,{contentName:h,titleName:R,docsSlug:"alert-dialog",children:r.jsx(oe,{scope:a,cancelRef:g,children:r.jsxs(B,{role:"alertdialog",...c,...l,ref:u,onOpenAutoFocus:L(l.onOpenAutoFocus,p=>{p.preventDefault(),g.current?.focus({preventScroll:!0})}),onPointerDownOutside:p=>p.preventDefault(),onInteractOutside:p=>p.preventDefault(),children:[r.jsx(le,{children:o}),r.jsx(se,{contentRef:d})]})})})});k.displayName=h;var R="AlertDialogTitle",S=n.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...o}=e,l=m(a);return r.jsx(W,{...l,...o,ref:t})});S.displayName=R;var $="AlertDialogDescription",P=n.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...o}=e,l=m(a);return r.jsx(V,{...l,...o,ref:t})});P.displayName=$;var ne="AlertDialogAction",I=n.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...o}=e,l=m(a);return r.jsx(N,{...l,...o,ref:t})});I.displayName=ne;var O="AlertDialogCancel",U=n.forwardRef((e,t)=>{const{__scopeAlertDialog:a,...o}=e,{cancelRef:l}=ae(O,a),c=m(a),d=j(t,l);return r.jsx(N,{...c,...o,ref:d})});U.displayName=O;var se=({contentRef:e})=>{const t=`\`${h}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${h}\` by passing a \`${$}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${h}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return n.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},ie=b,ce=T,de=_,ue=k,ge=I,pe=U,fe=S,me=P;function xe({...e}){return r.jsx(ie,{"data-slot":"alert-dialog",...e})}function De({...e}){return r.jsx(ce,{"data-slot":"alert-dialog-portal",...e})}function he({className:e,...t}){return r.jsx(de,{"data-slot":"alert-dialog-overlay",className:D("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function Ae({className:e,...t}){return r.jsxs(De,{children:[r.jsx(he,{}),r.jsx(ue,{"data-slot":"alert-dialog-content",className:D("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function ve({className:e,...t}){return r.jsx("div",{"data-slot":"alert-dialog-header",className:D("flex flex-col gap-2 text-center sm:text-left",e),...t})}function ye({className:e,...t}){return r.jsx("div",{"data-slot":"alert-dialog-footer",className:D("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function je({className:e,...t}){return r.jsx(fe,{"data-slot":"alert-dialog-title",className:D("text-lg font-semibold",e),...t})}function Ee({className:e,...t}){return r.jsx(me,{"data-slot":"alert-dialog-description",className:D("text-muted-foreground text-sm",e),...t})}function Ne({className:e,...t}){return r.jsx(ge,{"data-slot":"alert-dialog-action",className:D(E(),e),...t})}function we({className:e,...t}){return r.jsx(pe,{"data-slot":"alert-dialog-cancel",className:D(E({variant:"outline"}),e),...t})}function $e({open:e,onOpenChange:t,item:a,items:o,onConfirm:l,isDeleting:c}){const d=o&&o.length>0,u=d?o.length:1,g=a?.title??"",p=a?.childCount??0,x=d?o.reduce((f,s)=>f+(s.childCount??0),0):p,A=()=>d?`Delete ${u} items?`:`Delete "${g}"?`,v=()=>{const f=[];return d?f.push(`You are about to delete ${u} items.`):f.push(`You are about to delete "${g}".`),x>0&&f.push(`This will also delete ${x} child item${x===1?"":"s"}.`),f.push("You can undo this action for a short time after deletion."),f.join(" ")};return r.jsx(xe,{open:e,onOpenChange:t,children:r.jsxs(Ae,{children:[r.jsxs(ve,{children:[r.jsx(je,{children:A()}),r.jsx(Ee,{children:v()})]}),r.jsxs(ye,{children:[r.jsx(we,{disabled:c,children:"Cancel"}),r.jsx(Ne,{onClick:l,disabled:c,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:c?"Deleting...":"Delete"})]})]})})}const Ce=5e3;function Pe({visible:e,itemTitle:t,itemCount:a,onUndo:o,onDismiss:l,timeout:c=Ce}){if(n.useEffect(()=>{if(!e)return;const u=setTimeout(()=>{l()},c);return()=>clearTimeout(u)},[e,c,l]),!e)return null;const d=()=>a&&a>1?`Deleted ${a} items`:`Deleted "${t}"`;return r.jsxs("div",{role:"alert",className:"fixed bottom-4 left-1/2 -translate-x-1/2 z-50 flex items-center gap-3 rounded-lg border bg-background px-4 py-3 shadow-lg",children:[r.jsx("span",{className:"text-sm",children:d()}),r.jsx(M,{variant:"outline",size:"sm",onClick:o,children:"Undo"})]})}function Ie(e={}){const{onDeleted:t,onRestored:a,onError:o}=e,[l,c]=n.useState(!1),[d,u]=n.useState(null),g=n.useRef([]),p=n.useCallback(async s=>{try{if(!(await fetch(`/api/work-items/${s}/restore`,{method:"POST"})).ok)throw new Error("Failed to restore item");u(null),g.current=[],a?.()}catch(i){o?.(i instanceof Error?i:new Error("Unknown error"))}},[a,o]),x=n.useCallback(async()=>{const s=g.current;for(const i of s)await p(i)},[p]),A=n.useCallback(async s=>{c(!0);try{if(!(await fetch(`/api/work-items/${s.id}`,{method:"DELETE"})).ok)throw new Error("Failed to delete item");g.current=[s.id],u({itemId:s.id,itemTitle:s.title,onUndo:x}),t?.()}catch(i){o?.(i instanceof Error?i:new Error("Unknown error"))}finally{c(!1)}},[t,o,x]),v=n.useCallback(async s=>{c(!0);try{await Promise.all(s.map(i=>fetch(`/api/work-items/${i.id}`,{method:"DELETE"}))),g.current=s.map(i=>i.id),u({itemId:s[0].id,itemTitle:s[0].title,itemCount:s.length,onUndo:x}),t?.()}catch(i){o?.(i instanceof Error?i:new Error("Unknown error"))}finally{c(!1)}},[t,o,x]),f=n.useCallback(()=>{u(null),g.current=[]},[]);return{deleteItem:A,deleteItems:v,restoreItem:p,isDeleting:l,undoState:d,dismissUndo:f}}export{$e as D,Re as G,Se as T,Pe as U,Ie as u};
//# sourceMappingURL=use-work-item-delete-CkUMnHzJ.js.map
